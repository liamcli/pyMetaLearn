<!DOCTYPE html>
<!-- Generated by Cython 0.20.1 on Tue May 13 13:42:28 2014 -->
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">

body { font-family: courier; font-size: 12; }

.code  { font-size: 9; color: #444444; display: none; margin-left: 20px; }
.py_c_api  { color: red; }
.py_macro_api  { color: #FF7000; }
.pyx_c_api  { color: #FF3000; }
.pyx_macro_api  { color: #FF7000; }
.refnanny  { color: #FFA000; }

.error_goto  { color: #FFA000; }

.tag  {  }

.coerce  { color: #008000; border: 1px dotted #008000 }

.py_attr { color: #FF0000; font-weight: bold; }
.c_attr  { color: #0000FF; }

.py_call { color: #FF0000; font-weight: bold; }
.c_call  { color: #0000FF; }

.line { margin: 0em }

</style>
<script>
function toggleDiv(id) {
    theDiv = document.getElementById(id);
    if (theDiv.style.display != 'block') theDiv.style.display = 'block';
    else theDiv.style.display = 'none';
}
</script>
</head>
        <body>
<p>Generated by Cython 0.20.1 on Tue May 13 13:42:28 2014
<p>Raw output: <a href="_tree.c">_tree.c</a>
<pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line1")'> 1: # encoding: utf-8</pre>
<pre id='line1' class='code' style='background-color: #FFFF79'>  __pyx_t_2 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_test, __pyx_t_2) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line2")'> 2: # cython: cdivision=True</pre>
<pre id='line2' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line3")'> 3: # cython: boundscheck=False</pre>
<pre id='line3' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line4")'> 4: # cython: wraparound=False</pre>
<pre id='line4' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line5")'> 5: </pre>
<pre id='line5' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line6")'> 6: # Authors: Gilles Louppe &lt;g.louppe@gmail.com&gt;</pre>
<pre id='line6' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line7")'> 7: #          Peter Prettenhofer &lt;peter.prettenhofer@gmail.com&gt;</pre>
<pre id='line7' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line8")'> 8: #          Brian Holt &lt;bdholt1@gmail.com&gt;</pre>
<pre id='line8' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line9")'> 9: #          Noel Dawe &lt;noel@dawe.me&gt;</pre>
<pre id='line9' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line10")'> 10: #          Satrajit Gosh &lt;satrajit.ghosh@gmail.com&gt;</pre>
<pre id='line10' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line11")'> 11: #          Lars Buitinck &lt;L.J.Buitinck@uva.nl&gt;</pre>
<pre id='line11' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line12")'> 12: #</pre>
<pre id='line12' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line13")'> 13: # rand_r function taken from the 4.4BSD C library:</pre>
<pre id='line13' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line14")'> 14: # Copyright (c) 1990 The Regents of the University of California.</pre>
<pre id='line14' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line15")'> 15: #</pre>
<pre id='line15' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line16")'> 16: # Licence: BSD 3 clause</pre>
<pre id='line16' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line17")'> 17: </pre>
<pre id='line17' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line18")'> 18: from libc.stdio cimport printf</pre>
<pre id='line18' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line19")'> 19: from libc.stdlib cimport calloc, free, malloc, realloc</pre>
<pre id='line19' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line20")'> 20: from libc.string cimport memcpy</pre>
<pre id='line20' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line21")'> 21: from libc.math cimport log as ln</pre>
<pre id='line21' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line22")'> 22: from libc.math cimport sqrt</pre>
<pre id='line22' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line23")'> 23: </pre>
<pre id='line23' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line24")'> 24: import numpy as np</pre>
<pre id='line24' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 24; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_np, __pyx_t_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 24; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line25")'> 25: cimport numpy as np</pre>
<pre id='line25' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line26")'> 26: np.import_array()</pre>
<pre id='line26' class='code' style='background-color: #FFFFff'>  import_array();
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line27")'> 27: </pre>
<pre id='line27' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line28")'> 28: import scipy.stats</pre>
<pre id='line28' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_scipy_stats, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 28; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_scipy, __pyx_t_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 28; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line29")'> 29: import scipy.stats._rank</pre>
<pre id='line29' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_scipy_stats__rank, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 29; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_scipy, __pyx_t_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 29; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line30")'> 30: </pre>
<pre id='line30' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line31")'> 31: cdef enum:</pre>
<pre id='line31' class='code' style='background-color: #FFFFff'>enum  {
  __pyx_e_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RAND_R_MAX = 0x7FFFFFFF
};
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line32")'> 32:     # Max value for our rand_r replacement (near the bottom).</pre>
<pre id='line32' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line33")'> 33:     # We don't use RAND_MAX because it's different across platforms and</pre>
<pre id='line33' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line34")'> 34:     # particularly tiny on Windows/MSVC.</pre>
<pre id='line34' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line35")'> 35:     RAND_R_MAX = 0x7FFFFFFF</pre>
<pre id='line35' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line36")'> 36: </pre>
<pre id='line36' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line37")'> 37: </pre>
<pre id='line37' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line38")'> 38: # =============================================================================</pre>
<pre id='line38' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line39")'> 39: # Types and constants</pre>
<pre id='line39' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line40")'> 40: # =============================================================================</pre>
<pre id='line40' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line41")'> 41: </pre>
<pre id='line41' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line42")'> 42: from numpy import float32 as DTYPE</pre>
<pre id='line42' class='code' style='background-color: #FFFF57'>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 42; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_float32);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_float32);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_float32);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 42; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_2, __pyx_n_s_float32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 42; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_DTYPE, __pyx_t_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 42; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line43")'> 43: from numpy import float64 as DOUBLE</pre>
<pre id='line43' class='code' style='background-color: #FFFF57'>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 43; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_float64);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_n_s_float64);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_float64);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, __pyx_t_2, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 43; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_ImportFrom</span>(__pyx_t_1, __pyx_n_s_float64);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 43; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_DOUBLE, __pyx_t_2) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 43; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line44")'> 44: </pre>
<pre id='line44' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line45")'> 45: cdef double INFINITY = np.inf</pre>
<pre id='line45' class='code' style='background-color: #FFFF79'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 45; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_inf);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 45; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_2);<span class='error_goto'> if (unlikely((__pyx_t_3 == (double)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 45; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_INFINITY = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line46")'> 46: TREE_LEAF = -1</pre>
<pre id='line46' class='code' style='background-color: #FFFFaa'>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_TREE_LEAF, __pyx_int_neg_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 46; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line47")'> 47: TREE_UNDEFINED = -2</pre>
<pre id='line47' class='code' style='background-color: #FFFFaa'>  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_TREE_UNDEFINED, __pyx_int_neg_2) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 47; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line48")'> 48: cdef SIZE_t _TREE_LEAF = TREE_LEAF</pre>
<pre id='line48' class='code' style='background-color: #FFFFaa'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_TREE_LEAF);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 48; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_2);<span class='error_goto'> if (unlikely((__pyx_t_4 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 48; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line49")'> 49: cdef SIZE_t _TREE_UNDEFINED = TREE_UNDEFINED</pre>
<pre id='line49' class='code' style='background-color: #FFFFaa'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_TREE_UNDEFINED);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 49; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_2);<span class='error_goto'> if (unlikely((__pyx_t_4 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 49; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_UNDEFINED = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line50")'> 50: </pre>
<pre id='line50' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line51")'> 51: </pre>
<pre id='line51' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line52")'> 52: # =============================================================================</pre>
<pre id='line52' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line53")'> 53: # Criterion</pre>
<pre id='line53' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line54")'> 54: # =============================================================================</pre>
<pre id='line54' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line55")'> 55: </pre>
<pre id='line55' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line56")'> 56: cdef class Criterion:</pre>
<pre id='line56' class='code' style='background-color: #FFFFff'>struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion {
  void (*init)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t);
  void (*reset)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *);
  void (*update)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t);
  double (*node_impurity)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *);
  double (*children_impurity)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *);
  void (*node_value)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *, double *);
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line57")'> 57:     """Interface for impurity criteria."""</pre>
<pre id='line57' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line58")'> 58: </pre>
<pre id='line58' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line59")'> 59:     cdef void init(self, DOUBLE_t* y,</pre>
<pre id='line59' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_init(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_y_stride, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end) {

  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line60")'> 60:                          SIZE_t y_stride,</pre>
<pre id='line60' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line61")'> 61:                          DOUBLE_t* sample_weight,</pre>
<pre id='line61' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line62")'> 62:                          SIZE_t* samples,</pre>
<pre id='line62' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line63")'> 63:                          SIZE_t start,</pre>
<pre id='line63' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line64")'> 64:                          SIZE_t end) nogil:</pre>
<pre id='line64' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line65")'> 65:         """Initialize the criterion at node samples[start:end] and</pre>
<pre id='line65' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line66")'> 66:            children samples[start:start] and samples[start:end]."""</pre>
<pre id='line66' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line67")'> 67:         pass</pre>
<pre id='line67' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line68")'> 68: </pre>
<pre id='line68' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line69")'> 69:     cdef void reset(self) nogil:</pre>
<pre id='line69' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_reset(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self) {

  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line70")'> 70:         """Reset the criterion at pos=start."""</pre>
<pre id='line70' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line71")'> 71:         pass</pre>
<pre id='line71' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line72")'> 72: </pre>
<pre id='line72' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line73")'> 73:     cdef void update(self, SIZE_t new_pos) nogil:</pre>
<pre id='line73' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_update(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_new_pos) {

  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line74")'> 74:         """Update the collected statistics by moving samples[pos:new_pos] from</pre>
<pre id='line74' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line75")'> 75:            the right child to the left child."""</pre>
<pre id='line75' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line76")'> 76:         pass</pre>
<pre id='line76' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line77")'> 77: </pre>
<pre id='line77' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line78")'> 78:     cdef double node_impurity(self) nogil:</pre>
<pre id='line78' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_node_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line79")'> 79:         """Evaluate the impurity of the current node, i.e. the impurity of</pre>
<pre id='line79' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line80")'> 80:            samples[start:end]."""</pre>
<pre id='line80' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line81")'> 81:         pass</pre>
<pre id='line81' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line82")'> 82: </pre>
<pre id='line82' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line83")'> 83:     cdef double children_impurity(self) nogil:</pre>
<pre id='line83' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_children_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line84")'> 84:         """Evaluate the impurity in children nodes, i.e. the impurity of</pre>
<pre id='line84' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line85")'> 85:            samples[start:pos] + the impurity of samples[pos:end]."""</pre>
<pre id='line85' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line86")'> 86:         pass</pre>
<pre id='line86' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line87")'> 87: </pre>
<pre id='line87' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line88")'> 88:     cdef void node_value(self, double* dest) nogil:</pre>
<pre id='line88' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_9Criterion_node_value(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_self, CYTHON_UNUSED double *__pyx_v_dest) {

  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line89")'> 89:         """Compute the node value of samples[start:end] into dest."""</pre>
<pre id='line89' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line90")'> 90:         pass</pre>
<pre id='line90' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line91")'> 91: </pre>
<pre id='line91' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line92")'> 92: </pre>
<pre id='line92' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line93")'> 93: cdef class ClassificationCriterion(Criterion):</pre>
<pre id='line93' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion __pyx_base;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t label_count_stride;
  double *label_count_left;
  double *label_count_right;
  double *label_count_total;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line94")'> 94:     """Abstract criterion for classification."""</pre>
<pre id='line94' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line95")'> 95:     cdef SIZE_t* n_classes</pre>
<pre id='line95' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line96")'> 96:     cdef SIZE_t label_count_stride</pre>
<pre id='line96' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line97")'> 97:     cdef double* label_count_left</pre>
<pre id='line97' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line98")'> 98:     cdef double* label_count_right</pre>
<pre id='line98' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line99")'> 99:     cdef double* label_count_total</pre>
<pre id='line99' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line100")'> 100: </pre>
<pre id='line100' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2d' onclick='toggleDiv("line101")'> 101:     def __cinit__(self, SIZE_t n_outputs, np.ndarray[SIZE_t, ndim=1] n_classes):</pre>
<pre id='line101' class='code' style='background-color: #FFFF2d'>/* Python wrapper */
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  PyArrayObject *__pyx_v_n_classes = 0;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_n_outputs,&amp;__pyx_n_s_n_classes,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_outputs)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_classes)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 2, 2, 1); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__cinit__") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_n_outputs = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_n_outputs == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_n_classes = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.ClassificationCriterion.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_n_classes), __pyx_ptype_5numpy_ndarray, 1, "n_classes", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion___cinit__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self), __pyx_v_n_outputs, __pyx_v_n_classes);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion___cinit__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs, PyArrayObject *__pyx_v_n_classes) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_n_classes;
  __Pyx_Buffer __pyx_pybuffer_n_classes;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__", 0);
  __pyx_pybuffer_n_classes.pybuffer.buf = NULL;
  __pyx_pybuffer_n_classes.refcount = 0;
  __pyx_pybuffernd_n_classes.data = NULL;
  __pyx_pybuffernd_n_classes.rcbuffer = &amp;__pyx_pybuffer_n_classes;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_n_classes, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 101; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_n_classes.diminfo[0].strides = __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_n_classes.diminfo[0].shape = __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.ClassificationCriterion.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line102")'> 102:         # Default values</pre>
<pre id='line102' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line103")'> 103:         self.y = NULL</pre>
<pre id='line103' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line104")'> 104:         self.y_stride = 0</pre>
<pre id='line104' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y_stride = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line105")'> 105:         self.sample_weight = NULL</pre>
<pre id='line105' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.sample_weight = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line106")'> 106: </pre>
<pre id='line106' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line107")'> 107:         self.samples = NULL</pre>
<pre id='line107' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.samples = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line108")'> 108:         self.start = 0</pre>
<pre id='line108' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.start = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line109")'> 109:         self.pos = 0</pre>
<pre id='line109' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.pos = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line110")'> 110:         self.end = 0</pre>
<pre id='line110' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.end = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line111")'> 111: </pre>
<pre id='line111' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line112")'> 112:         self.n_outputs = n_outputs</pre>
<pre id='line112' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_outputs = __pyx_v_n_outputs;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line113")'> 113:         self.n_node_samples = 0</pre>
<pre id='line113' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_node_samples = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line114")'> 114:         self.weighted_n_node_samples = 0.0</pre>
<pre id='line114' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line115")'> 115:         self.weighted_n_left = 0.0</pre>
<pre id='line115' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line116")'> 116:         self.weighted_n_right = 0.0</pre>
<pre id='line116' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line117")'> 117: </pre>
<pre id='line117' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line118")'> 118:         # Count labels for each output</pre>
<pre id='line118' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line119")'> 119:         self.n_classes = &lt;SIZE_t*&gt; malloc(n_outputs * sizeof(SIZE_t))</pre>
<pre id='line119' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_classes = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)malloc((__pyx_v_n_outputs * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line120")'> 120:         if self.n_classes == NULL:</pre>
<pre id='line120' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;n_classes == NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line121")'> 121:             raise MemoryError()</pre>
<pre id='line121' class='code' style='background-color: #FFFFaa'>    <span class='py_c_api'>PyErr_NoMemory</span>(); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line122")'> 122: </pre>
<pre id='line122' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line123")'> 123:         cdef SIZE_t k = 0</pre>
<pre id='line123' class='code' style='background-color: #FFFFff'>  __pyx_v_k = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line124")'> 124:         cdef SIZE_t label_count_stride = 0</pre>
<pre id='line124' class='code' style='background-color: #FFFFff'>  __pyx_v_label_count_stride = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line125")'> 125: </pre>
<pre id='line125' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line126")'> 126:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line126' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line127")'> 127:             self.n_classes[k] = n_classes[k]</pre>
<pre id='line127' class='code' style='background-color: #FFFFff'>    __pyx_t_3 = __pyx_v_k;
    (__pyx_v_self-&gt;n_classes[__pyx_v_k]) = (*__Pyx_BufPtrStrided1d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_n_classes.diminfo[0].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line128")'> 128: </pre>
<pre id='line128' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line129")'> 129:             if n_classes[k] &gt; label_count_stride:</pre>
<pre id='line129' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = __pyx_v_k;
    __pyx_t_1 = (((*__Pyx_BufPtrStrided1d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_n_classes.diminfo[0].strides)) &gt; __pyx_v_label_count_stride) != 0);
    if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line130")'> 130:                 label_count_stride = n_classes[k]</pre>
<pre id='line130' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = __pyx_v_k;
      __pyx_v_label_count_stride = (*__Pyx_BufPtrStrided1d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_n_classes.diminfo[0].strides));
      goto __pyx_L6;
    }
    __pyx_L6:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line131")'> 131: </pre>
<pre id='line131' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line132")'> 132:         self.label_count_stride = label_count_stride</pre>
<pre id='line132' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;label_count_stride = __pyx_v_label_count_stride;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line133")'> 133: </pre>
<pre id='line133' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line134")'> 134:         # Allocate counters</pre>
<pre id='line134' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line135")'> 135:         self.label_count_left = &lt;double*&gt; calloc(n_outputs * label_count_stride, sizeof(double))</pre>
<pre id='line135' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;label_count_left = ((double *)calloc((__pyx_v_n_outputs * __pyx_v_label_count_stride), (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line136")'> 136:         self.label_count_right = &lt;double*&gt; calloc(n_outputs * label_count_stride, sizeof(double))</pre>
<pre id='line136' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;label_count_right = ((double *)calloc((__pyx_v_n_outputs * __pyx_v_label_count_stride), (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line137")'> 137:         self.label_count_total = &lt;double*&gt; calloc(n_outputs * label_count_stride, sizeof(double))</pre>
<pre id='line137' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;label_count_total = ((double *)calloc((__pyx_v_n_outputs * __pyx_v_label_count_stride), (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line138")'> 138: </pre>
<pre id='line138' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line139")'> 139:         # Check for allocation errors</pre>
<pre id='line139' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line140")'> 140:         if ((self.label_count_left == NULL) or</pre>
<pre id='line140' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;label_count_left == NULL) != 0);
  if (!__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line141")'> 141:             (self.label_count_right == NULL) or</pre>
<pre id='line141' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = ((__pyx_v_self-&gt;label_count_right == NULL) != 0);
    if (!__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line142")'> 142:             (self.label_count_total == NULL)):</pre>
<pre id='line142' class='code' style='background-color: #FFFFff'>      __pyx_t_7 = ((__pyx_v_self-&gt;label_count_total == NULL) != 0);
      __pyx_t_8 = __pyx_t_7;
    } else {
      __pyx_t_8 = __pyx_t_6;
    }
    __pyx_t_6 = __pyx_t_8;
  } else {
    __pyx_t_6 = __pyx_t_1;
  }
  if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line143")'> 143:             free(self.n_classes)</pre>
<pre id='line143' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;n_classes);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line144")'> 144:             free(self.label_count_left)</pre>
<pre id='line144' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;label_count_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line145")'> 145:             free(self.label_count_right)</pre>
<pre id='line145' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;label_count_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line146")'> 146:             free(self.label_count_total)</pre>
<pre id='line146' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;label_count_total);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line147")'> 147:             raise MemoryError()</pre>
<pre id='line147' class='code' style='background-color: #FFFFaa'>    <span class='py_c_api'>PyErr_NoMemory</span>(); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 147; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line148")'> 148: </pre>
<pre id='line148' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line149")'> 149:     def __dealloc__(self):</pre>
<pre id='line149' class='code' style='background-color: #FFFFff'>/* Python wrapper */
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_3__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_3__dealloc__(PyObject *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__ (wrapper)", 0);
  __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_2__dealloc__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}

static void __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_2__dealloc__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__", 0);
/* … */
  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line150")'> 150:         """Destructor."""</pre>
<pre id='line150' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line151")'> 151:         free(self.n_classes)</pre>
<pre id='line151' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;n_classes);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line152")'> 152:         free(self.label_count_left)</pre>
<pre id='line152' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;label_count_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line153")'> 153:         free(self.label_count_right)</pre>
<pre id='line153' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;label_count_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line154")'> 154:         free(self.label_count_total)</pre>
<pre id='line154' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;label_count_total);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line155")'> 155: </pre>
<pre id='line155' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line156")'> 156:     def __reduce__(self):</pre>
<pre id='line156' class='code' style='background-color: #FFFFaa'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_4__reduce__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_4__reduce__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.ClassificationCriterion.__reduce__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line157")'> 157:         return (ClassificationCriterion,</pre>
<pre id='line157' class='code' style='background-color: #FFFF7f'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
/* … */
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 157; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion)));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFF86' onclick='toggleDiv("line158")'> 158:                 (self.n_outputs,</pre>
<pre id='line158' class='code' style='background-color: #FFFF86'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.n_outputs);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 158; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 158; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line159")'> 159:                  sizet_ptr_to_ndarray(self.n_classes, self.n_outputs)),</pre>
<pre id='line159' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;n_classes, __pyx_v_self-&gt;__pyx_base.n_outputs));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 159; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line160")'> 160:                 self.__getstate__())</pre>
<pre id='line160' class='code' style='background-color: #FFFFaa'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_getstate);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 160; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_empty_tuple, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 160; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line161")'> 161: </pre>
<pre id='line161' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line162")'> 162:     def __getstate__(self):</pre>
<pre id='line162' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_6__getstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_6__getstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.ClassificationCriterion.__getstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line163")'> 163:         return {}</pre>
<pre id='line163' class='code' style='background-color: #FFFF9f'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 163; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line164")'> 164: </pre>
<pre id='line164' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line165")'> 165:     def __setstate__(self, d):</pre>
<pre id='line165' class='code' style='background-color: #FFFFe7'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_8__setstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self), ((PyObject *)__pyx_v_d));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_8__setstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_d) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__", 0);

  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line166")'> 166:         pass</pre>
<pre id='line166' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line167")'> 167: </pre>
<pre id='line167' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line168")'> 168:     cdef void init(self, DOUBLE_t* y,</pre>
<pre id='line168' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_init(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_y_stride, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end) {
  double __pyx_v_weighted_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_w;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line169")'> 169:                          SIZE_t y_stride,</pre>
<pre id='line169' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line170")'> 170:                          DOUBLE_t* sample_weight,</pre>
<pre id='line170' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line171")'> 171:                          SIZE_t* samples,</pre>
<pre id='line171' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line172")'> 172:                          SIZE_t start,</pre>
<pre id='line172' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line173")'> 173:                          SIZE_t end) nogil:</pre>
<pre id='line173' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line174")'> 174:         """Initialize the criterion at node samples[start:end] and</pre>
<pre id='line174' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line175")'> 175:            children samples[start:start] and samples[start:end]."""</pre>
<pre id='line175' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line176")'> 176:         # Initialize fields</pre>
<pre id='line176' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line177")'> 177:         self.y = y</pre>
<pre id='line177' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y = __pyx_v_y;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line178")'> 178:         self.y_stride = y_stride</pre>
<pre id='line178' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y_stride = __pyx_v_y_stride;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line179")'> 179:         self.sample_weight = sample_weight</pre>
<pre id='line179' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.sample_weight = __pyx_v_sample_weight;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line180")'> 180:         self.samples = samples</pre>
<pre id='line180' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.samples = __pyx_v_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line181")'> 181:         self.start = start</pre>
<pre id='line181' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line182")'> 182:         self.end = end</pre>
<pre id='line182' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line183")'> 183:         self.n_node_samples = end - start</pre>
<pre id='line183' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_node_samples = (__pyx_v_end - __pyx_v_start);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line184")'> 184:         cdef double weighted_n_node_samples = 0.0</pre>
<pre id='line184' class='code' style='background-color: #FFFFff'>  __pyx_v_weighted_n_node_samples = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line185")'> 185: </pre>
<pre id='line185' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line186")'> 186:         # Initialize label_count_total and weighted_n_node_samples</pre>
<pre id='line186' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line187")'> 187:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line187' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line188")'> 188:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line188' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;n_classes;
  __pyx_v_n_classes = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line189")'> 189:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line189' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line190")'> 190:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line190' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;label_count_total;
  __pyx_v_label_count_total = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line191")'> 191: </pre>
<pre id='line191' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line192")'> 192:         cdef SIZE_t i = 0</pre>
<pre id='line192' class='code' style='background-color: #FFFFff'>  __pyx_v_i = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line193")'> 193:         cdef SIZE_t p = 0</pre>
<pre id='line193' class='code' style='background-color: #FFFFff'>  __pyx_v_p = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line194")'> 194:         cdef SIZE_t k = 0</pre>
<pre id='line194' class='code' style='background-color: #FFFFff'>  __pyx_v_k = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line195")'> 195:         cdef SIZE_t c = 0</pre>
<pre id='line195' class='code' style='background-color: #FFFFff'>  __pyx_v_c = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line196")'> 196:         cdef DOUBLE_t w = 1.0</pre>
<pre id='line196' class='code' style='background-color: #FFFFff'>  __pyx_v_w = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line197")'> 197:         cdef SIZE_t offset = 0</pre>
<pre id='line197' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line198")'> 198: </pre>
<pre id='line198' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line199")'> 199:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line199' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line200")'> 200:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line200' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_4; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line201")'> 201:                 label_count_total[offset + c] = 0</pre>
<pre id='line201' class='code' style='background-color: #FFFFff'>      (__pyx_v_label_count_total[(__pyx_v_offset + __pyx_v_c)]) = 0.0;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line202")'> 202:             offset += label_count_stride</pre>
<pre id='line202' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line203")'> 203: </pre>
<pre id='line203' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line204")'> 204:         for p from start &lt;= p &lt; end:</pre>
<pre id='line204' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_end;
  for (__pyx_v_p = __pyx_v_start; __pyx_v_p &lt; __pyx_t_1; __pyx_v_p++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line205")'> 205:             i = samples[p]</pre>
<pre id='line205' class='code' style='background-color: #FFFFff'>    __pyx_v_i = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line206")'> 206: </pre>
<pre id='line206' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line207")'> 207:             if sample_weight != NULL:</pre>
<pre id='line207' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = ((__pyx_v_sample_weight != NULL) != 0);
    if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line208")'> 208:                 w = sample_weight[i]</pre>
<pre id='line208' class='code' style='background-color: #FFFFff'>      __pyx_v_w = (__pyx_v_sample_weight[__pyx_v_i]);
      goto __pyx_L9;
    }
    __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line209")'> 209: </pre>
<pre id='line209' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line210")'> 210:             for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line210' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = __pyx_v_n_outputs;
    for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_4; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line211")'> 211:                 c = &lt;SIZE_t&gt; y[i * y_stride + k]</pre>
<pre id='line211' class='code' style='background-color: #FFFFff'>      __pyx_v_c = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)(__pyx_v_y[((__pyx_v_i * __pyx_v_y_stride) + __pyx_v_k)]));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line212")'> 212:                 label_count_total[k * label_count_stride + c] += w</pre>
<pre id='line212' class='code' style='background-color: #FFFFff'>      __pyx_t_6 = ((__pyx_v_k * __pyx_v_label_count_stride) + __pyx_v_c);
      (__pyx_v_label_count_total[__pyx_t_6]) = ((__pyx_v_label_count_total[__pyx_t_6]) + __pyx_v_w);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line213")'> 213: </pre>
<pre id='line213' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line214")'> 214:             weighted_n_node_samples += w</pre>
<pre id='line214' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_node_samples = (__pyx_v_weighted_n_node_samples + __pyx_v_w);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line215")'> 215: </pre>
<pre id='line215' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line216")'> 216:         self.weighted_n_node_samples = weighted_n_node_samples</pre>
<pre id='line216' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples = __pyx_v_weighted_n_node_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line217")'> 217: </pre>
<pre id='line217' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line218")'> 218:         # Reset to pos=start</pre>
<pre id='line218' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line219")'> 219:         self.reset()</pre>
<pre id='line219' class='code' style='background-color: #FFFFff'>  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *)__pyx_v_self-&gt;__pyx_base.__pyx_vtab)-&gt;__pyx_base.reset(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_self));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line220")'> 220: </pre>
<pre id='line220' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line221")'> 221:     cdef void reset(self) nogil:</pre>
<pre id='line221' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_reset(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_total;
  double *__pyx_v_label_count_left;
  double *__pyx_v_label_count_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line222")'> 222:         """Reset the criterion at pos=start."""</pre>
<pre id='line222' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line223")'> 223:         self.pos = self.start</pre>
<pre id='line223' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.start;
  __pyx_v_self-&gt;__pyx_base.pos = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line224")'> 224: </pre>
<pre id='line224' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line225")'> 225:         self.weighted_n_left = 0.0</pre>
<pre id='line225' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line226")'> 226:         self.weighted_n_right = self.weighted_n_node_samples</pre>
<pre id='line226' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples;
  __pyx_v_self-&gt;__pyx_base.weighted_n_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line227")'> 227: </pre>
<pre id='line227' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line228")'> 228:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line228' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line229")'> 229:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line229' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line230")'> 230:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line230' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line231")'> 231:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line231' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_total;
  __pyx_v_label_count_total = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line232")'> 232:         cdef double* label_count_left = self.label_count_left</pre>
<pre id='line232' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_left;
  __pyx_v_label_count_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line233")'> 233:         cdef double* label_count_right = self.label_count_right</pre>
<pre id='line233' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_right;
  __pyx_v_label_count_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line234")'> 234: </pre>
<pre id='line234' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line235")'> 235:         cdef SIZE_t k = 0</pre>
<pre id='line235' class='code' style='background-color: #FFFFff'>  __pyx_v_k = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line236")'> 236:         cdef SIZE_t c = 0</pre>
<pre id='line236' class='code' style='background-color: #FFFFff'>  __pyx_v_c = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line237")'> 237:         cdef SIZE_t offset = 0</pre>
<pre id='line237' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line238")'> 238: </pre>
<pre id='line238' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line239")'> 239:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line239' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line240")'> 240:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line240' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_5; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line241")'> 241:                 # Reset left label counts to 0</pre>
<pre id='line241' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line242")'> 242:                 label_count_left[offset + c] = 0</pre>
<pre id='line242' class='code' style='background-color: #FFFFff'>      (__pyx_v_label_count_left[(__pyx_v_offset + __pyx_v_c)]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line243")'> 243:                 # Reset right label counts to the initial counts</pre>
<pre id='line243' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line244")'> 244:                 label_count_right[offset + c] = label_count_total[offset + c]</pre>
<pre id='line244' class='code' style='background-color: #FFFFff'>      (__pyx_v_label_count_right[(__pyx_v_offset + __pyx_v_c)]) = (__pyx_v_label_count_total[(__pyx_v_offset + __pyx_v_c)]);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line245")'> 245:             offset += label_count_stride</pre>
<pre id='line245' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line246")'> 246: </pre>
<pre id='line246' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line247")'> 247:     cdef void update(self, SIZE_t new_pos) nogil:</pre>
<pre id='line247' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_update(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_new_pos) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_y_stride;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  CYTHON_UNUSED double *__pyx_v_label_count_total;
  double *__pyx_v_label_count_left;
  double *__pyx_v_label_count_right;
  double __pyx_v_weighted_n_left;
  double __pyx_v_weighted_n_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_index;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_w;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line248")'> 248:         """Update the collected statistics by moving samples[pos:new_pos] from</pre>
<pre id='line248' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line249")'> 249:             the right child to the left child."""</pre>
<pre id='line249' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line250")'> 250:         cdef DOUBLE_t* y = self.y</pre>
<pre id='line250' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.y;
  __pyx_v_y = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line251")'> 251:         cdef SIZE_t y_stride = self.y_stride</pre>
<pre id='line251' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.y_stride;
  __pyx_v_y_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line252")'> 252:         cdef DOUBLE_t* sample_weight = self.sample_weight</pre>
<pre id='line252' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.sample_weight;
  __pyx_v_sample_weight = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line253")'> 253: </pre>
<pre id='line253' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line254")'> 254:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line254' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.samples;
  __pyx_v_samples = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line255")'> 255:         cdef SIZE_t pos = self.pos</pre>
<pre id='line255' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.pos;
  __pyx_v_pos = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line256")'> 256: </pre>
<pre id='line256' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line257")'> 257:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line257' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line258")'> 258:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line258' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line259")'> 259:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line259' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line260")'> 260:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line260' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_total;
  __pyx_v_label_count_total = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line261")'> 261:         cdef double* label_count_left = self.label_count_left</pre>
<pre id='line261' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_left;
  __pyx_v_label_count_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line262")'> 262:         cdef double* label_count_right = self.label_count_right</pre>
<pre id='line262' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;label_count_right;
  __pyx_v_label_count_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line263")'> 263: </pre>
<pre id='line263' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line264")'> 264:         cdef double weighted_n_left = self.weighted_n_left</pre>
<pre id='line264' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;__pyx_base.weighted_n_left;
  __pyx_v_weighted_n_left = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line265")'> 265:         cdef double weighted_n_right = self.weighted_n_right</pre>
<pre id='line265' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;__pyx_base.weighted_n_right;
  __pyx_v_weighted_n_right = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line266")'> 266: </pre>
<pre id='line266' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line267")'> 267:         cdef SIZE_t i</pre>
<pre id='line267' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line268")'> 268:         cdef SIZE_t p</pre>
<pre id='line268' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line269")'> 269:         cdef SIZE_t k</pre>
<pre id='line269' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line270")'> 270:         cdef SIZE_t label_index</pre>
<pre id='line270' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line271")'> 271:         cdef DOUBLE_t w = 1.0</pre>
<pre id='line271' class='code' style='background-color: #FFFFff'>  __pyx_v_w = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line272")'> 272: </pre>
<pre id='line272' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line273")'> 273:         # Note: We assume start &lt;= pos &lt; new_pos &lt;= end</pre>
<pre id='line273' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line274")'> 274: </pre>
<pre id='line274' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line275")'> 275:         for p from pos &lt;= p &lt; new_pos:</pre>
<pre id='line275' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_new_pos;
  for (__pyx_v_p = __pyx_v_pos; __pyx_v_p &lt; __pyx_t_2; __pyx_v_p++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line276")'> 276:             i = samples[p]</pre>
<pre id='line276' class='code' style='background-color: #FFFFff'>    __pyx_v_i = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line277")'> 277: </pre>
<pre id='line277' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line278")'> 278:             if sample_weight != NULL:</pre>
<pre id='line278' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = ((__pyx_v_sample_weight != NULL) != 0);
    if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line279")'> 279:                 w  = sample_weight[i]</pre>
<pre id='line279' class='code' style='background-color: #FFFFff'>      __pyx_v_w = (__pyx_v_sample_weight[__pyx_v_i]);
      goto __pyx_L5;
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line280")'> 280: </pre>
<pre id='line280' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line281")'> 281:             for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line281' class='code' style='background-color: #FFFFff'>    __pyx_t_7 = __pyx_v_n_outputs;
    for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_7; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line282")'> 282:                 label_index = (k * label_count_stride +</pre>
<pre id='line282' class='code' style='background-color: #FFFFff'>      __pyx_v_label_index = ((__pyx_v_k * __pyx_v_label_count_stride) + ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)(__pyx_v_y[((__pyx_v_i * __pyx_v_y_stride) + __pyx_v_k)])));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line283")'> 283:                                &lt;SIZE_t&gt; y[i * y_stride + k])</pre>
<pre id='line283' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line284")'> 284:                 label_count_left[label_index] += w</pre>
<pre id='line284' class='code' style='background-color: #FFFFff'>      __pyx_t_8 = __pyx_v_label_index;
      (__pyx_v_label_count_left[__pyx_t_8]) = ((__pyx_v_label_count_left[__pyx_t_8]) + __pyx_v_w);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line285")'> 285:                 label_count_right[label_index] -= w</pre>
<pre id='line285' class='code' style='background-color: #FFFFff'>      __pyx_t_8 = __pyx_v_label_index;
      (__pyx_v_label_count_right[__pyx_t_8]) = ((__pyx_v_label_count_right[__pyx_t_8]) - __pyx_v_w);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line286")'> 286: </pre>
<pre id='line286' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line287")'> 287:             weighted_n_left += w</pre>
<pre id='line287' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_left = (__pyx_v_weighted_n_left + __pyx_v_w);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line288")'> 288:             weighted_n_right -= w</pre>
<pre id='line288' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_right = (__pyx_v_weighted_n_right - __pyx_v_w);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line289")'> 289: </pre>
<pre id='line289' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line290")'> 290:         self.weighted_n_left = weighted_n_left</pre>
<pre id='line290' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = __pyx_v_weighted_n_left;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line291")'> 291:         self.weighted_n_right = weighted_n_right</pre>
<pre id='line291' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_right = __pyx_v_weighted_n_right;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line292")'> 292: </pre>
<pre id='line292' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line293")'> 293:         self.pos = new_pos</pre>
<pre id='line293' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.pos = __pyx_v_new_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line294")'> 294: </pre>
<pre id='line294' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line295")'> 295:     cdef double node_impurity(self) nogil:</pre>
<pre id='line295' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_node_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line296")'> 296:         pass</pre>
<pre id='line296' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line297")'> 297: </pre>
<pre id='line297' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line298")'> 298:     cdef double children_impurity(self) nogil:</pre>
<pre id='line298' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_children_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line299")'> 299:         pass</pre>
<pre id='line299' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line300")'> 300: </pre>
<pre id='line300' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line301")'> 301:     cdef void node_value(self, double* dest) nogil:</pre>
<pre id='line301' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_23ClassificationCriterion_node_value(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion *__pyx_v_self, double *__pyx_v_dest) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line302")'> 302:         """Compute the node value of samples[start:end] into dest."""</pre>
<pre id='line302' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line303")'> 303:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line303' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line304")'> 304:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line304' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;n_classes;
  __pyx_v_n_classes = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line305")'> 305:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line305' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line306")'> 306:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line306' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;label_count_total;
  __pyx_v_label_count_total = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line307")'> 307: </pre>
<pre id='line307' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line308")'> 308:         cdef SIZE_t k</pre>
<pre id='line308' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line309")'> 309:         cdef SIZE_t c</pre>
<pre id='line309' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line310")'> 310:         cdef SIZE_t offset = 0</pre>
<pre id='line310' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line311")'> 311: </pre>
<pre id='line311' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line312")'> 312:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line312' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line313")'> 313:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line313' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_4; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line314")'> 314:                 dest[offset + c] = label_count_total[offset + c]</pre>
<pre id='line314' class='code' style='background-color: #FFFFff'>      (__pyx_v_dest[(__pyx_v_offset + __pyx_v_c)]) = (__pyx_v_label_count_total[(__pyx_v_offset + __pyx_v_c)]);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line315")'> 315:             offset += label_count_stride</pre>
<pre id='line315' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line316")'> 316: </pre>
<pre id='line316' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line317")'> 317: </pre>
<pre id='line317' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line318")'> 318: cdef class Entropy(ClassificationCriterion):</pre>
<pre id='line318' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line319")'> 319:     """Cross Entropy impurity criteria.</pre>
<pre id='line319' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line320")'> 320: </pre>
<pre id='line320' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line321")'> 321:     Let the target be a classification outcome taking values in 0, 1, ..., K-1.</pre>
<pre id='line321' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line322")'> 322:     If node m represents a region Rm with Nm observations, then let</pre>
<pre id='line322' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line323")'> 323: </pre>
<pre id='line323' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line324")'> 324:         pmk = 1/ Nm \sum_{x_i in Rm} I(yi = k)</pre>
<pre id='line324' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line325")'> 325: </pre>
<pre id='line325' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line326")'> 326:     be the proportion of class k observations in node m.</pre>
<pre id='line326' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line327")'> 327: </pre>
<pre id='line327' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line328")'> 328:     The cross-entropy is then defined as</pre>
<pre id='line328' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line329")'> 329: </pre>
<pre id='line329' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line330")'> 330:         cross-entropy = - \sum_{k=0}^{K-1} pmk log(pmk)</pre>
<pre id='line330' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line331")'> 331:     """</pre>
<pre id='line331' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line332")'> 332:     cdef double node_impurity(self) nogil:</pre>
<pre id='line332' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_7Entropy_node_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy *__pyx_v_self) {
  double __pyx_v_weighted_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_total;
  double __pyx_v_entropy;
  double __pyx_v_total;
  double __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line333")'> 333:         """Evaluate the impurity of the current node, i.e. the impurity of</pre>
<pre id='line333' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line334")'> 334:            samples[start:end]."""</pre>
<pre id='line334' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line335")'> 335:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line335' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line336")'> 336: </pre>
<pre id='line336' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line337")'> 337:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line337' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line338")'> 338:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line338' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line339")'> 339:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line339' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line340")'> 340:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line340' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_total;
  __pyx_v_label_count_total = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line341")'> 341: </pre>
<pre id='line341' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line342")'> 342:         cdef double entropy = 0.0</pre>
<pre id='line342' class='code' style='background-color: #FFFFff'>  __pyx_v_entropy = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line343")'> 343:         cdef double total = 0.0</pre>
<pre id='line343' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line344")'> 344:         cdef double tmp</pre>
<pre id='line344' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line345")'> 345:         cdef SIZE_t k</pre>
<pre id='line345' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line346")'> 346:         cdef SIZE_t c</pre>
<pre id='line346' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line347")'> 347:         cdef SIZE_t offset = 0</pre>
<pre id='line347' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line348")'> 348: </pre>
<pre id='line348' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line349")'> 349:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line349' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line350")'> 350:             entropy = 0.0</pre>
<pre id='line350' class='code' style='background-color: #FFFFff'>    __pyx_v_entropy = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line351")'> 351: </pre>
<pre id='line351' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line352")'> 352:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line352' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_5; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line353")'> 353:                 tmp = label_count_total[offset + c]</pre>
<pre id='line353' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_total[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line354")'> 354:                 if tmp &gt; 0.0:</pre>
<pre id='line354' class='code' style='background-color: #FFFFff'>      __pyx_t_6 = ((__pyx_v_tmp &gt; 0.0) != 0);
      if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line355")'> 355:                     tmp /= weighted_n_node_samples</pre>
<pre id='line355' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_tmp / __pyx_v_weighted_n_node_samples);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line356")'> 356:                     entropy -= tmp * log(tmp)</pre>
<pre id='line356' class='code' style='background-color: #FFFFff'>        __pyx_v_entropy = (__pyx_v_entropy - (__pyx_v_tmp * __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_log(__pyx_v_tmp)));
        goto __pyx_L7;
      }
      __pyx_L7:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line357")'> 357: </pre>
<pre id='line357' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line358")'> 358:             total += entropy</pre>
<pre id='line358' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + __pyx_v_entropy);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line359")'> 359:             offset += label_count_stride</pre>
<pre id='line359' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line360")'> 360: </pre>
<pre id='line360' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line361")'> 361:         return total / n_outputs</pre>
<pre id='line361' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line362")'> 362: </pre>
<pre id='line362' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line363")'> 363:     cdef double children_impurity(self) nogil:</pre>
<pre id='line363' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_7Entropy_children_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Entropy *__pyx_v_self) {
  double __pyx_v_weighted_n_node_samples;
  double __pyx_v_weighted_n_left;
  double __pyx_v_weighted_n_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_left;
  double *__pyx_v_label_count_right;
  double __pyx_v_entropy_left;
  double __pyx_v_entropy_right;
  double __pyx_v_total;
  double __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line364")'> 364:         """Evaluate the impurity in children nodes, i.e. the impurity of</pre>
<pre id='line364' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line365")'> 365:            samples[start:pos] + the impurity of samples[pos:end]."""</pre>
<pre id='line365' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line366")'> 366:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line366' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line367")'> 367:         cdef double weighted_n_left = self.weighted_n_left</pre>
<pre id='line367' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_left;
  __pyx_v_weighted_n_left = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line368")'> 368:         cdef double weighted_n_right = self.weighted_n_right</pre>
<pre id='line368' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_right;
  __pyx_v_weighted_n_right = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line369")'> 369: </pre>
<pre id='line369' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line370")'> 370:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line370' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line371")'> 371:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line371' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line372")'> 372:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line372' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line373")'> 373:         cdef double* label_count_left = self.label_count_left</pre>
<pre id='line373' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_left;
  __pyx_v_label_count_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line374")'> 374:         cdef double* label_count_right = self.label_count_right</pre>
<pre id='line374' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_right;
  __pyx_v_label_count_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line375")'> 375: </pre>
<pre id='line375' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line376")'> 376:         cdef double entropy_left = 0.0</pre>
<pre id='line376' class='code' style='background-color: #FFFFff'>  __pyx_v_entropy_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line377")'> 377:         cdef double entropy_right = 0.0</pre>
<pre id='line377' class='code' style='background-color: #FFFFff'>  __pyx_v_entropy_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line378")'> 378:         cdef double total = 0.0</pre>
<pre id='line378' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line379")'> 379:         cdef double tmp</pre>
<pre id='line379' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line380")'> 380:         cdef SIZE_t k</pre>
<pre id='line380' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line381")'> 381:         cdef SIZE_t c</pre>
<pre id='line381' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line382")'> 382:         cdef SIZE_t offset = 0</pre>
<pre id='line382' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line383")'> 383: </pre>
<pre id='line383' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line384")'> 384:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line384' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line385")'> 385:             entropy_left = 0.0</pre>
<pre id='line385' class='code' style='background-color: #FFFFff'>    __pyx_v_entropy_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line386")'> 386:             entropy_right = 0.0</pre>
<pre id='line386' class='code' style='background-color: #FFFFff'>    __pyx_v_entropy_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line387")'> 387: </pre>
<pre id='line387' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line388")'> 388:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line388' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_5; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line389")'> 389:                 tmp = label_count_left[offset + c]</pre>
<pre id='line389' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_left[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line390")'> 390:                 if tmp &gt; 0.0:</pre>
<pre id='line390' class='code' style='background-color: #FFFFff'>      __pyx_t_6 = ((__pyx_v_tmp &gt; 0.0) != 0);
      if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line391")'> 391:                     tmp /= weighted_n_left</pre>
<pre id='line391' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_tmp / __pyx_v_weighted_n_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line392")'> 392:                     entropy_left -= tmp * log(tmp)</pre>
<pre id='line392' class='code' style='background-color: #FFFFff'>        __pyx_v_entropy_left = (__pyx_v_entropy_left - (__pyx_v_tmp * __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_log(__pyx_v_tmp)));
        goto __pyx_L7;
      }
      __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line393")'> 393: </pre>
<pre id='line393' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line394")'> 394:                 tmp = label_count_right[offset + c]</pre>
<pre id='line394' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_right[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line395")'> 395:                 if tmp &gt; 0.0:</pre>
<pre id='line395' class='code' style='background-color: #FFFFff'>      __pyx_t_6 = ((__pyx_v_tmp &gt; 0.0) != 0);
      if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line396")'> 396:                     tmp /= weighted_n_right</pre>
<pre id='line396' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_tmp / __pyx_v_weighted_n_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line397")'> 397:                     entropy_right -= tmp * log(tmp)</pre>
<pre id='line397' class='code' style='background-color: #FFFFff'>        __pyx_v_entropy_right = (__pyx_v_entropy_right - (__pyx_v_tmp * __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_log(__pyx_v_tmp)));
        goto __pyx_L8;
      }
      __pyx_L8:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line398")'> 398: </pre>
<pre id='line398' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line399")'> 399:             total += weighted_n_left * entropy_left</pre>
<pre id='line399' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_weighted_n_left * __pyx_v_entropy_left));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line400")'> 400:             total += weighted_n_right * entropy_right</pre>
<pre id='line400' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_weighted_n_right * __pyx_v_entropy_right));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line401")'> 401:             offset += label_count_stride</pre>
<pre id='line401' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line402")'> 402: </pre>
<pre id='line402' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line403")'> 403:         return total / (weighted_n_node_samples * n_outputs)</pre>
<pre id='line403' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / (__pyx_v_weighted_n_node_samples * __pyx_v_n_outputs));
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line404")'> 404: </pre>
<pre id='line404' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line405")'> 405: </pre>
<pre id='line405' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line406")'> 406: cdef class Gini(ClassificationCriterion):</pre>
<pre id='line406' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_ClassificationCriterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line407")'> 407:     """Gini Index impurity criteria.</pre>
<pre id='line407' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line408")'> 408: </pre>
<pre id='line408' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line409")'> 409:     Let the target be a classification outcome taking values in 0, 1, ..., K-1.</pre>
<pre id='line409' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line410")'> 410:     If node m represents a region Rm with Nm observations, then let</pre>
<pre id='line410' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line411")'> 411: </pre>
<pre id='line411' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line412")'> 412:         pmk = 1/ Nm \sum_{x_i in Rm} I(yi = k)</pre>
<pre id='line412' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line413")'> 413: </pre>
<pre id='line413' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line414")'> 414:     be the proportion of class k observations in node m.</pre>
<pre id='line414' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line415")'> 415: </pre>
<pre id='line415' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line416")'> 416:     The Gini Index is then defined as:</pre>
<pre id='line416' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line417")'> 417: </pre>
<pre id='line417' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line418")'> 418:         index = \sum_{k=0}^{K-1} pmk (1 - pmk)</pre>
<pre id='line418' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line419")'> 419:               = 1 - \sum_{k=0}^{K-1} pmk ** 2</pre>
<pre id='line419' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line420")'> 420:     """</pre>
<pre id='line420' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line421")'> 421:     cdef double node_impurity(self) nogil:</pre>
<pre id='line421' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Gini_node_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini *__pyx_v_self) {
  double __pyx_v_weighted_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_total;
  double __pyx_v_gini;
  double __pyx_v_total;
  double __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line422")'> 422:         """Evaluate the impurity of the current node, i.e. the impurity of</pre>
<pre id='line422' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line423")'> 423:            samples[start:end]."""</pre>
<pre id='line423' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line424")'> 424:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line424' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line425")'> 425: </pre>
<pre id='line425' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line426")'> 426:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line426' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line427")'> 427:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line427' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line428")'> 428:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line428' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line429")'> 429:         cdef double* label_count_total = self.label_count_total</pre>
<pre id='line429' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_total;
  __pyx_v_label_count_total = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line430")'> 430: </pre>
<pre id='line430' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line431")'> 431:         cdef double gini = 0.0</pre>
<pre id='line431' class='code' style='background-color: #FFFFff'>  __pyx_v_gini = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line432")'> 432:         cdef double total = 0.0</pre>
<pre id='line432' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line433")'> 433:         cdef double tmp</pre>
<pre id='line433' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line434")'> 434:         cdef SIZE_t k</pre>
<pre id='line434' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line435")'> 435:         cdef SIZE_t c</pre>
<pre id='line435' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line436")'> 436:         cdef SIZE_t offset = 0</pre>
<pre id='line436' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line437")'> 437: </pre>
<pre id='line437' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line438")'> 438:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line438' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line439")'> 439:             gini = 0.0</pre>
<pre id='line439' class='code' style='background-color: #FFFFff'>    __pyx_v_gini = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line440")'> 440: </pre>
<pre id='line440' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line441")'> 441:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line441' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_5; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line442")'> 442:                 tmp = label_count_total[offset + c]</pre>
<pre id='line442' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_total[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line443")'> 443:                 gini += tmp * tmp</pre>
<pre id='line443' class='code' style='background-color: #FFFFff'>
      /* "pyMetaLearn/optimizers/metalearn_optimizer/correlation_tree/_tree.pyx":443
 *             for c from 0 &lt;= c &lt; n_classes[k]:
 *                 tmp = label_count_total[offset + c]
 *                 gini += tmp * tmp             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *             gini = 1.0 - gini / (weighted_n_node_samples *
 */
      __pyx_v_gini = (__pyx_v_gini + (__pyx_v_tmp * __pyx_v_tmp));
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line444")'> 444: </pre>
<pre id='line444' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line445")'> 445:             gini = 1.0 - gini / (weighted_n_node_samples *</pre>
<pre id='line445' class='code' style='background-color: #FFFFff'>    __pyx_v_gini = (1.0 - (__pyx_v_gini / (__pyx_v_weighted_n_node_samples * __pyx_v_weighted_n_node_samples)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line446")'> 446:                                  weighted_n_node_samples)</pre>
<pre id='line446' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line447")'> 447: </pre>
<pre id='line447' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line448")'> 448:             total += gini</pre>
<pre id='line448' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + __pyx_v_gini);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line449")'> 449:             offset += label_count_stride</pre>
<pre id='line449' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line450")'> 450: </pre>
<pre id='line450' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line451")'> 451:         return total / n_outputs</pre>
<pre id='line451' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line452")'> 452: </pre>
<pre id='line452' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line453")'> 453:     cdef double children_impurity(self) nogil:</pre>
<pre id='line453' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Gini_children_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Gini *__pyx_v_self) {
  double __pyx_v_weighted_n_node_samples;
  double __pyx_v_weighted_n_left;
  double __pyx_v_weighted_n_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_label_count_stride;
  double *__pyx_v_label_count_left;
  double *__pyx_v_label_count_right;
  double __pyx_v_gini_left;
  double __pyx_v_gini_right;
  double __pyx_v_total;
  double __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line454")'> 454:         """Evaluate the impurity in children nodes, i.e. the impurity of</pre>
<pre id='line454' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line455")'> 455:            samples[start:pos] + the impurity of samples[pos:end]."""</pre>
<pre id='line455' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line456")'> 456:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line456' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line457")'> 457:         cdef double weighted_n_left = self.weighted_n_left</pre>
<pre id='line457' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_left;
  __pyx_v_weighted_n_left = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line458")'> 458:         cdef double weighted_n_right = self.weighted_n_right</pre>
<pre id='line458' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_right;
  __pyx_v_weighted_n_right = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line459")'> 459: </pre>
<pre id='line459' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line460")'> 460:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line460' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line461")'> 461:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line461' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_classes;
  __pyx_v_n_classes = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line462")'> 462:         cdef SIZE_t label_count_stride = self.label_count_stride</pre>
<pre id='line462' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.label_count_stride;
  __pyx_v_label_count_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line463")'> 463:         cdef double* label_count_left = self.label_count_left</pre>
<pre id='line463' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_left;
  __pyx_v_label_count_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line464")'> 464:         cdef double* label_count_right = self.label_count_right</pre>
<pre id='line464' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.label_count_right;
  __pyx_v_label_count_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line465")'> 465: </pre>
<pre id='line465' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line466")'> 466:         cdef double gini_left = 0.0</pre>
<pre id='line466' class='code' style='background-color: #FFFFff'>  __pyx_v_gini_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line467")'> 467:         cdef double gini_right = 0.0</pre>
<pre id='line467' class='code' style='background-color: #FFFFff'>  __pyx_v_gini_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line468")'> 468:         cdef double total = 0.0</pre>
<pre id='line468' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line469")'> 469:         cdef double tmp</pre>
<pre id='line469' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line470")'> 470:         cdef SIZE_t k</pre>
<pre id='line470' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line471")'> 471:         cdef SIZE_t c</pre>
<pre id='line471' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line472")'> 472:         cdef SIZE_t offset = 0</pre>
<pre id='line472' class='code' style='background-color: #FFFFff'>  __pyx_v_offset = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line473")'> 473: </pre>
<pre id='line473' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line474")'> 474:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line474' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line475")'> 475:             gini_left = 0.0</pre>
<pre id='line475' class='code' style='background-color: #FFFFff'>    __pyx_v_gini_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line476")'> 476:             gini_right = 0.0</pre>
<pre id='line476' class='code' style='background-color: #FFFFff'>    __pyx_v_gini_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line477")'> 477: </pre>
<pre id='line477' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line478")'> 478:             for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line478' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_n_classes[__pyx_v_k]);
    for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_5; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line479")'> 479:                 tmp = label_count_left[offset + c]</pre>
<pre id='line479' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_left[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line480")'> 480:                 gini_left += tmp * tmp</pre>
<pre id='line480' class='code' style='background-color: #FFFFff'>      __pyx_v_gini_left = (__pyx_v_gini_left + (__pyx_v_tmp * __pyx_v_tmp));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line481")'> 481:                 tmp = label_count_right[offset + c]</pre>
<pre id='line481' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_label_count_right[(__pyx_v_offset + __pyx_v_c)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line482")'> 482:                 gini_right += tmp * tmp</pre>
<pre id='line482' class='code' style='background-color: #FFFFff'>
      /* "pyMetaLearn/optimizers/metalearn_optimizer/correlation_tree/_tree.pyx":482
 *                 gini_left += tmp * tmp
 *                 tmp = label_count_right[offset + c]
 *                 gini_right += tmp * tmp             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *             gini_left = 1.0 - gini_left / (weighted_n_left *
 */
      __pyx_v_gini_right = (__pyx_v_gini_right + (__pyx_v_tmp * __pyx_v_tmp));
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line483")'> 483: </pre>
<pre id='line483' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line484")'> 484:             gini_left = 1.0 - gini_left / (weighted_n_left *</pre>
<pre id='line484' class='code' style='background-color: #FFFFff'>
    /* "pyMetaLearn/optimizers/metalearn_optimizer/correlation_tree/_tree.pyx":484
 *                 gini_right += tmp * tmp
 * 
 *             gini_left = 1.0 - gini_left / (weighted_n_left *             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                                            weighted_n_left)
 *             gini_right = 1.0 - gini_right / (weighted_n_right *
 */
    __pyx_v_gini_left = (1.0 - (__pyx_v_gini_left / (__pyx_v_weighted_n_left * __pyx_v_weighted_n_left)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line485")'> 485:                                            weighted_n_left)</pre>
<pre id='line485' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line486")'> 486:             gini_right = 1.0 - gini_right / (weighted_n_right *</pre>
<pre id='line486' class='code' style='background-color: #FFFFff'>    __pyx_v_gini_right = (1.0 - (__pyx_v_gini_right / (__pyx_v_weighted_n_right * __pyx_v_weighted_n_right)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line487")'> 487:                                              weighted_n_right)</pre>
<pre id='line487' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line488")'> 488: </pre>
<pre id='line488' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line489")'> 489:             total += weighted_n_left * gini_left</pre>
<pre id='line489' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_weighted_n_left * __pyx_v_gini_left));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line490")'> 490:             total += weighted_n_right * gini_right</pre>
<pre id='line490' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_weighted_n_right * __pyx_v_gini_right));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line491")'> 491:             offset += label_count_stride</pre>
<pre id='line491' class='code' style='background-color: #FFFFff'>    __pyx_v_offset = (__pyx_v_offset + __pyx_v_label_count_stride);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line492")'> 492: </pre>
<pre id='line492' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line493")'> 493:         return total / (weighted_n_node_samples * n_outputs)</pre>
<pre id='line493' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / (__pyx_v_weighted_n_node_samples * __pyx_v_n_outputs));
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line494")'> 494: </pre>
<pre id='line494' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line495")'> 495: </pre>
<pre id='line495' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line496")'> 496: cdef class RegressionCriterion(Criterion):</pre>
<pre id='line496' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion __pyx_base;
  double *mean_left;
  double *mean_right;
  double *mean_total;
  double *sq_sum_left;
  double *sq_sum_right;
  double *sq_sum_total;
  double *var_left;
  double *var_right;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line497")'> 497:     """Abstract criterion for regression.</pre>
<pre id='line497' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line498")'> 498: </pre>
<pre id='line498' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line499")'> 499:     Computes variance of the target values left and right of the split point.</pre>
<pre id='line499' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line500")'> 500:     Computation is linear in `n_samples` by using ::</pre>
<pre id='line500' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line501")'> 501: </pre>
<pre id='line501' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line502")'> 502:         var = \sum_i^n (y_i - y_bar) ** 2</pre>
<pre id='line502' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line503")'> 503:             = (\sum_i^n y_i ** 2) - n_samples y_bar ** 2</pre>
<pre id='line503' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line504")'> 504:     """</pre>
<pre id='line504' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line505")'> 505:     cdef double* mean_left</pre>
<pre id='line505' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line506")'> 506:     cdef double* mean_right</pre>
<pre id='line506' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line507")'> 507:     cdef double* mean_total</pre>
<pre id='line507' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line508")'> 508:     cdef double* sq_sum_left</pre>
<pre id='line508' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line509")'> 509:     cdef double* sq_sum_right</pre>
<pre id='line509' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line510")'> 510:     cdef double* sq_sum_total</pre>
<pre id='line510' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line511")'> 511:     cdef double* var_left</pre>
<pre id='line511' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line512")'> 512:     cdef double* var_right</pre>
<pre id='line512' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line513")'> 513: </pre>
<pre id='line513' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF48' onclick='toggleDiv("line514")'> 514:     def __cinit__(self, SIZE_t n_outputs):</pre>
<pre id='line514' class='code' style='background-color: #FFFF48'>/* Python wrapper */
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_n_outputs,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_outputs)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__cinit__") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 1) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
    }
    __pyx_v_n_outputs = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_n_outputs == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 1, 1, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RegressionCriterion.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion___cinit__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self), __pyx_v_n_outputs);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion___cinit__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__", 0);
/* … */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RegressionCriterion.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line515")'> 515:         # Default values</pre>
<pre id='line515' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line516")'> 516:         self.y = NULL</pre>
<pre id='line516' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line517")'> 517:         self.y_stride = 0</pre>
<pre id='line517' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y_stride = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line518")'> 518:         self.sample_weight = NULL</pre>
<pre id='line518' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.sample_weight = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line519")'> 519: </pre>
<pre id='line519' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line520")'> 520:         self.samples = NULL</pre>
<pre id='line520' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.samples = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line521")'> 521:         self.start = 0</pre>
<pre id='line521' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.start = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line522")'> 522:         self.pos = 0</pre>
<pre id='line522' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.pos = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line523")'> 523:         self.end = 0</pre>
<pre id='line523' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.end = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line524")'> 524: </pre>
<pre id='line524' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line525")'> 525:         self.n_outputs = n_outputs</pre>
<pre id='line525' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_outputs = __pyx_v_n_outputs;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line526")'> 526:         self.n_node_samples = 0</pre>
<pre id='line526' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_node_samples = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line527")'> 527:         self.weighted_n_node_samples = 0.0</pre>
<pre id='line527' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line528")'> 528:         self.weighted_n_left = 0.0</pre>
<pre id='line528' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line529")'> 529:         self.weighted_n_right = 0.0</pre>
<pre id='line529' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_right = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line530")'> 530: </pre>
<pre id='line530' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line531")'> 531:         # Allocate accumulators</pre>
<pre id='line531' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line532")'> 532:         self.mean_left = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line532' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;mean_left = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line533")'> 533:         self.mean_right = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line533' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;mean_right = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line534")'> 534:         self.mean_total = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line534' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;mean_total = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line535")'> 535:         self.sq_sum_left = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line535' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;sq_sum_left = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line536")'> 536:         self.sq_sum_right = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line536' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;sq_sum_right = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line537")'> 537:         self.sq_sum_total = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line537' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;sq_sum_total = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line538")'> 538:         self.var_left = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line538' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;var_left = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line539")'> 539:         self.var_right = &lt;double*&gt; calloc(n_outputs, sizeof(double))</pre>
<pre id='line539' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;var_right = ((double *)calloc(__pyx_v_n_outputs, (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line540")'> 540: </pre>
<pre id='line540' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line541")'> 541:         # Check for allocation errors</pre>
<pre id='line541' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line542")'> 542:         if ((self.mean_left == NULL) or</pre>
<pre id='line542' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;mean_left == NULL) != 0);
  if (!__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line543")'> 543:             (self.mean_right == NULL) or</pre>
<pre id='line543' class='code' style='background-color: #FFFFff'>    __pyx_t_2 = ((__pyx_v_self-&gt;mean_right == NULL) != 0);
    if (!__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line544")'> 544:             (self.mean_total == NULL) or</pre>
<pre id='line544' class='code' style='background-color: #FFFFff'>      __pyx_t_3 = ((__pyx_v_self-&gt;mean_total == NULL) != 0);
      if (!__pyx_t_3) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line545")'> 545:             (self.sq_sum_left == NULL) or</pre>
<pre id='line545' class='code' style='background-color: #FFFFff'>        __pyx_t_4 = ((__pyx_v_self-&gt;sq_sum_left == NULL) != 0);
        if (!__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line546")'> 546:             (self.sq_sum_right == NULL) or</pre>
<pre id='line546' class='code' style='background-color: #FFFFff'>          __pyx_t_5 = ((__pyx_v_self-&gt;sq_sum_right == NULL) != 0);
          if (!__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line547")'> 547:             (self.sq_sum_total == NULL) or</pre>
<pre id='line547' class='code' style='background-color: #FFFFff'>            __pyx_t_6 = ((__pyx_v_self-&gt;sq_sum_total == NULL) != 0);
            if (!__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line548")'> 548:             (self.var_left == NULL) or</pre>
<pre id='line548' class='code' style='background-color: #FFFFff'>              __pyx_t_7 = ((__pyx_v_self-&gt;var_left == NULL) != 0);
              if (!__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line549")'> 549:             (self.var_right == NULL)):</pre>
<pre id='line549' class='code' style='background-color: #FFFFff'>                __pyx_t_8 = ((__pyx_v_self-&gt;var_right == NULL) != 0);
                __pyx_t_9 = __pyx_t_8;
              } else {
                __pyx_t_9 = __pyx_t_7;
              }
              __pyx_t_7 = __pyx_t_9;
            } else {
              __pyx_t_7 = __pyx_t_6;
            }
            __pyx_t_6 = __pyx_t_7;
          } else {
            __pyx_t_6 = __pyx_t_5;
          }
          __pyx_t_5 = __pyx_t_6;
        } else {
          __pyx_t_5 = __pyx_t_4;
        }
        __pyx_t_4 = __pyx_t_5;
      } else {
        __pyx_t_4 = __pyx_t_3;
      }
      __pyx_t_3 = __pyx_t_4;
    } else {
      __pyx_t_3 = __pyx_t_2;
    }
    __pyx_t_2 = __pyx_t_3;
  } else {
    __pyx_t_2 = __pyx_t_1;
  }
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line550")'> 550:             free(self.mean_left)</pre>
<pre id='line550' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;mean_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line551")'> 551:             free(self.mean_right)</pre>
<pre id='line551' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;mean_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line552")'> 552:             free(self.mean_total)</pre>
<pre id='line552' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;mean_total);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line553")'> 553:             free(self.sq_sum_left)</pre>
<pre id='line553' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;sq_sum_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line554")'> 554:             free(self.sq_sum_right)</pre>
<pre id='line554' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;sq_sum_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line555")'> 555:             free(self.sq_sum_total)</pre>
<pre id='line555' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;sq_sum_total);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line556")'> 556:             free(self.var_left)</pre>
<pre id='line556' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;var_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line557")'> 557:             free(self.var_right)</pre>
<pre id='line557' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;var_right);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line558")'> 558:             raise MemoryError()</pre>
<pre id='line558' class='code' style='background-color: #FFFFaa'>    <span class='py_c_api'>PyErr_NoMemory</span>(); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 558; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line559")'> 559: </pre>
<pre id='line559' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line560")'> 560:     def __dealloc__(self):</pre>
<pre id='line560' class='code' style='background-color: #FFFFff'>/* Python wrapper */
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_3__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_3__dealloc__(PyObject *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__ (wrapper)", 0);
  __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_2__dealloc__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}

static void __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_2__dealloc__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__", 0);
/* … */
  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line561")'> 561:         """Destructor."""</pre>
<pre id='line561' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line562")'> 562:         free(self.mean_left)</pre>
<pre id='line562' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;mean_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line563")'> 563:         free(self.mean_right)</pre>
<pre id='line563' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;mean_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line564")'> 564:         free(self.mean_total)</pre>
<pre id='line564' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;mean_total);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line565")'> 565:         free(self.sq_sum_left)</pre>
<pre id='line565' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;sq_sum_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line566")'> 566:         free(self.sq_sum_right)</pre>
<pre id='line566' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;sq_sum_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line567")'> 567:         free(self.sq_sum_total)</pre>
<pre id='line567' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;sq_sum_total);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line568")'> 568:         free(self.var_left)</pre>
<pre id='line568' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;var_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line569")'> 569:         free(self.var_right)</pre>
<pre id='line569' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;var_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line570")'> 570: </pre>
<pre id='line570' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line571")'> 571:     def __reduce__(self):</pre>
<pre id='line571' class='code' style='background-color: #FFFFaa'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_4__reduce__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_4__reduce__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RegressionCriterion.__reduce__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF4d' onclick='toggleDiv("line572")'> 572:         return (RegressionCriterion, (self.n_outputs,), self.__getstate__())</pre>
<pre id='line572' class='code' style='background-color: #FFFF4d'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.n_outputs);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 572; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 572; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_getstate);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 572; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_empty_tuple, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 572; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 572; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion)));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 2, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line573")'> 573: </pre>
<pre id='line573' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line574")'> 574:     def __getstate__(self):</pre>
<pre id='line574' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_6__getstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_6__getstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RegressionCriterion.__getstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line575")'> 575:         return {}</pre>
<pre id='line575' class='code' style='background-color: #FFFF9f'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 575; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line576")'> 576: </pre>
<pre id='line576' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line577")'> 577:     def __setstate__(self, d):</pre>
<pre id='line577' class='code' style='background-color: #FFFFe7'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_8__setstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self), ((PyObject *)__pyx_v_d));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_8__setstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_d) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__", 0);

  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line578")'> 578:         pass</pre>
<pre id='line578' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line579")'> 579: </pre>
<pre id='line579' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line580")'> 580:     cdef void init(self, DOUBLE_t* y,</pre>
<pre id='line580' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_init(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_y_stride, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end) {
  double __pyx_v_weighted_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_mean_left;
  double *__pyx_v_mean_right;
  double *__pyx_v_mean_total;
  double *__pyx_v_sq_sum_left;
  double *__pyx_v_sq_sum_right;
  double *__pyx_v_sq_sum_total;
  double *__pyx_v_var_left;
  double *__pyx_v_var_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_y_ik;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_w;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line581")'> 581:                          SIZE_t y_stride,</pre>
<pre id='line581' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line582")'> 582:                          DOUBLE_t* sample_weight,</pre>
<pre id='line582' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line583")'> 583:                          SIZE_t* samples,</pre>
<pre id='line583' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line584")'> 584:                          SIZE_t start,</pre>
<pre id='line584' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line585")'> 585:                          SIZE_t end) nogil:</pre>
<pre id='line585' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line586")'> 586:         """Initialize the criterion at node samples[start:end] and</pre>
<pre id='line586' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line587")'> 587:            children samples[start:start] and samples[start:end]."""</pre>
<pre id='line587' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line588")'> 588:         # Initialize fields</pre>
<pre id='line588' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line589")'> 589:         self.y = y</pre>
<pre id='line589' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y = __pyx_v_y;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line590")'> 590:         self.y_stride = y_stride</pre>
<pre id='line590' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.y_stride = __pyx_v_y_stride;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line591")'> 591:         self.sample_weight = sample_weight</pre>
<pre id='line591' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.sample_weight = __pyx_v_sample_weight;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line592")'> 592:         self.samples = samples</pre>
<pre id='line592' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.samples = __pyx_v_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line593")'> 593:         self.start = start</pre>
<pre id='line593' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line594")'> 594:         self.end = end</pre>
<pre id='line594' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line595")'> 595:         self.n_node_samples = end - start</pre>
<pre id='line595' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.n_node_samples = (__pyx_v_end - __pyx_v_start);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line596")'> 596:         cdef double weighted_n_node_samples = 0.</pre>
<pre id='line596' class='code' style='background-color: #FFFFff'>  __pyx_v_weighted_n_node_samples = 0.;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line597")'> 597: </pre>
<pre id='line597' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line598")'> 598:         # Initialize accumulators</pre>
<pre id='line598' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line599")'> 599:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line599' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line600")'> 600:         cdef double* mean_left = self.mean_left</pre>
<pre id='line600' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;mean_left;
  __pyx_v_mean_left = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line601")'> 601:         cdef double* mean_right = self.mean_right</pre>
<pre id='line601' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;mean_right;
  __pyx_v_mean_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line602")'> 602:         cdef double* mean_total = self.mean_total</pre>
<pre id='line602' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;mean_total;
  __pyx_v_mean_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line603")'> 603:         cdef double* sq_sum_left = self.sq_sum_left</pre>
<pre id='line603' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;sq_sum_left;
  __pyx_v_sq_sum_left = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line604")'> 604:         cdef double* sq_sum_right = self.sq_sum_right</pre>
<pre id='line604' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;sq_sum_right;
  __pyx_v_sq_sum_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line605")'> 605:         cdef double* sq_sum_total = self.sq_sum_total</pre>
<pre id='line605' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;sq_sum_total;
  __pyx_v_sq_sum_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line606")'> 606:         cdef double* var_left = self.var_left</pre>
<pre id='line606' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;var_left;
  __pyx_v_var_left = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line607")'> 607:         cdef double* var_right = self.var_right</pre>
<pre id='line607' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;var_right;
  __pyx_v_var_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line608")'> 608: </pre>
<pre id='line608' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line609")'> 609:         cdef SIZE_t i = 0</pre>
<pre id='line609' class='code' style='background-color: #FFFFff'>  __pyx_v_i = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line610")'> 610:         cdef SIZE_t p = 0</pre>
<pre id='line610' class='code' style='background-color: #FFFFff'>  __pyx_v_p = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line611")'> 611:         cdef SIZE_t k = 0</pre>
<pre id='line611' class='code' style='background-color: #FFFFff'>  __pyx_v_k = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line612")'> 612:         cdef DOUBLE_t y_ik = 0.0</pre>
<pre id='line612' class='code' style='background-color: #FFFFff'>  __pyx_v_y_ik = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line613")'> 613:         cdef DOUBLE_t w = 1.0</pre>
<pre id='line613' class='code' style='background-color: #FFFFff'>  __pyx_v_w = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line614")'> 614: </pre>
<pre id='line614' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line615")'> 615:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line615' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line616")'> 616:             mean_left[k] = 0.0</pre>
<pre id='line616' class='code' style='background-color: #FFFFff'>    (__pyx_v_mean_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line617")'> 617:             mean_right[k] = 0.0</pre>
<pre id='line617' class='code' style='background-color: #FFFFff'>    (__pyx_v_mean_right[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line618")'> 618:             mean_total[k] = 0.0</pre>
<pre id='line618' class='code' style='background-color: #FFFFff'>    (__pyx_v_mean_total[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line619")'> 619:             sq_sum_right[k] = 0.0</pre>
<pre id='line619' class='code' style='background-color: #FFFFff'>    (__pyx_v_sq_sum_right[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line620")'> 620:             sq_sum_left[k] = 0.0</pre>
<pre id='line620' class='code' style='background-color: #FFFFff'>    (__pyx_v_sq_sum_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line621")'> 621:             sq_sum_total[k] = 0.0</pre>
<pre id='line621' class='code' style='background-color: #FFFFff'>    (__pyx_v_sq_sum_total[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line622")'> 622:             var_left[k] = 0.0</pre>
<pre id='line622' class='code' style='background-color: #FFFFff'>    (__pyx_v_var_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line623")'> 623:             var_right[k] = 0.0</pre>
<pre id='line623' class='code' style='background-color: #FFFFff'>    (__pyx_v_var_right[__pyx_v_k]) = 0.0;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line624")'> 624: </pre>
<pre id='line624' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line625")'> 625:         for p from start &lt;= p &lt; end:</pre>
<pre id='line625' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_end;
  for (__pyx_v_p = __pyx_v_start; __pyx_v_p &lt; __pyx_t_1; __pyx_v_p++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line626")'> 626:             i = samples[p]</pre>
<pre id='line626' class='code' style='background-color: #FFFFff'>    __pyx_v_i = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line627")'> 627: </pre>
<pre id='line627' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line628")'> 628:             if sample_weight != NULL:</pre>
<pre id='line628' class='code' style='background-color: #FFFFff'>    __pyx_t_3 = ((__pyx_v_sample_weight != NULL) != 0);
    if (__pyx_t_3) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line629")'> 629:                 w = sample_weight[i]</pre>
<pre id='line629' class='code' style='background-color: #FFFFff'>      __pyx_v_w = (__pyx_v_sample_weight[__pyx_v_i]);
      goto __pyx_L7;
    }
    __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line630")'> 630: </pre>
<pre id='line630' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line631")'> 631:             for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line631' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = __pyx_v_n_outputs;
    for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_4; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line632")'> 632:                 y_ik = y[i * y_stride + k]</pre>
<pre id='line632' class='code' style='background-color: #FFFFff'>      __pyx_v_y_ik = (__pyx_v_y[((__pyx_v_i * __pyx_v_y_stride) + __pyx_v_k)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line633")'> 633:                 sq_sum_total[k] += w * y_ik * y_ik</pre>
<pre id='line633' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = __pyx_v_k;
      (__pyx_v_sq_sum_total[__pyx_t_5]) = ((__pyx_v_sq_sum_total[__pyx_t_5]) + ((__pyx_v_w * __pyx_v_y_ik) * __pyx_v_y_ik));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line634")'> 634:                 mean_total[k] += w * y_ik</pre>
<pre id='line634' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = __pyx_v_k;
      (__pyx_v_mean_total[__pyx_t_5]) = ((__pyx_v_mean_total[__pyx_t_5]) + (__pyx_v_w * __pyx_v_y_ik));
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line635")'> 635: </pre>
<pre id='line635' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line636")'> 636:             weighted_n_node_samples += w</pre>
<pre id='line636' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_node_samples = (__pyx_v_weighted_n_node_samples + __pyx_v_w);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line637")'> 637: </pre>
<pre id='line637' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line638")'> 638:         self.weighted_n_node_samples = weighted_n_node_samples</pre>
<pre id='line638' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples = __pyx_v_weighted_n_node_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line639")'> 639: </pre>
<pre id='line639' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line640")'> 640:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line640' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line641")'> 641:             mean_total[k] /= weighted_n_node_samples</pre>
<pre id='line641' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = __pyx_v_k;
    (__pyx_v_mean_total[__pyx_t_4]) = ((__pyx_v_mean_total[__pyx_t_4]) / __pyx_v_weighted_n_node_samples);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line642")'> 642: </pre>
<pre id='line642' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line643")'> 643:         # Reset to pos=start</pre>
<pre id='line643' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line644")'> 644:         self.reset()</pre>
<pre id='line644' class='code' style='background-color: #FFFFff'>  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *)__pyx_v_self-&gt;__pyx_base.__pyx_vtab)-&gt;__pyx_base.reset(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_self));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line645")'> 645: </pre>
<pre id='line645' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line646")'> 646:     cdef void reset(self) nogil:</pre>
<pre id='line646' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_reset(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_mean_left;
  double *__pyx_v_mean_right;
  double *__pyx_v_mean_total;
  double *__pyx_v_sq_sum_left;
  double *__pyx_v_sq_sum_right;
  double *__pyx_v_sq_sum_total;
  double *__pyx_v_var_left;
  double *__pyx_v_var_right;
  double __pyx_v_weighted_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line647")'> 647:         """Reset the criterion at pos=start."""</pre>
<pre id='line647' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line648")'> 648:         self.pos = self.start</pre>
<pre id='line648' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.start;
  __pyx_v_self-&gt;__pyx_base.pos = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line649")'> 649: </pre>
<pre id='line649' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line650")'> 650:         self.weighted_n_left = 0.0</pre>
<pre id='line650' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line651")'> 651:         self.weighted_n_right = self.weighted_n_node_samples</pre>
<pre id='line651' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples;
  __pyx_v_self-&gt;__pyx_base.weighted_n_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line652")'> 652: </pre>
<pre id='line652' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line653")'> 653:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line653' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line654")'> 654:         cdef double* mean_left = self.mean_left</pre>
<pre id='line654' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;mean_left;
  __pyx_v_mean_left = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line655")'> 655:         cdef double* mean_right = self.mean_right</pre>
<pre id='line655' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;mean_right;
  __pyx_v_mean_right = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line656")'> 656:         cdef double* mean_total = self.mean_total</pre>
<pre id='line656' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;mean_total;
  __pyx_v_mean_total = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line657")'> 657:         cdef double* sq_sum_left = self.sq_sum_left</pre>
<pre id='line657' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;sq_sum_left;
  __pyx_v_sq_sum_left = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line658")'> 658:         cdef double* sq_sum_right = self.sq_sum_right</pre>
<pre id='line658' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;sq_sum_right;
  __pyx_v_sq_sum_right = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line659")'> 659:         cdef double* sq_sum_total = self.sq_sum_total</pre>
<pre id='line659' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;sq_sum_total;
  __pyx_v_sq_sum_total = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line660")'> 660:         cdef double* var_left = self.var_left</pre>
<pre id='line660' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;var_left;
  __pyx_v_var_left = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line661")'> 661:         cdef double* var_right = self.var_right</pre>
<pre id='line661' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;var_right;
  __pyx_v_var_right = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line662")'> 662:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line662' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line663")'> 663: </pre>
<pre id='line663' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line664")'> 664:         cdef SIZE_t k = 0</pre>
<pre id='line664' class='code' style='background-color: #FFFFff'>  __pyx_v_k = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line665")'> 665: </pre>
<pre id='line665' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line666")'> 666:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line666' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line667")'> 667:             mean_right[k] = mean_total[k]</pre>
<pre id='line667' class='code' style='background-color: #FFFFff'>    (__pyx_v_mean_right[__pyx_v_k]) = (__pyx_v_mean_total[__pyx_v_k]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line668")'> 668:             mean_left[k] = 0.0</pre>
<pre id='line668' class='code' style='background-color: #FFFFff'>    (__pyx_v_mean_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line669")'> 669:             sq_sum_right[k] = sq_sum_total[k]</pre>
<pre id='line669' class='code' style='background-color: #FFFFff'>    (__pyx_v_sq_sum_right[__pyx_v_k]) = (__pyx_v_sq_sum_total[__pyx_v_k]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line670")'> 670:             sq_sum_left[k] = 0.0</pre>
<pre id='line670' class='code' style='background-color: #FFFFff'>    (__pyx_v_sq_sum_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line671")'> 671:             var_left[k] = 0.0</pre>
<pre id='line671' class='code' style='background-color: #FFFFff'>
    /* "pyMetaLearn/optimizers/metalearn_optimizer/correlation_tree/_tree.pyx":671
 *             sq_sum_right[k] = sq_sum_total[k]
 *             sq_sum_left[k] = 0.0
 *             var_left[k] = 0.0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             var_right[k] = (sq_sum_right[k] -
 *                             weighted_n_node_samples * (mean_right[k] *
 */
    (__pyx_v_var_left[__pyx_v_k]) = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line672")'> 672:             var_right[k] = (sq_sum_right[k] -</pre>
<pre id='line672' class='code' style='background-color: #FFFFff'>    (__pyx_v_var_right[__pyx_v_k]) = ((__pyx_v_sq_sum_right[__pyx_v_k]) - (__pyx_v_weighted_n_node_samples * ((__pyx_v_mean_right[__pyx_v_k]) * (__pyx_v_mean_right[__pyx_v_k]))));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line673")'> 673:                             weighted_n_node_samples * (mean_right[k] *</pre>
<pre id='line673' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line674")'> 674:                                                        mean_right[k]))</pre>
<pre id='line674' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line675")'> 675: </pre>
<pre id='line675' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line676")'> 676:     cdef void update(self, SIZE_t new_pos) nogil:</pre>
<pre id='line676' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_update(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_new_pos) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_y_stride;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_mean_left;
  double *__pyx_v_mean_right;
  double *__pyx_v_sq_sum_left;
  double *__pyx_v_sq_sum_right;
  double *__pyx_v_var_left;
  double *__pyx_v_var_right;
  double __pyx_v_weighted_n_left;
  double __pyx_v_weighted_n_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_w;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_y_ik;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_w_y_ik;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line677")'> 677:         """Update the collected statistics by moving samples[pos:new_pos] from</pre>
<pre id='line677' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line678")'> 678:            the right child to the left child."""</pre>
<pre id='line678' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line679")'> 679:         cdef DOUBLE_t* y = self.y</pre>
<pre id='line679' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.y;
  __pyx_v_y = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line680")'> 680:         cdef SIZE_t y_stride = self.y_stride</pre>
<pre id='line680' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.y_stride;
  __pyx_v_y_stride = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line681")'> 681:         cdef DOUBLE_t* sample_weight = self.sample_weight</pre>
<pre id='line681' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.sample_weight;
  __pyx_v_sample_weight = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line682")'> 682: </pre>
<pre id='line682' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line683")'> 683:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line683' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.samples;
  __pyx_v_samples = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line684")'> 684:         cdef SIZE_t pos = self.pos</pre>
<pre id='line684' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.pos;
  __pyx_v_pos = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line685")'> 685: </pre>
<pre id='line685' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line686")'> 686:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line686' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line687")'> 687:         cdef double* mean_left = self.mean_left</pre>
<pre id='line687' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;mean_left;
  __pyx_v_mean_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line688")'> 688:         cdef double* mean_right = self.mean_right</pre>
<pre id='line688' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;mean_right;
  __pyx_v_mean_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line689")'> 689:         cdef double* sq_sum_left = self.sq_sum_left</pre>
<pre id='line689' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;sq_sum_left;
  __pyx_v_sq_sum_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line690")'> 690:         cdef double* sq_sum_right = self.sq_sum_right</pre>
<pre id='line690' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;sq_sum_right;
  __pyx_v_sq_sum_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line691")'> 691:         cdef double* var_left = self.var_left</pre>
<pre id='line691' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;var_left;
  __pyx_v_var_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line692")'> 692:         cdef double* var_right = self.var_right</pre>
<pre id='line692' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;var_right;
  __pyx_v_var_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line693")'> 693: </pre>
<pre id='line693' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line694")'> 694:         cdef double weighted_n_left = self.weighted_n_left</pre>
<pre id='line694' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;__pyx_base.weighted_n_left;
  __pyx_v_weighted_n_left = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line695")'> 695:         cdef double weighted_n_right = self.weighted_n_right</pre>
<pre id='line695' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;__pyx_base.weighted_n_right;
  __pyx_v_weighted_n_right = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line696")'> 696: </pre>
<pre id='line696' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line697")'> 697:         cdef SIZE_t i</pre>
<pre id='line697' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line698")'> 698:         cdef SIZE_t p</pre>
<pre id='line698' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line699")'> 699:         cdef SIZE_t k</pre>
<pre id='line699' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line700")'> 700:         cdef DOUBLE_t w = 1.0</pre>
<pre id='line700' class='code' style='background-color: #FFFFff'>  __pyx_v_w = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line701")'> 701:         cdef DOUBLE_t y_ik, w_y_ik</pre>
<pre id='line701' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line702")'> 702: </pre>
<pre id='line702' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line703")'> 703:         # Note: We assume start &lt;= pos &lt; new_pos &lt;= end</pre>
<pre id='line703' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line704")'> 704: </pre>
<pre id='line704' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line705")'> 705:         for p from pos &lt;= p &lt; new_pos:</pre>
<pre id='line705' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_new_pos;
  for (__pyx_v_p = __pyx_v_pos; __pyx_v_p &lt; __pyx_t_2; __pyx_v_p++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line706")'> 706:             i = samples[p]</pre>
<pre id='line706' class='code' style='background-color: #FFFFff'>    __pyx_v_i = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line707")'> 707: </pre>
<pre id='line707' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line708")'> 708:             if sample_weight != NULL:</pre>
<pre id='line708' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = ((__pyx_v_sample_weight != NULL) != 0);
    if (__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line709")'> 709:                 w  = sample_weight[i]</pre>
<pre id='line709' class='code' style='background-color: #FFFFff'>      __pyx_v_w = (__pyx_v_sample_weight[__pyx_v_i]);
      goto __pyx_L5;
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line710")'> 710: </pre>
<pre id='line710' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line711")'> 711:             for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line711' class='code' style='background-color: #FFFFff'>    __pyx_t_7 = __pyx_v_n_outputs;
    for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_7; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line712")'> 712:                 y_ik = y[i * y_stride + k]</pre>
<pre id='line712' class='code' style='background-color: #FFFFff'>      __pyx_v_y_ik = (__pyx_v_y[((__pyx_v_i * __pyx_v_y_stride) + __pyx_v_k)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line713")'> 713:                 w_y_ik = w * y_ik</pre>
<pre id='line713' class='code' style='background-color: #FFFFff'>      __pyx_v_w_y_ik = (__pyx_v_w * __pyx_v_y_ik);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line714")'> 714: </pre>
<pre id='line714' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line715")'> 715:                 sq_sum_left[k] += w_y_ik * y_ik</pre>
<pre id='line715' class='code' style='background-color: #FFFFff'>      __pyx_t_8 = __pyx_v_k;
      (__pyx_v_sq_sum_left[__pyx_t_8]) = ((__pyx_v_sq_sum_left[__pyx_t_8]) + (__pyx_v_w_y_ik * __pyx_v_y_ik));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line716")'> 716:                 sq_sum_right[k] -= w_y_ik * y_ik</pre>
<pre id='line716' class='code' style='background-color: #FFFFff'>      __pyx_t_8 = __pyx_v_k;
      (__pyx_v_sq_sum_right[__pyx_t_8]) = ((__pyx_v_sq_sum_right[__pyx_t_8]) - (__pyx_v_w_y_ik * __pyx_v_y_ik));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line717")'> 717: </pre>
<pre id='line717' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line718")'> 718:                 mean_left[k] = ((weighted_n_left * mean_left[k] + w_y_ik) /</pre>
<pre id='line718' class='code' style='background-color: #FFFFff'>      (__pyx_v_mean_left[__pyx_v_k]) = (((__pyx_v_weighted_n_left * (__pyx_v_mean_left[__pyx_v_k])) + __pyx_v_w_y_ik) / (__pyx_v_weighted_n_left + __pyx_v_w));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line719")'> 719:                                 (weighted_n_left + w))</pre>
<pre id='line719' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line720")'> 720:                 mean_right[k] = ((weighted_n_right * mean_right[k] - w_y_ik) /</pre>
<pre id='line720' class='code' style='background-color: #FFFFff'>      (__pyx_v_mean_right[__pyx_v_k]) = (((__pyx_v_weighted_n_right * (__pyx_v_mean_right[__pyx_v_k])) - __pyx_v_w_y_ik) / (__pyx_v_weighted_n_right - __pyx_v_w));
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line721")'> 721:                                  (weighted_n_right - w))</pre>
<pre id='line721' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line722")'> 722: </pre>
<pre id='line722' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line723")'> 723:             weighted_n_left += w</pre>
<pre id='line723' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_left = (__pyx_v_weighted_n_left + __pyx_v_w);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line724")'> 724:             weighted_n_right -= w</pre>
<pre id='line724' class='code' style='background-color: #FFFFff'>    __pyx_v_weighted_n_right = (__pyx_v_weighted_n_right - __pyx_v_w);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line725")'> 725: </pre>
<pre id='line725' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line726")'> 726:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line726' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_2; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line727")'> 727:             var_left[k] = (sq_sum_left[k] -</pre>
<pre id='line727' class='code' style='background-color: #FFFFff'>    (__pyx_v_var_left[__pyx_v_k]) = ((__pyx_v_sq_sum_left[__pyx_v_k]) - (__pyx_v_weighted_n_left * ((__pyx_v_mean_left[__pyx_v_k]) * (__pyx_v_mean_left[__pyx_v_k]))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line728")'> 728:                            weighted_n_left * (mean_left[k] * mean_left[k]))</pre>
<pre id='line728' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line729")'> 729:             var_right[k] = (sq_sum_right[k] -</pre>
<pre id='line729' class='code' style='background-color: #FFFFff'>    (__pyx_v_var_right[__pyx_v_k]) = ((__pyx_v_sq_sum_right[__pyx_v_k]) - (__pyx_v_weighted_n_right * ((__pyx_v_mean_right[__pyx_v_k]) * (__pyx_v_mean_right[__pyx_v_k]))));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line730")'> 730:                             weighted_n_right * (mean_right[k] * mean_right[k]))</pre>
<pre id='line730' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line731")'> 731: </pre>
<pre id='line731' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line732")'> 732:         self.weighted_n_left = weighted_n_left</pre>
<pre id='line732' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_left = __pyx_v_weighted_n_left;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line733")'> 733:         self.weighted_n_right = weighted_n_right</pre>
<pre id='line733' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.weighted_n_right = __pyx_v_weighted_n_right;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line734")'> 734: </pre>
<pre id='line734' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line735")'> 735:         self.pos = new_pos</pre>
<pre id='line735' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;__pyx_base.pos = __pyx_v_new_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line736")'> 736: </pre>
<pre id='line736' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line737")'> 737:     cdef double node_impurity(self) nogil:</pre>
<pre id='line737' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_node_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line738")'> 738:         pass</pre>
<pre id='line738' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line739")'> 739: </pre>
<pre id='line739' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line740")'> 740:     cdef double children_impurity(self) nogil:</pre>
<pre id='line740' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_children_impurity(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self) {
  double __pyx_r;

  /* function exit code */
  __pyx_r = 0;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line741")'> 741:         pass</pre>
<pre id='line741' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line742")'> 742: </pre>
<pre id='line742' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line743")'> 743:     cdef void node_value(self, double* dest) nogil:</pre>
<pre id='line743' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_19RegressionCriterion_node_value(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion *__pyx_v_self, double *__pyx_v_dest) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_mean_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
/* … */
  /* function exit code */
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line744")'> 744:         """Compute the node value of samples[start:end] into dest."""</pre>
<pre id='line744' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line745")'> 745:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line745' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line746")'> 746:         cdef double* mean_total = self.mean_total</pre>
<pre id='line746' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;mean_total;
  __pyx_v_mean_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line747")'> 747:         cdef SIZE_t k</pre>
<pre id='line747' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line748")'> 748: </pre>
<pre id='line748' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line749")'> 749:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line749' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line750")'> 750:             dest[k] = mean_total[k]</pre>
<pre id='line750' class='code' style='background-color: #FFFFff'>    (__pyx_v_dest[__pyx_v_k]) = (__pyx_v_mean_total[__pyx_v_k]);
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line751")'> 751: </pre>
<pre id='line751' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line752")'> 752: cdef class MSE(RegressionCriterion):</pre>
<pre id='line752' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line753")'> 753:     """Mean squared error impurity criterion.</pre>
<pre id='line753' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line754")'> 754: </pre>
<pre id='line754' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line755")'> 755:         MSE = var_left + var_right</pre>
<pre id='line755' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line756")'> 756:     """</pre>
<pre id='line756' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line757")'> 757:     cdef double node_impurity(self) nogil:</pre>
<pre id='line757' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_3MSE_node_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_sq_sum_total;
  double *__pyx_v_mean_total;
  double __pyx_v_weighted_n_node_samples;
  double __pyx_v_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line758")'> 758:         """Evaluate the impurity of the current node, i.e. the impurity of</pre>
<pre id='line758' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line759")'> 759:            samples[start:end]."""</pre>
<pre id='line759' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line760")'> 760:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line760' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line761")'> 761:         cdef double* sq_sum_total = self.sq_sum_total</pre>
<pre id='line761' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.sq_sum_total;
  __pyx_v_sq_sum_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line762")'> 762:         cdef double* mean_total = self.mean_total</pre>
<pre id='line762' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.mean_total;
  __pyx_v_mean_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line763")'> 763:         cdef double weighted_n_node_samples = self.weighted_n_node_samples</pre>
<pre id='line763' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.__pyx_base.weighted_n_node_samples;
  __pyx_v_weighted_n_node_samples = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line764")'> 764:         cdef double total = 0.0</pre>
<pre id='line764' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line765")'> 765:         cdef SIZE_t k</pre>
<pre id='line765' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line766")'> 766: </pre>
<pre id='line766' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line767")'> 767:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line767' class='code' style='background-color: #FFFFff'>
  /* "pyMetaLearn/optimizers/metalearn_optimizer/correlation_tree/_tree.pyx":767
 *         cdef SIZE_t k
 * 
 *         for k from 0 &lt;= k &lt; n_outputs:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             total += (sq_sum_total[k] -
 *                       weighted_n_node_samples * (mean_total[k] *
 */
  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line768")'> 768:             total += (sq_sum_total[k] -</pre>
<pre id='line768' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + ((__pyx_v_sq_sum_total[__pyx_v_k]) - (__pyx_v_weighted_n_node_samples * ((__pyx_v_mean_total[__pyx_v_k]) * (__pyx_v_mean_total[__pyx_v_k])))));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line769")'> 769:                       weighted_n_node_samples * (mean_total[k] *</pre>
<pre id='line769' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line770")'> 770:                                                  mean_total[k]))</pre>
<pre id='line770' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line771")'> 771: </pre>
<pre id='line771' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line772")'> 772:         return total / n_outputs</pre>
<pre id='line772' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line773")'> 773: </pre>
<pre id='line773' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line774")'> 774:     cdef double children_impurity(self) nogil:</pre>
<pre id='line774' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_3MSE_children_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_MSE *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_var_left;
  double *__pyx_v_var_right;
  double __pyx_v_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line775")'> 775:         """Evaluate the impurity in children nodes, i.e. the impurity of</pre>
<pre id='line775' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line776")'> 776:            samples[start:pos] + the impurity of samples[pos:end]."""</pre>
<pre id='line776' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line777")'> 777:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line777' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line778")'> 778:         cdef double* var_left = self.var_left</pre>
<pre id='line778' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.var_left;
  __pyx_v_var_left = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line779")'> 779:         cdef double* var_right = self.var_right</pre>
<pre id='line779' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.var_right;
  __pyx_v_var_right = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line780")'> 780:         cdef double total = 0.0</pre>
<pre id='line780' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 0.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line781")'> 781:         cdef SIZE_t k</pre>
<pre id='line781' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line782")'> 782: </pre>
<pre id='line782' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line783")'> 783:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line783' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_1; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line784")'> 784:             total += var_left[k]</pre>
<pre id='line784' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_var_left[__pyx_v_k]));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line785")'> 785:             total += var_right[k]</pre>
<pre id='line785' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total + (__pyx_v_var_right[__pyx_v_k]));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line786")'> 786: </pre>
<pre id='line786' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line787")'> 787:         return total / n_outputs</pre>
<pre id='line787' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line788")'> 788: </pre>
<pre id='line788' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line789")'> 789: cdef inline double local_tau(DOUBLE_t* X,  DOUBLE_t* Y, SIZE_t n_samples) nogil:</pre>
<pre id='line789' class='code' style='background-color: #FFFFff'>static CYTHON_INLINE double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_local_tau(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_X, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_Y, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_samples) {
  int __pyx_v_P;
  int __pyx_v_Q;
  int __pyx_v_Tx;
  int __pyx_v_Ty;
  CYTHON_UNUSED int __pyx_v_n;
  int __pyx_v_i;
  int __pyx_v_j;
  double __pyx_v_x0;
  double __pyx_v_y0;
  double __pyx_v_x1;
  double __pyx_v_y1;
  double __pyx_v_q;
  double __pyx_v_tau_a;
  CYTHON_UNUSED double __pyx_v_tau_b;
  double __pyx_v_part1;
  double __pyx_v_part2;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line790")'> 790: </pre>
<pre id='line790' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line791")'> 791:     """Compute Kendall's tau between two vector X and Y</pre>
<pre id='line791' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line792")'> 792: </pre>
<pre id='line792' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line793")'> 793:     Parameters</pre>
<pre id='line793' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line794")'> 794:     ----------</pre>
<pre id='line794' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line795")'> 795:     X : 1D array-like container with dtype int</pre>
<pre id='line795' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line796")'> 796:     Y : 1D array-like container dtype int</pre>
<pre id='line796' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line797")'> 797: </pre>
<pre id='line797' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line798")'> 798:     The data in X and Y is assumed to be categorical with</pre>
<pre id='line798' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line799")'> 799:     ordinal scale.</pre>
<pre id='line799' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line800")'> 800: </pre>
<pre id='line800' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line801")'> 801: </pre>
<pre id='line801' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line802")'> 802:     Returns</pre>
<pre id='line802' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line803")'> 803:     -------</pre>
<pre id='line803' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line804")'> 804:     tau_a : float</pre>
<pre id='line804' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line805")'> 805:         Kendall's tau-a</pre>
<pre id='line805' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line806")'> 806:     tau_b : float</pre>
<pre id='line806' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line807")'> 807:         Kendall's tau-b</pre>
<pre id='line807' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line808")'> 808: </pre>
<pre id='line808' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line809")'> 809:     For data in contigency table format, see kendalltau_fromct.</pre>
<pre id='line809' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line810")'> 810: </pre>
<pre id='line810' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line811")'> 811:     FROM:</pre>
<pre id='line811' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line812")'> 812:     http://projects.scipy.org/scipy/attachment/ticket/893/tau.pyx</pre>
<pre id='line812' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line813")'> 813: </pre>
<pre id='line813' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line814")'> 814:     """</pre>
<pre id='line814' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line815")'> 815: </pre>
<pre id='line815' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line816")'> 816:     cdef int P = 0, Q = 0, Tx = 0, Ty = 0</pre>
<pre id='line816' class='code' style='background-color: #FFFFff'>  __pyx_v_P = 0;
  __pyx_v_Q = 0;
  __pyx_v_Tx = 0;
  __pyx_v_Ty = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line817")'> 817:     cdef int n = 0, m, i, j</pre>
<pre id='line817' class='code' style='background-color: #FFFFff'>  __pyx_v_n = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line818")'> 818:     cdef double x0, y0, x1, y1, q</pre>
<pre id='line818' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line819")'> 819:     cdef np.int_t *x, *y</pre>
<pre id='line819' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line820")'> 820:     cdef double tau_a, tau_b, part1, part2</pre>
<pre id='line820' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line821")'> 821: </pre>
<pre id='line821' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line822")'> 822:     for i in range(n_samples):</pre>
<pre id='line822' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_samples;
  for (__pyx_t_2 = 0; __pyx_t_2 &lt; __pyx_t_1; __pyx_t_2+=1) {
    __pyx_v_i = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line823")'> 823:         x0 = X[i]</pre>
<pre id='line823' class='code' style='background-color: #FFFFff'>    __pyx_v_x0 = (__pyx_v_X[__pyx_v_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line824")'> 824:         y0 = Y[i]</pre>
<pre id='line824' class='code' style='background-color: #FFFFff'>    __pyx_v_y0 = (__pyx_v_Y[__pyx_v_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line825")'> 825:         for j in range(i+1, n_samples):</pre>
<pre id='line825' class='code' style='background-color: #FFFFff'>    __pyx_t_3 = __pyx_v_n_samples;
    for (__pyx_t_4 = (__pyx_v_i + 1); __pyx_t_4 &lt; __pyx_t_3; __pyx_t_4+=1) {
      __pyx_v_j = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line826")'> 826:             x1 = X[j]</pre>
<pre id='line826' class='code' style='background-color: #FFFFff'>      __pyx_v_x1 = (__pyx_v_X[__pyx_v_j]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line827")'> 827:             y1 = Y[j]</pre>
<pre id='line827' class='code' style='background-color: #FFFFff'>      __pyx_v_y1 = (__pyx_v_Y[__pyx_v_j]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line828")'> 828:             # New comparison, compare if the one value is still greater than</pre>
<pre id='line828' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line829")'> 829:             # the other, ignoring all sort of ties</pre>
<pre id='line829' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line830")'> 830:             q = (x1-y1)*(x0-y0)</pre>
<pre id='line830' class='code' style='background-color: #FFFFff'>      __pyx_v_q = ((__pyx_v_x1 - __pyx_v_y1) * (__pyx_v_x0 - __pyx_v_y0));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line831")'> 831:             # Original comparison, compares ranks against each other and</pre>
<pre id='line831' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line832")'> 832:             # q = (x1-x0)*(y1-y0)</pre>
<pre id='line832' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line833")'> 833:             if q &gt; 0:</pre>
<pre id='line833' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = ((__pyx_v_q &gt; 0.0) != 0);
      if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line834")'> 834:                 # concordant pair</pre>
<pre id='line834' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line835")'> 835:                 P = P + 1</pre>
<pre id='line835' class='code' style='background-color: #FFFFff'>        __pyx_v_P = (__pyx_v_P + 1);
        goto __pyx_L7;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line836")'> 836:             elif q &lt; 0:</pre>
<pre id='line836' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = ((__pyx_v_q &lt; 0.0) != 0);
      if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line837")'> 837:                 # disconcordant pair</pre>
<pre id='line837' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line838")'> 838:                 Q = Q + 1</pre>
<pre id='line838' class='code' style='background-color: #FFFFff'>        __pyx_v_Q = (__pyx_v_Q + 1);
        goto __pyx_L7;
      }
      __pyx_L7:;
    }
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line839")'> 839:             # For Tau_a, ties must not be counted, this saves execution time</pre>
<pre id='line839' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line840")'> 840:             # elif q == 0:</pre>
<pre id='line840' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line841")'> 841:             #    # pair with tied rank</pre>
<pre id='line841' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line842")'> 842:             #    if (x1 == x0) and (y0 != y1):</pre>
<pre id='line842' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line843")'> 843:             #        # tie in x</pre>
<pre id='line843' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line844")'> 844:             #        Tx = Tx + 1</pre>
<pre id='line844' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line845")'> 845:             #    elif (x1 != x0) and (y0 == y1):</pre>
<pre id='line845' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line846")'> 846:             #        # tie in y</pre>
<pre id='line846' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line847")'> 847:             #        Ty = Ty + 1</pre>
<pre id='line847' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line848")'> 848:             #    # tie in x and y are ignored</pre>
<pre id='line848' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line849")'> 849:             #else:</pre>
<pre id='line849' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line850")'> 850:             #    # disconcordant pair</pre>
<pre id='line850' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line851")'> 851:             #    Q = Q + 1</pre>
<pre id='line851' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line852")'> 852: </pre>
<pre id='line852' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line853")'> 853:     part1 = &lt;double&gt; P-Q</pre>
<pre id='line853' class='code' style='background-color: #FFFFff'>  __pyx_v_part1 = (((double)__pyx_v_P) - __pyx_v_Q);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line854")'> 854:     part2 = sqrt(&lt;double&gt; (P+Q+Tx)*(P+Q+Ty))</pre>
<pre id='line854' class='code' style='background-color: #FFFFff'>  __pyx_v_part2 = sqrt((((double)((__pyx_v_P + __pyx_v_Q) + __pyx_v_Tx)) * ((__pyx_v_P + __pyx_v_Q) + __pyx_v_Ty)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line855")'> 855:     tau_b = part1 / part2</pre>
<pre id='line855' class='code' style='background-color: #FFFFff'>  __pyx_v_tau_b = (__pyx_v_part1 / __pyx_v_part2);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line856")'> 856:     tau_a = 2*part1/(n_samples*(n_samples-1))</pre>
<pre id='line856' class='code' style='background-color: #FFFFff'>  __pyx_v_tau_a = ((2.0 * __pyx_v_part1) / (__pyx_v_n_samples * (__pyx_v_n_samples - 1)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line857")'> 857:     return tau_a</pre>
<pre id='line857' class='code' style='background-color: #FFFFff'>  __pyx_r = __pyx_v_tau_a;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line858")'> 858: </pre>
<pre id='line858' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line859")'> 859: cdef class LocalKendallsTau(RegressionCriterion):</pre>
<pre id='line859' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RegressionCriterion __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line860")'> 860:     """Kendalls Tau impurity criterion</pre>
<pre id='line860' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line861")'> 861:     """</pre>
<pre id='line861' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line862")'> 862:     cdef double node_impurity(self) nogil:</pre>
<pre id='line862' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_16LocalKendallsTau_node_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  double *__pyx_v_mean_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start;
  double __pyx_v_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y;
  int __pyx_v_i;
  double *__pyx_v_y_values;
  double *__pyx_v_sample_means;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line863")'> 863:         """Evaluate the impurity of the current node, i.e. the impurity of</pre>
<pre id='line863' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line864")'> 864:            samples[start:end]."""</pre>
<pre id='line864' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line865")'> 865:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line865' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line866")'> 866:         cdef double* mean_total = self.mean_total</pre>
<pre id='line866' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.mean_total;
  __pyx_v_mean_total = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line867")'> 867:         cdef SIZE_t n_node_samples = self.n_node_samples</pre>
<pre id='line867' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_node_samples;
  __pyx_v_n_node_samples = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line868")'> 868:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line868' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.__pyx_base.samples;
  __pyx_v_samples = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line869")'> 869:         cdef SIZE_t start = self.start</pre>
<pre id='line869' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.start;
  __pyx_v_start = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line870")'> 870:         cdef double total = 1.0         # since tau can be between -1 and 1</pre>
<pre id='line870' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line871")'> 871:         cdef SIZE_t k</pre>
<pre id='line871' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line872")'> 872:         cdef DOUBLE_t* y = self.y                 # Values of y</pre>
<pre id='line872' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.__pyx_base.y;
  __pyx_v_y = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line873")'> 873:         cdef int i</pre>
<pre id='line873' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line874")'> 874: </pre>
<pre id='line874' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line875")'> 875:         cdef double* y_values = &lt;double*&gt; malloc(n_node_samples * sizeof(double))</pre>
<pre id='line875' class='code' style='background-color: #FFFFff'>  __pyx_v_y_values = ((double *)malloc((__pyx_v_n_node_samples * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line876")'> 876:         cdef double* sample_means = &lt;double*&gt; malloc(n_node_samples * sizeof(double))</pre>
<pre id='line876' class='code' style='background-color: #FFFFff'>  __pyx_v_sample_means = ((double *)malloc((__pyx_v_n_node_samples * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line877")'> 877:         for k in range(n_outputs):</pre>
<pre id='line877' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_n_outputs;
  for (__pyx_t_5 = 0; __pyx_t_5 &lt; __pyx_t_1; __pyx_t_5+=1) {
    __pyx_v_k = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line878")'> 878: </pre>
<pre id='line878' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line879")'> 879:             for i in range(n_node_samples):</pre>
<pre id='line879' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = __pyx_v_n_node_samples;
    for (__pyx_t_7 = 0; __pyx_t_7 &lt; __pyx_t_6; __pyx_t_7+=1) {
      __pyx_v_i = __pyx_t_7;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line880")'> 880:                 y_values[i] = &lt;double&gt; y[samples[start + i]]</pre>
<pre id='line880' class='code' style='background-color: #FFFFff'>      (__pyx_v_y_values[__pyx_v_i]) = ((double)(__pyx_v_y[(__pyx_v_samples[(__pyx_v_start + __pyx_v_i)])]));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line881")'> 881:                 sample_means[i] = &lt;double&gt; mean_total[k]</pre>
<pre id='line881' class='code' style='background-color: #FFFFff'>      (__pyx_v_sample_means[__pyx_v_i]) = ((double)(__pyx_v_mean_total[__pyx_v_k]));
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line882")'> 882: </pre>
<pre id='line882' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line883")'> 883:             total = total - local_tau(sample_means, y_values, n_node_samples)</pre>
<pre id='line883' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total - __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_local_tau(__pyx_v_sample_means, __pyx_v_y_values, __pyx_v_n_node_samples));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line884")'> 884: </pre>
<pre id='line884' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line885")'> 885:         free(y_values)</pre>
<pre id='line885' class='code' style='background-color: #FFFFff'>  free(__pyx_v_y_values);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line886")'> 886:         free(sample_means)</pre>
<pre id='line886' class='code' style='background-color: #FFFFff'>  free(__pyx_v_sample_means);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line887")'> 887:         return total / n_outputs</pre>
<pre id='line887' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line888")'> 888: </pre>
<pre id='line888' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line889")'> 889:     cdef double children_impurity(self) nogil:</pre>
<pre id='line889' class='code' style='background-color: #FFFFff'>static double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_16LocalKendallsTau_children_impurity(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_LocalKendallsTau *__pyx_v_self) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_y;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  CYTHON_UNUSED double *__pyx_v_mean_total;
  double *__pyx_v_mean_left;
  double *__pyx_v_mean_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end;
  double __pyx_v_total;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  double *__pyx_v_y_values;
  double *__pyx_v_sample_means;
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line890")'> 890:         """Evaluate the impurity in children nodes, i.e. the impurity of</pre>
<pre id='line890' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line891")'> 891:            samples[start:pos] + the impurity of samples[pos:end]."""</pre>
<pre id='line891' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line892")'> 892:         cdef DOUBLE_t* y = self.y</pre>
<pre id='line892' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;__pyx_base.__pyx_base.y;
  __pyx_v_y = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line893")'> 893:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line893' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_outputs;
  __pyx_v_n_outputs = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line894")'> 894:         cdef double* mean_total = self.mean_total</pre>
<pre id='line894' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.mean_total;
  __pyx_v_mean_total = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line895")'> 895:         cdef double* mean_left = self.mean_left</pre>
<pre id='line895' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.mean_left;
  __pyx_v_mean_left = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line896")'> 896:         cdef double* mean_right = self.mean_right</pre>
<pre id='line896' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.mean_right;
  __pyx_v_mean_right = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line897")'> 897:         cdef SIZE_t n_node_samples = self.n_node_samples</pre>
<pre id='line897' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.n_node_samples;
  __pyx_v_n_node_samples = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line898")'> 898:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line898' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;__pyx_base.__pyx_base.samples;
  __pyx_v_samples = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line899")'> 899:         cdef SIZE_t start = self.start</pre>
<pre id='line899' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.start;
  __pyx_v_start = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line900")'> 900:         cdef SIZE_t pos = self.pos</pre>
<pre id='line900' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.pos;
  __pyx_v_pos = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line901")'> 901:         cdef SIZE_t end = self.end</pre>
<pre id='line901' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.__pyx_base.end;
  __pyx_v_end = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line902")'> 902:         cdef double total = 1.0  # since tau can be between -1 and 1</pre>
<pre id='line902' class='code' style='background-color: #FFFFff'>  __pyx_v_total = 1.0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line903")'> 903:         cdef SIZE_t k, i</pre>
<pre id='line903' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line904")'> 904: </pre>
<pre id='line904' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line905")'> 905:         cdef double* y_values = &lt;double*&gt; malloc(n_node_samples * sizeof(double))</pre>
<pre id='line905' class='code' style='background-color: #FFFFff'>  __pyx_v_y_values = ((double *)malloc((__pyx_v_n_node_samples * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line906")'> 906:         cdef double* sample_means = &lt;double*&gt; malloc(n_node_samples * sizeof(double))</pre>
<pre id='line906' class='code' style='background-color: #FFFFff'>  __pyx_v_sample_means = ((double *)malloc((__pyx_v_n_node_samples * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line907")'> 907:         for k in range(n_outputs):</pre>
<pre id='line907' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_n_outputs;
  for (__pyx_t_5 = 0; __pyx_t_5 &lt; __pyx_t_2; __pyx_t_5+=1) {
    __pyx_v_k = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line908")'> 908:             for i in range(pos - start):</pre>
<pre id='line908' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = (__pyx_v_pos - __pyx_v_start);
    for (__pyx_t_7 = 0; __pyx_t_7 &lt; __pyx_t_6; __pyx_t_7+=1) {
      __pyx_v_i = __pyx_t_7;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line909")'> 909:                 y_values[i] = y[samples[start + i]]</pre>
<pre id='line909' class='code' style='background-color: #FFFFff'>      (__pyx_v_y_values[__pyx_v_i]) = (__pyx_v_y[(__pyx_v_samples[(__pyx_v_start + __pyx_v_i)])]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line910")'> 910:                 sample_means[i] = mean_left[k]</pre>
<pre id='line910' class='code' style='background-color: #FFFFff'>      (__pyx_v_sample_means[__pyx_v_i]) = (__pyx_v_mean_left[__pyx_v_k]);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line911")'> 911: </pre>
<pre id='line911' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line912")'> 912:             for i in range(end - pos):</pre>
<pre id='line912' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = (__pyx_v_end - __pyx_v_pos);
    for (__pyx_t_7 = 0; __pyx_t_7 &lt; __pyx_t_6; __pyx_t_7+=1) {
      __pyx_v_i = __pyx_t_7;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line913")'> 913:                 y_values[pos - start + i] = y[samples[pos + i]]</pre>
<pre id='line913' class='code' style='background-color: #FFFFff'>      (__pyx_v_y_values[((__pyx_v_pos - __pyx_v_start) + __pyx_v_i)]) = (__pyx_v_y[(__pyx_v_samples[(__pyx_v_pos + __pyx_v_i)])]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line914")'> 914:                 sample_means[pos - start + i] = mean_right[k]</pre>
<pre id='line914' class='code' style='background-color: #FFFFff'>      (__pyx_v_sample_means[((__pyx_v_pos - __pyx_v_start) + __pyx_v_i)]) = (__pyx_v_mean_right[__pyx_v_k]);
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line915")'> 915: </pre>
<pre id='line915' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line916")'> 916:             total = total - local_tau(sample_means, y_values, n_node_samples)</pre>
<pre id='line916' class='code' style='background-color: #FFFFff'>    __pyx_v_total = (__pyx_v_total - __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_local_tau(__pyx_v_sample_means, __pyx_v_y_values, __pyx_v_n_node_samples));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line917")'> 917:         free(y_values)</pre>
<pre id='line917' class='code' style='background-color: #FFFFff'>  free(__pyx_v_y_values);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line918")'> 918:         free(sample_means)</pre>
<pre id='line918' class='code' style='background-color: #FFFFff'>  free(__pyx_v_sample_means);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line919")'> 919: </pre>
<pre id='line919' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line920")'> 920:         return total / n_outputs</pre>
<pre id='line920' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_v_total / __pyx_v_n_outputs);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line921")'> 921: </pre>
<pre id='line921' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line922")'> 922: </pre>
<pre id='line922' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line923")'> 923: # =============================================================================</pre>
<pre id='line923' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line924")'> 924: # Splitter</pre>
<pre id='line924' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line925")'> 925: # =============================================================================</pre>
<pre id='line925' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line926")'> 926: </pre>
<pre id='line926' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line927")'> 927: cdef class Splitter:</pre>
<pre id='line927' class='code' style='background-color: #FFFFff'>struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter {
  void (*init)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *, PyArrayObject *, PyArrayObject *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *);
  void (*node_reset)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, double *);
  void (*node_split)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, double *);
  void (*node_value)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *, double *);
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter;

</pre><pre class='line' style='background-color: #FFFF27' onclick='toggleDiv("line928")'> 928:     def __cinit__(self, Criterion criterion,</pre>
<pre id='line928' class='code' style='background-color: #FFFF27'>/* Python wrapper */
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_criterion = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf;
  PyObject *__pyx_v_random_state = 0;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_criterion,&amp;__pyx_n_s_max_features,&amp;__pyx_n_s_min_samples_leaf,&amp;__pyx_n_s_random_state,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_criterion)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_max_features)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 4, 4, 1); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_min_samples_leaf)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 4, 4, 2); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  3:
        if (likely((values[3] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_random_state)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 4, 4, 3); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__cinit__") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 4) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
    }
    __pyx_v_criterion = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)values[0]);
    __pyx_v_max_features = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[1]);<span class='error_goto'> if (unlikely((__pyx_v_max_features == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 929; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_min_samples_leaf = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[2]);<span class='error_goto'> if (unlikely((__pyx_v_min_samples_leaf == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 930; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_random_state = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 4, 4, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Splitter.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_criterion), __pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion, 1, "criterion", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 928; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter___cinit__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_self), __pyx_v_criterion, __pyx_v_max_features, __pyx_v_min_samples_leaf, __pyx_v_random_state);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter___cinit__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_criterion, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_features, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf, PyObject *__pyx_v_random_state) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__", 0);
/* … */
  /* function exit code */
  __pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line929")'> 929:                         SIZE_t max_features,</pre>
<pre id='line929' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line930")'> 930:                         SIZE_t min_samples_leaf,</pre>
<pre id='line930' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line931")'> 931:                         object random_state):</pre>
<pre id='line931' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line932")'> 932:         self.criterion = criterion</pre>
<pre id='line932' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_criterion));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_criterion));
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;criterion);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;criterion));
  __pyx_v_self-&gt;criterion = __pyx_v_criterion;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line933")'> 933: </pre>
<pre id='line933' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line934")'> 934:         self.samples = NULL</pre>
<pre id='line934' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;samples = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line935")'> 935:         self.n_samples = 0</pre>
<pre id='line935' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_samples = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line936")'> 936:         self.features = NULL</pre>
<pre id='line936' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;features = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line937")'> 937:         self.n_features = 0</pre>
<pre id='line937' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_features = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line938")'> 938: </pre>
<pre id='line938' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line939")'> 939:         self.X = None</pre>
<pre id='line939' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='refnanny'>__Pyx_GIVEREF</span>(Py_None);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;X);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;X));
  __pyx_v_self-&gt;X = ((PyArrayObject *)Py_None);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line940")'> 940:         self.y = NULL</pre>
<pre id='line940' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;y = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line941")'> 941:         self.y_stride = 0</pre>
<pre id='line941' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;y_stride = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line942")'> 942:         self.sample_weight = NULL</pre>
<pre id='line942' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;sample_weight = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line943")'> 943: </pre>
<pre id='line943' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line944")'> 944:         self.max_features = max_features</pre>
<pre id='line944' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;max_features = __pyx_v_max_features;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line945")'> 945:         self.min_samples_leaf = min_samples_leaf</pre>
<pre id='line945' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;min_samples_leaf = __pyx_v_min_samples_leaf;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line946")'> 946:         self.random_state = random_state</pre>
<pre id='line946' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_random_state);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_random_state);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;random_state);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;random_state);
  __pyx_v_self-&gt;random_state = __pyx_v_random_state;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line947")'> 947: </pre>
<pre id='line947' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line948")'> 948:     def __dealloc__(self):</pre>
<pre id='line948' class='code' style='background-color: #FFFFff'>/* Python wrapper */
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_3__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_3__dealloc__(PyObject *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__ (wrapper)", 0);
  __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_2__dealloc__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}

static void __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_2__dealloc__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__", 0);
/* … */
  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line949")'> 949:         """Destructor."""</pre>
<pre id='line949' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line950")'> 950:         free(self.samples)</pre>
<pre id='line950' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;samples);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line951")'> 951:         free(self.features)</pre>
<pre id='line951' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;features);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line952")'> 952: </pre>
<pre id='line952' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line953")'> 953:     def __getstate__(self):</pre>
<pre id='line953' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_5__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_5__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_4__getstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_4__getstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Splitter.__getstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line954")'> 954:         return {}</pre>
<pre id='line954' class='code' style='background-color: #FFFF9f'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 954; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line955")'> 955: </pre>
<pre id='line955' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line956")'> 956:     def __setstate__(self, d):</pre>
<pre id='line956' class='code' style='background-color: #FFFFe7'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_7__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_7__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_6__setstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_self), ((PyObject *)__pyx_v_d));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_6__setstate__(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v_d) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__", 0);

  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line957")'> 957:         pass</pre>
<pre id='line957' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line958")'> 958: </pre>
<pre id='line958' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line959")'> 959:     cdef void init(self, np.ndarray[DTYPE_t, ndim=2, mode="c"] X,</pre>
<pre id='line959' class='code' style='background-color: #FFFF52'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_init(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, PyArrayObject *__pyx_v_X, PyArrayObject *__pyx_v_y, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_j;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_features;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_y;
  __Pyx_Buffer __pyx_pybuffer_y;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("init", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  __pyx_pybuffer_y.pybuffer.buf = NULL;
  __pyx_pybuffer_y.refcount = 0;
  __pyx_pybuffernd_y.data = NULL;
  __pyx_pybuffernd_y.rcbuffer = &amp;__pyx_pybuffer_y;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 959; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_y.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_y, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 959; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_y.diminfo[0].strides = __pyx_pybuffernd_y.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_y.diminfo[0].shape = __pyx_pybuffernd_y.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_y.diminfo[1].strides = __pyx_pybuffernd_y.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_y.diminfo[1].shape = __pyx_pybuffernd_y.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_y.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Splitter.init", __pyx_clineno, __pyx_lineno, __pyx_filename, 0);
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_y.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line960")'> 960:                          np.ndarray[DOUBLE_t, ndim=2, mode="c"] y,</pre>
<pre id='line960' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line961")'> 961:                          DOUBLE_t* sample_weight):</pre>
<pre id='line961' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line962")'> 962:         """Initialize the splitter."""</pre>
<pre id='line962' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line963")'> 963:         # Free old structures if any</pre>
<pre id='line963' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line964")'> 964:         if self.samples != NULL:</pre>
<pre id='line964' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;samples != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line965")'> 965:             free(self.samples)</pre>
<pre id='line965' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;samples);
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line966")'> 966:         if self.features != NULL:</pre>
<pre id='line966' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;features != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line967")'> 967:             free(self.features)</pre>
<pre id='line967' class='code' style='background-color: #FFFFff'>    free(__pyx_v_self-&gt;features);
    goto __pyx_L4;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line968")'> 968: </pre>
<pre id='line968' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line969")'> 969:         # Reset random state</pre>
<pre id='line969' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line970")'> 970:         self.rand_r_state = self.random_state.randint(0, RAND_R_MAX)</pre>
<pre id='line970' class='code' style='background-color: #FFFF57'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_self-&gt;random_state, __pyx_n_s_randint);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 970; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_e_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RAND_R_MAX);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 970; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 970; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 970; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_unsigned_int</span>(__pyx_t_3);<span class='error_goto'> if (unlikely((__pyx_t_5 == (unsigned int)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 970; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_self-&gt;rand_r_state = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line971")'> 971: </pre>
<pre id='line971' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line972")'> 972:         # Initialize samples and features structures</pre>
<pre id='line972' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line973")'> 973:         cdef SIZE_t n_samples = X.shape[0]</pre>
<pre id='line973' class='code' style='background-color: #FFFFff'>  __pyx_v_n_samples = (__pyx_v_X-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line974")'> 974:         cdef SIZE_t* samples = &lt;SIZE_t*&gt; malloc(n_samples * sizeof(SIZE_t))</pre>
<pre id='line974' class='code' style='background-color: #FFFFff'>  __pyx_v_samples = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)malloc((__pyx_v_n_samples * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line975")'> 975: </pre>
<pre id='line975' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line976")'> 976:         cdef SIZE_t i, j</pre>
<pre id='line976' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line977")'> 977:         j = 0</pre>
<pre id='line977' class='code' style='background-color: #FFFFff'>  __pyx_v_j = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line978")'> 978: </pre>
<pre id='line978' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line979")'> 979:         for i from 0 &lt;= i &lt; n_samples:</pre>
<pre id='line979' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_n_samples;
  for (__pyx_v_i = 0; __pyx_v_i &lt; __pyx_t_6; __pyx_v_i++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line980")'> 980:             # Only work with positively weighted samples</pre>
<pre id='line980' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line981")'> 981:             if sample_weight == NULL or sample_weight[i] != 0.0:</pre>
<pre id='line981' class='code' style='background-color: #FFFFff'>    __pyx_t_1 = ((__pyx_v_sample_weight == NULL) != 0);
    if (!__pyx_t_1) {
      __pyx_t_7 = (((__pyx_v_sample_weight[__pyx_v_i]) != 0.0) != 0);
      __pyx_t_8 = __pyx_t_7;
    } else {
      __pyx_t_8 = __pyx_t_1;
    }
    if (__pyx_t_8) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line982")'> 982:                 samples[j] = i</pre>
<pre id='line982' class='code' style='background-color: #FFFFff'>      (__pyx_v_samples[__pyx_v_j]) = __pyx_v_i;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line983")'> 983:                 j += 1</pre>
<pre id='line983' class='code' style='background-color: #FFFFff'>      __pyx_v_j = (__pyx_v_j + 1);
      goto __pyx_L7;
    }
    __pyx_L7:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line984")'> 984: </pre>
<pre id='line984' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line985")'> 985:         self.samples = samples</pre>
<pre id='line985' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;samples = __pyx_v_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line986")'> 986:         self.n_samples = j</pre>
<pre id='line986' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_samples = __pyx_v_j;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line987")'> 987: </pre>
<pre id='line987' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line988")'> 988:         cdef SIZE_t n_features = X.shape[1]</pre>
<pre id='line988' class='code' style='background-color: #FFFFff'>  __pyx_v_n_features = (__pyx_v_X-&gt;dimensions[1]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line989")'> 989:         cdef SIZE_t* features = &lt;SIZE_t*&gt; malloc(n_features * sizeof(SIZE_t))</pre>
<pre id='line989' class='code' style='background-color: #FFFFff'>  __pyx_v_features = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)malloc((__pyx_v_n_features * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line990")'> 990: </pre>
<pre id='line990' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line991")'> 991:         for i from 0 &lt;= i &lt; n_features:</pre>
<pre id='line991' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_n_features;
  for (__pyx_v_i = 0; __pyx_v_i &lt; __pyx_t_6; __pyx_v_i++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line992")'> 992:             features[i] = i</pre>
<pre id='line992' class='code' style='background-color: #FFFFff'>    (__pyx_v_features[__pyx_v_i]) = __pyx_v_i;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line993")'> 993: </pre>
<pre id='line993' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line994")'> 994:         self.features = features</pre>
<pre id='line994' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;features = __pyx_v_features;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line995")'> 995:         self.n_features = n_features</pre>
<pre id='line995' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_features = __pyx_v_n_features;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line996")'> 996: </pre>
<pre id='line996' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line997")'> 997:         # Initialize X, y, sample_weight</pre>
<pre id='line997' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line998")'> 998:         self.X = X</pre>
<pre id='line998' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_X));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_X));
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;X);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;X));
  __pyx_v_self-&gt;X = ((PyArrayObject *)__pyx_v_X);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line999")'> 999:         self.y = &lt;DOUBLE_t*&gt; y.data</pre>
<pre id='line999' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;y = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *)__pyx_v_y-&gt;data);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1000")'> 1000:         self.y_stride = &lt;SIZE_t&gt; y.strides[0] / &lt;SIZE_t&gt; y.itemsize</pre>
<pre id='line1000' class='code' style='background-color: #FFFFaa'>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_y), __pyx_n_s_itemsize);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1000; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_3);<span class='error_goto'> if (unlikely((__pyx_t_6 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1000; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_self-&gt;y_stride = (((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)(__pyx_v_y-&gt;strides[0])) / ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)__pyx_t_6));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1001")'> 1001:         self.sample_weight = sample_weight</pre>
<pre id='line1001' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;sample_weight = __pyx_v_sample_weight;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1002")'> 1002: </pre>
<pre id='line1002' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1003")'> 1003:     cdef void node_reset(self, SIZE_t start, SIZE_t end, double* impurity):</pre>
<pre id='line1003' class='code' style='background-color: #FFFFe7'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_node_reset(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end, double *__pyx_v_impurity) {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_criterion = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("node_reset", 0);
/* … */
  /* function exit code */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_criterion);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1004")'> 1004:         """Reset splitter on node samples[start:end]."""</pre>
<pre id='line1004' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1005")'> 1005:         cdef Criterion criterion = self.criterion</pre>
<pre id='line1005' class='code' style='background-color: #FFFFe7'>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;criterion);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_criterion = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1006")'> 1006: </pre>
<pre id='line1006' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1007")'> 1007:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line1007' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;samples;
  __pyx_v_samples = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1008")'> 1008:         self.start = start</pre>
<pre id='line1008' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1009")'> 1009:         self.end = end</pre>
<pre id='line1009' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1010")'> 1010: </pre>
<pre id='line1010' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1011")'> 1011:         criterion.init(self.y,</pre>
<pre id='line1011' class='code' style='background-color: #FFFFff'>  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;init(__pyx_v_criterion, __pyx_v_self-&gt;y, __pyx_v_self-&gt;y_stride, __pyx_v_self-&gt;sample_weight, __pyx_v_samples, __pyx_v_start, __pyx_v_end);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1012")'> 1012:                        self.y_stride,</pre>
<pre id='line1012' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1013")'> 1013:                        self.sample_weight,</pre>
<pre id='line1013' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1014")'> 1014:                        samples,</pre>
<pre id='line1014' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1015")'> 1015:                        start,</pre>
<pre id='line1015' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1016")'> 1016:                        end)</pre>
<pre id='line1016' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1017")'> 1017: </pre>
<pre id='line1017' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1018")'> 1018:         impurity[0] =  criterion.node_impurity()</pre>
<pre id='line1018' class='code' style='background-color: #FFFFff'>  (__pyx_v_impurity[0]) = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;node_impurity(__pyx_v_criterion);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1019")'> 1019: </pre>
<pre id='line1019' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1020")'> 1020:     cdef void node_split(self, SIZE_t* pos, SIZE_t* feature, double* threshold):</pre>
<pre id='line1020' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_node_split(CYTHON_UNUSED struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_pos, CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature, CYTHON_UNUSED double *__pyx_v_threshold) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("node_split", 0);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1021")'> 1021:         """Find a split on node samples[start:end]."""</pre>
<pre id='line1021' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1022")'> 1022:         pass</pre>
<pre id='line1022' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1023")'> 1023: </pre>
<pre id='line1023' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1024")'> 1024:     cdef void node_value(self, double* dest):</pre>
<pre id='line1024' class='code' style='background-color: #FFFFff'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_8Splitter_node_value(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_self, double *__pyx_v_dest) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("node_value", 0);
/* … */
  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1025")'> 1025:         """Copy the value of node samples[start:end] into dest."""</pre>
<pre id='line1025' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1026")'> 1026:         self.criterion.node_value(dest)</pre>
<pre id='line1026' class='code' style='background-color: #FFFFff'>  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_self-&gt;criterion-&gt;__pyx_vtab)-&gt;node_value(__pyx_v_self-&gt;criterion, __pyx_v_dest);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1027")'> 1027: </pre>
<pre id='line1027' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1028")'> 1028: </pre>
<pre id='line1028' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1029")'> 1029: cdef class BestSplitter(Splitter):</pre>
<pre id='line1029' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1030")'> 1030:     """Splitter for finding the best split."""</pre>
<pre id='line1030' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1031")'> 1031:     def __reduce__(self):</pre>
<pre id='line1031' class='code' style='background-color: #FFFFaa'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_12BestSplitter_1__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_12BestSplitter_1__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_12BestSplitter___reduce__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_12BestSplitter___reduce__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.BestSplitter.__reduce__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line1032")'> 1032:         return (BestSplitter, (self.criterion,</pre>
<pre id='line1032' class='code' style='background-color: #FFFF52'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
/* … */
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1032; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 2, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.random_state);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 3, __pyx_v_self-&gt;__pyx_base.random_state);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.random_state);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
/* … */
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1032; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter)));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1033")'> 1033:                                self.max_features,</pre>
<pre id='line1033' class='code' style='background-color: #FFFFd4'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.max_features);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1033; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1034")'> 1034:                                self.min_samples_leaf,</pre>
<pre id='line1034' class='code' style='background-color: #FFFFd4'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.min_samples_leaf);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1034; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1035")'> 1035:                                self.random_state), self.__getstate__())</pre>
<pre id='line1035' class='code' style='background-color: #FFFFaa'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_getstate);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1035; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_empty_tuple, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1035; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1036")'> 1036: </pre>
<pre id='line1036' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line1037")'> 1037:     cdef void node_split(self, SIZE_t* pos, SIZE_t* feature, double* threshold):</pre>
<pre id='line1037' class='code' style='background-color: #FFFF6e'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_12BestSplitter_node_split(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_BestSplitter *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_pos, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature, double *__pyx_v_threshold) {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_criterion = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_features;
  PyArrayObject *__pyx_v_X = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf;
  unsigned int *__pyx_v_random_state;
  double __pyx_v_best_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_best_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_best_feature;
  double __pyx_v_best_threshold;
  double __pyx_v_current_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_current_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_current_feature;
  double __pyx_v_current_threshold;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_idx;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_j;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_visited_features;
  CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_partition_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_partition_end;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("node_split", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.BestSplitter.node_split", __pyx_clineno, __pyx_lineno, __pyx_filename, 0);
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_criterion);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_X);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1038")'> 1038:         """Find the best split on node samples[start:end]."""</pre>
<pre id='line1038' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1039")'> 1039:         # Find the best split</pre>
<pre id='line1039' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1040")'> 1040:         cdef Criterion criterion = self.criterion</pre>
<pre id='line1040' class='code' style='background-color: #FFFFe7'>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_criterion = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1041")'> 1041:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line1041' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.samples;
  __pyx_v_samples = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1042")'> 1042:         cdef SIZE_t start = self.start</pre>
<pre id='line1042' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.start;
  __pyx_v_start = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1043")'> 1043:         cdef SIZE_t end = self.end</pre>
<pre id='line1043' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.end;
  __pyx_v_end = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1044")'> 1044: </pre>
<pre id='line1044' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1045")'> 1045:         cdef SIZE_t* features = self.features</pre>
<pre id='line1045' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.features;
  __pyx_v_features = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1046")'> 1046:         cdef SIZE_t n_features = self.n_features</pre>
<pre id='line1046' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_features;
  __pyx_v_n_features = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1047")'> 1047: </pre>
<pre id='line1047' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line1048")'> 1048:         cdef np.ndarray[DTYPE_t, ndim=2, mode="c"] X = self.X</pre>
<pre id='line1048' class='code' style='background-color: #FFFFb6'>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.X);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)((PyArrayObject *)__pyx_t_1), &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 2, 0, __pyx_stack) == -1)) {
      __pyx_v_X = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1048; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
    }
  }
  __pyx_v_X = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1049")'> 1049:         cdef SIZE_t max_features = self.max_features</pre>
<pre id='line1049' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.max_features;
  __pyx_v_max_features = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1050")'> 1050:         cdef SIZE_t min_samples_leaf = self.min_samples_leaf</pre>
<pre id='line1050' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.min_samples_leaf;
  __pyx_v_min_samples_leaf = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1051")'> 1051:         cdef unsigned int* random_state = &amp;self.rand_r_state</pre>
<pre id='line1051' class='code' style='background-color: #FFFFff'>  __pyx_v_random_state = (&amp;__pyx_v_self-&gt;__pyx_base.rand_r_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1052")'> 1052: </pre>
<pre id='line1052' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1053")'> 1053:         cdef double best_impurity = INFINITY</pre>
<pre id='line1053' class='code' style='background-color: #FFFFff'>  __pyx_v_best_impurity = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_INFINITY;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1054")'> 1054:         cdef SIZE_t best_pos = end</pre>
<pre id='line1054' class='code' style='background-color: #FFFFff'>  __pyx_v_best_pos = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1055")'> 1055:         cdef SIZE_t best_feature</pre>
<pre id='line1055' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1056")'> 1056:         cdef double best_threshold</pre>
<pre id='line1056' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1057")'> 1057: </pre>
<pre id='line1057' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1058")'> 1058:         cdef double current_impurity</pre>
<pre id='line1058' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1059")'> 1059:         cdef SIZE_t current_pos</pre>
<pre id='line1059' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1060")'> 1060:         cdef SIZE_t current_feature</pre>
<pre id='line1060' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1061")'> 1061:         cdef double current_threshold</pre>
<pre id='line1061' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1062")'> 1062: </pre>
<pre id='line1062' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1063")'> 1063:         cdef SIZE_t f_idx, f_i, f_j, p, tmp</pre>
<pre id='line1063' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1064")'> 1064:         cdef SIZE_t visited_features = 0</pre>
<pre id='line1064' class='code' style='background-color: #FFFFff'>  __pyx_v_visited_features = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1065")'> 1065: </pre>
<pre id='line1065' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1066")'> 1066:         cdef SIZE_t partition_start</pre>
<pre id='line1066' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1067")'> 1067:         cdef SIZE_t partition_end</pre>
<pre id='line1067' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1068")'> 1068: </pre>
<pre id='line1068' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1069")'> 1069:         for f_idx from 0 &lt;= f_idx &lt; n_features:</pre>
<pre id='line1069' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_n_features;
  for (__pyx_v_f_idx = 0; __pyx_v_f_idx &lt; __pyx_t_3; __pyx_v_f_idx++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1070")'> 1070:             # Draw a feature at random</pre>
<pre id='line1070' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1071")'> 1071:             f_i = n_features - f_idx - 1</pre>
<pre id='line1071' class='code' style='background-color: #FFFFff'>    __pyx_v_f_i = ((__pyx_v_n_features - __pyx_v_f_idx) - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1072")'> 1072:             f_j = rand_int(n_features - f_idx, random_state)</pre>
<pre id='line1072' class='code' style='background-color: #FFFFff'>    __pyx_v_f_j = __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_rand_int((__pyx_v_n_features - __pyx_v_f_idx), __pyx_v_random_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1073")'> 1073: </pre>
<pre id='line1073' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1074")'> 1074:             tmp = features[f_i]</pre>
<pre id='line1074' class='code' style='background-color: #FFFFff'>    __pyx_v_tmp = (__pyx_v_features[__pyx_v_f_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1075")'> 1075:             features[f_i] = features[f_j]</pre>
<pre id='line1075' class='code' style='background-color: #FFFFff'>    (__pyx_v_features[__pyx_v_f_i]) = (__pyx_v_features[__pyx_v_f_j]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1076")'> 1076:             features[f_j] = tmp</pre>
<pre id='line1076' class='code' style='background-color: #FFFFff'>    (__pyx_v_features[__pyx_v_f_j]) = __pyx_v_tmp;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1077")'> 1077: </pre>
<pre id='line1077' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1078")'> 1078:             current_feature = features[f_i]</pre>
<pre id='line1078' class='code' style='background-color: #FFFFff'>    __pyx_v_current_feature = (__pyx_v_features[__pyx_v_f_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1079")'> 1079: </pre>
<pre id='line1079' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1080")'> 1080:             # Sort samples along that feature</pre>
<pre id='line1080' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1081")'> 1081:             sort(X, current_feature, samples+start, end-start)</pre>
<pre id='line1081' class='code' style='background-color: #FFFFff'>    __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sort(((PyArrayObject *)__pyx_v_X), __pyx_v_current_feature, (__pyx_v_samples + __pyx_v_start), (__pyx_v_end - __pyx_v_start));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1082")'> 1082: </pre>
<pre id='line1082' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1083")'> 1083:             # Evaluate all splits</pre>
<pre id='line1083' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1084")'> 1084:             criterion.reset()</pre>
<pre id='line1084' class='code' style='background-color: #FFFFff'>    ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;reset(__pyx_v_criterion);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1085")'> 1085:             p = start</pre>
<pre id='line1085' class='code' style='background-color: #FFFFff'>    __pyx_v_p = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1086")'> 1086: </pre>
<pre id='line1086' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1087")'> 1087:             while p &lt; end:</pre>
<pre id='line1087' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_4 = ((__pyx_v_p &lt; __pyx_v_end) != 0);
      if (!__pyx_t_4) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1088")'> 1088:                 while ((p + 1 &lt; end) and</pre>
<pre id='line1088' class='code' style='background-color: #FFFFff'>      while (1) {
        __pyx_t_4 = (((__pyx_v_p + 1) &lt; __pyx_v_end) != 0);
        if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1089")'> 1089:                        (X[samples[p + 1], current_feature] &lt;= X[samples[p], current_feature] + 1e-7)):</pre>
<pre id='line1089' class='code' style='background-color: #FFFFff'>          __pyx_t_5 = (__pyx_v_samples[(__pyx_v_p + 1)]);
          __pyx_t_6 = __pyx_v_current_feature;
          __pyx_t_7 = (__pyx_v_samples[__pyx_v_p]);
          __pyx_t_8 = __pyx_v_current_feature;
          __pyx_t_9 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_6, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= ((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_8, __pyx_pybuffernd_X.diminfo[1].strides)) + 1e-7)) != 0);
          __pyx_t_10 = __pyx_t_9;
        } else {
          __pyx_t_10 = __pyx_t_4;
        }
        if (!__pyx_t_10) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1090")'> 1090:                     p += 1</pre>
<pre id='line1090' class='code' style='background-color: #FFFFff'>        __pyx_v_p = (__pyx_v_p + 1);
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1091")'> 1091: </pre>
<pre id='line1091' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1092")'> 1092:                 # p + 1 &gt;= end or X[samples[p + 1], current_feature] &gt; X[samples[p], current_feature]</pre>
<pre id='line1092' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1093")'> 1093:                 p += 1</pre>
<pre id='line1093' class='code' style='background-color: #FFFFff'>      __pyx_v_p = (__pyx_v_p + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1094")'> 1094:                 # p &gt;= end or X[samples[p], current_feature] &gt; X[samples[p - 1], current_feature]</pre>
<pre id='line1094' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1095")'> 1095: </pre>
<pre id='line1095' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1096")'> 1096:                 if p &lt; end:</pre>
<pre id='line1096' class='code' style='background-color: #FFFFff'>      __pyx_t_10 = ((__pyx_v_p &lt; __pyx_v_end) != 0);
      if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1097")'> 1097:                     current_pos = p</pre>
<pre id='line1097' class='code' style='background-color: #FFFFff'>        __pyx_v_current_pos = __pyx_v_p;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1098")'> 1098: </pre>
<pre id='line1098' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1099")'> 1099:                     # Reject if min_samples_leaf is not guaranteed</pre>
<pre id='line1099' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1100")'> 1100:                     if (((current_pos - start) &lt; min_samples_leaf) or</pre>
<pre id='line1100' class='code' style='background-color: #FFFFff'>        __pyx_t_10 = (((__pyx_v_current_pos - __pyx_v_start) &lt; __pyx_v_min_samples_leaf) != 0);
        if (!__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1101")'> 1101:                         ((end - current_pos) &lt; min_samples_leaf)):</pre>
<pre id='line1101' class='code' style='background-color: #FFFFff'>          __pyx_t_4 = (((__pyx_v_end - __pyx_v_current_pos) &lt; __pyx_v_min_samples_leaf) != 0);
          __pyx_t_9 = __pyx_t_4;
        } else {
          __pyx_t_9 = __pyx_t_10;
        }
        if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1102")'> 1102:                        continue</pre>
<pre id='line1102' class='code' style='background-color: #FFFFff'>          goto __pyx_L5_continue;
        }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1103")'> 1103: </pre>
<pre id='line1103' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1104")'> 1104:                     criterion.update(current_pos)</pre>
<pre id='line1104' class='code' style='background-color: #FFFFff'>        ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;update(__pyx_v_criterion, __pyx_v_current_pos);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1105")'> 1105:                     current_impurity = criterion.children_impurity()</pre>
<pre id='line1105' class='code' style='background-color: #FFFFff'>        __pyx_v_current_impurity = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;children_impurity(__pyx_v_criterion);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1106")'> 1106: </pre>
<pre id='line1106' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1107")'> 1107:                     if current_impurity &lt; (best_impurity - 1e-7):</pre>
<pre id='line1107' class='code' style='background-color: #FFFFff'>        __pyx_t_9 = ((__pyx_v_current_impurity &lt; (__pyx_v_best_impurity - 1e-7)) != 0);
        if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1108")'> 1108:                         best_impurity = current_impurity</pre>
<pre id='line1108' class='code' style='background-color: #FFFFff'>          __pyx_v_best_impurity = __pyx_v_current_impurity;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1109")'> 1109:                         best_pos = current_pos</pre>
<pre id='line1109' class='code' style='background-color: #FFFFff'>          __pyx_v_best_pos = __pyx_v_current_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1110")'> 1110:                         best_feature = current_feature</pre>
<pre id='line1110' class='code' style='background-color: #FFFFff'>          __pyx_v_best_feature = __pyx_v_current_feature;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1111")'> 1111: </pre>
<pre id='line1111' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1112")'> 1112:                         current_threshold = (X[samples[p - 1], current_feature] + X[samples[p], current_feature]) / 2.0</pre>
<pre id='line1112' class='code' style='background-color: #FFFFff'>          __pyx_t_11 = (__pyx_v_samples[(__pyx_v_p - 1)]);
          __pyx_t_12 = __pyx_v_current_feature;
          __pyx_t_13 = (__pyx_v_samples[__pyx_v_p]);
          __pyx_t_14 = __pyx_v_current_feature;
          __pyx_v_current_threshold = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_12, __pyx_pybuffernd_X.diminfo[1].strides)) + (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_14, __pyx_pybuffernd_X.diminfo[1].strides))) / 2.0);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1113")'> 1113:                         if current_threshold == X[samples[p], current_feature]:</pre>
<pre id='line1113' class='code' style='background-color: #FFFFff'>          __pyx_t_15 = (__pyx_v_samples[__pyx_v_p]);
          __pyx_t_16 = __pyx_v_current_feature;
          __pyx_t_9 = ((__pyx_v_current_threshold == (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_16, __pyx_pybuffernd_X.diminfo[1].strides))) != 0);
          if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1114")'> 1114:                             current_threshold = X[samples[p - 1], current_feature]</pre>
<pre id='line1114' class='code' style='background-color: #FFFFff'>            __pyx_t_17 = (__pyx_v_samples[(__pyx_v_p - 1)]);
            __pyx_t_18 = __pyx_v_current_feature;
            __pyx_v_current_threshold = (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_18, __pyx_pybuffernd_X.diminfo[1].strides));
            goto __pyx_L12;
          }
          __pyx_L12:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1115")'> 1115: </pre>
<pre id='line1115' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1116")'> 1116:                         best_threshold = current_threshold</pre>
<pre id='line1116' class='code' style='background-color: #FFFFff'>          __pyx_v_best_threshold = __pyx_v_current_threshold;
          goto __pyx_L11;
        }
        __pyx_L11:;
        goto __pyx_L9;
      }
      __pyx_L9:;
      __pyx_L5_continue:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1117")'> 1117: </pre>
<pre id='line1117' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1118")'> 1118:             if best_pos == end: # No valid split was ever found</pre>
<pre id='line1118' class='code' style='background-color: #FFFFff'>    __pyx_t_9 = ((__pyx_v_best_pos == __pyx_v_end) != 0);
    if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1119")'> 1119:                 continue</pre>
<pre id='line1119' class='code' style='background-color: #FFFFff'>      goto __pyx_L3_continue;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1120")'> 1120: </pre>
<pre id='line1120' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1121")'> 1121:             # Count one more visited feature</pre>
<pre id='line1121' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1122")'> 1122:             visited_features += 1</pre>
<pre id='line1122' class='code' style='background-color: #FFFFff'>    __pyx_v_visited_features = (__pyx_v_visited_features + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1123")'> 1123: </pre>
<pre id='line1123' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1124")'> 1124:             if visited_features &gt;= max_features:</pre>
<pre id='line1124' class='code' style='background-color: #FFFFff'>    __pyx_t_9 = ((__pyx_v_visited_features &gt;= __pyx_v_max_features) != 0);
    if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1125")'> 1125:                 break</pre>
<pre id='line1125' class='code' style='background-color: #FFFFff'>      goto __pyx_L4_break;
    }
    __pyx_L3_continue:;
  }
  __pyx_L4_break:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1126")'> 1126: </pre>
<pre id='line1126' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1127")'> 1127:         # Reorganize samples into samples[start:best_pos] + samples[best_pos:end]</pre>
<pre id='line1127' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1128")'> 1128:         if best_pos &lt; end:</pre>
<pre id='line1128' class='code' style='background-color: #FFFFff'>  __pyx_t_9 = ((__pyx_v_best_pos &lt; __pyx_v_end) != 0);
  if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1129")'> 1129:             partition_start = start</pre>
<pre id='line1129' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1130")'> 1130:             partition_end = end</pre>
<pre id='line1130' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1131")'> 1131:             p = start</pre>
<pre id='line1131' class='code' style='background-color: #FFFFff'>    __pyx_v_p = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1132")'> 1132: </pre>
<pre id='line1132' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1133")'> 1133:             while p &lt; partition_end:</pre>
<pre id='line1133' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_9 = ((__pyx_v_p &lt; __pyx_v_partition_end) != 0);
      if (!__pyx_t_9) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1134")'> 1134:                 if X[samples[p], best_feature] &lt;= best_threshold:</pre>
<pre id='line1134' class='code' style='background-color: #FFFFff'>      __pyx_t_3 = (__pyx_v_samples[__pyx_v_p]);
      __pyx_t_19 = __pyx_v_best_feature;
      __pyx_t_9 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_19, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= __pyx_v_best_threshold) != 0);
      if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1135")'> 1135:                     p += 1</pre>
<pre id='line1135' class='code' style='background-color: #FFFFff'>        __pyx_v_p = (__pyx_v_p + 1);
        goto __pyx_L18;
      }
      /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1136")'> 1136: </pre>
<pre id='line1136' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1137")'> 1137:                 else:</pre>
<pre id='line1137' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1138")'> 1138:                     partition_end -= 1</pre>
<pre id='line1138' class='code' style='background-color: #FFFFff'>        __pyx_v_partition_end = (__pyx_v_partition_end - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1139")'> 1139: </pre>
<pre id='line1139' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1140")'> 1140:                     tmp = samples[partition_end]</pre>
<pre id='line1140' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_samples[__pyx_v_partition_end]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1141")'> 1141:                     samples[partition_end] = samples[p]</pre>
<pre id='line1141' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_partition_end]) = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1142")'> 1142:                     samples[p] = tmp</pre>
<pre id='line1142' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_p]) = __pyx_v_tmp;
      }
      __pyx_L18:;
    }
    goto __pyx_L15;
  }
  __pyx_L15:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1143")'> 1143: </pre>
<pre id='line1143' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1144")'> 1144:         # Return values</pre>
<pre id='line1144' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1145")'> 1145:         pos[0] = best_pos</pre>
<pre id='line1145' class='code' style='background-color: #FFFFff'>  (__pyx_v_pos[0]) = __pyx_v_best_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1146")'> 1146:         feature[0] = best_feature</pre>
<pre id='line1146' class='code' style='background-color: #FFFFff'>  (__pyx_v_feature[0]) = __pyx_v_best_feature;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1147")'> 1147:         threshold[0] = best_threshold</pre>
<pre id='line1147' class='code' style='background-color: #FFFFff'>  (__pyx_v_threshold[0]) = __pyx_v_best_threshold;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1148")'> 1148: </pre>
<pre id='line1148' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line1149")'> 1149: cdef void sort(np.ndarray[DTYPE_t, ndim=2, mode="c"] X, SIZE_t current_feature,</pre>
<pre id='line1149' class='code' style='background-color: #FFFF73'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sort(PyArrayObject *__pyx_v_X, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_current_feature, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_length) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t __pyx_v_tmp_value;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_parent;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_index;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_child;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("sort", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1149; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.sort", __pyx_clineno, __pyx_lineno, __pyx_filename, 0);
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1150")'> 1150:                SIZE_t* samples, SIZE_t length):</pre>
<pre id='line1150' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1151")'> 1151:     """In-place sorting of samples[start:end] using</pre>
<pre id='line1151' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1152")'> 1152:       X[sample[i], current_feature] as key."""</pre>
<pre id='line1152' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1153")'> 1153:     # Heapsort, adapted from Numerical Recipes in C</pre>
<pre id='line1153' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1154")'> 1154:     cdef SIZE_t tmp</pre>
<pre id='line1154' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1155")'> 1155:     cdef DOUBLE_t tmp_value</pre>
<pre id='line1155' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1156")'> 1156:     cdef SIZE_t n = length</pre>
<pre id='line1156' class='code' style='background-color: #FFFFff'>  __pyx_v_n = __pyx_v_length;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1157")'> 1157:     cdef SIZE_t parent = length / 2</pre>
<pre id='line1157' class='code' style='background-color: #FFFFff'>  __pyx_v_parent = (__pyx_v_length / 2);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1158")'> 1158:     cdef SIZE_t index, child</pre>
<pre id='line1158' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1159")'> 1159: </pre>
<pre id='line1159' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1160")'> 1160:     while True:</pre>
<pre id='line1160' class='code' style='background-color: #FFFFff'>  while (1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1161")'> 1161:         if parent &gt; 0:</pre>
<pre id='line1161' class='code' style='background-color: #FFFFff'>    __pyx_t_1 = ((__pyx_v_parent &gt; 0) != 0);
    if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1162")'> 1162:             parent -= 1</pre>
<pre id='line1162' class='code' style='background-color: #FFFFff'>      __pyx_v_parent = (__pyx_v_parent - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1163")'> 1163:             tmp = samples[parent]</pre>
<pre id='line1163' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_samples[__pyx_v_parent]);
      goto __pyx_L5;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1164")'> 1164:         else:</pre>
<pre id='line1164' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1165")'> 1165:             n -= 1</pre>
<pre id='line1165' class='code' style='background-color: #FFFFff'>      __pyx_v_n = (__pyx_v_n - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1166")'> 1166:             if n == 0:</pre>
<pre id='line1166' class='code' style='background-color: #FFFFff'>      __pyx_t_1 = ((__pyx_v_n == 0) != 0);
      if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1167")'> 1167:                 return</pre>
<pre id='line1167' class='code' style='background-color: #FFFFff'>        goto __pyx_L0;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1168")'> 1168:             tmp = samples[n]</pre>
<pre id='line1168' class='code' style='background-color: #FFFFff'>      __pyx_v_tmp = (__pyx_v_samples[__pyx_v_n]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1169")'> 1169:             samples[n] = samples[0]</pre>
<pre id='line1169' class='code' style='background-color: #FFFFff'>      (__pyx_v_samples[__pyx_v_n]) = (__pyx_v_samples[0]);
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1170")'> 1170: </pre>
<pre id='line1170' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1171")'> 1171:         tmp_value = X[tmp, current_feature]</pre>
<pre id='line1171' class='code' style='background-color: #FFFFff'>    __pyx_t_2 = __pyx_v_tmp;
    __pyx_t_3 = __pyx_v_current_feature;
    __pyx_v_tmp_value = (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_3, __pyx_pybuffernd_X.diminfo[1].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1172")'> 1172:         index = parent</pre>
<pre id='line1172' class='code' style='background-color: #FFFFff'>    __pyx_v_index = __pyx_v_parent;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1173")'> 1173:         child = index * 2 + 1</pre>
<pre id='line1173' class='code' style='background-color: #FFFFff'>    __pyx_v_child = ((__pyx_v_index * 2) + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1174")'> 1174: </pre>
<pre id='line1174' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1175")'> 1175:         while child &lt; n:</pre>
<pre id='line1175' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_1 = ((__pyx_v_child &lt; __pyx_v_n) != 0);
      if (!__pyx_t_1) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1176")'> 1176:             if ((child + 1 &lt; n) and</pre>
<pre id='line1176' class='code' style='background-color: #FFFFff'>      __pyx_t_1 = (((__pyx_v_child + 1) &lt; __pyx_v_n) != 0);
      if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1177")'> 1177:                 (X[samples[child + 1], current_feature] &gt; X[samples[child], current_feature])):</pre>
<pre id='line1177' class='code' style='background-color: #FFFFff'>        __pyx_t_4 = (__pyx_v_samples[(__pyx_v_child + 1)]);
        __pyx_t_5 = __pyx_v_current_feature;
        __pyx_t_6 = (__pyx_v_samples[__pyx_v_child]);
        __pyx_t_7 = __pyx_v_current_feature;
        __pyx_t_8 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_5, __pyx_pybuffernd_X.diminfo[1].strides)) &gt; (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_6, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_7, __pyx_pybuffernd_X.diminfo[1].strides))) != 0);
        __pyx_t_9 = __pyx_t_8;
      } else {
        __pyx_t_9 = __pyx_t_1;
      }
      if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1178")'> 1178:                 child += 1</pre>
<pre id='line1178' class='code' style='background-color: #FFFFff'>        __pyx_v_child = (__pyx_v_child + 1);
        goto __pyx_L9;
      }
      __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1179")'> 1179: </pre>
<pre id='line1179' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1180")'> 1180:             if X[samples[child], current_feature] &gt; tmp_value:</pre>
<pre id='line1180' class='code' style='background-color: #FFFFff'>      __pyx_t_10 = (__pyx_v_samples[__pyx_v_child]);
      __pyx_t_11 = __pyx_v_current_feature;
      __pyx_t_9 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_11, __pyx_pybuffernd_X.diminfo[1].strides)) &gt; __pyx_v_tmp_value) != 0);
      if (__pyx_t_9) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1181")'> 1181:                 samples[index] = samples[child]</pre>
<pre id='line1181' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_index]) = (__pyx_v_samples[__pyx_v_child]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1182")'> 1182:                 index = child</pre>
<pre id='line1182' class='code' style='background-color: #FFFFff'>        __pyx_v_index = __pyx_v_child;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1183")'> 1183:                 child = index * 2 + 1</pre>
<pre id='line1183' class='code' style='background-color: #FFFFff'>        __pyx_v_child = ((__pyx_v_index * 2) + 1);
        goto __pyx_L10;
      }
      /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1184")'> 1184: </pre>
<pre id='line1184' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1185")'> 1185:             else:</pre>
<pre id='line1185' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1186")'> 1186:                 break</pre>
<pre id='line1186' class='code' style='background-color: #FFFFff'>        goto __pyx_L8_break;
      }
      __pyx_L10:;
    }
    __pyx_L8_break:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1187")'> 1187: </pre>
<pre id='line1187' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1188")'> 1188:         samples[index] = tmp</pre>
<pre id='line1188' class='code' style='background-color: #FFFFff'>    (__pyx_v_samples[__pyx_v_index]) = __pyx_v_tmp;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1189")'> 1189: </pre>
<pre id='line1189' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1190")'> 1190: </pre>
<pre id='line1190' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1191")'> 1191: cdef class RandomSplitter(Splitter):</pre>
<pre id='line1191' class='code' style='background-color: #FFFFff'>struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter __pyx_base;
};
/* … */
struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter {
  struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter __pyx_base;
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1192")'> 1192:     """Splitter for finding the best random split."""</pre>
<pre id='line1192' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1193")'> 1193:     def __reduce__(self):</pre>
<pre id='line1193' class='code' style='background-color: #FFFFaa'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_14RandomSplitter_1__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_14RandomSplitter_1__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_14RandomSplitter___reduce__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_14RandomSplitter___reduce__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RandomSplitter.__reduce__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line1194")'> 1194:         return (RandomSplitter, (self.criterion,</pre>
<pre id='line1194' class='code' style='background-color: #FFFF52'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
/* … */
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1194; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 2, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;__pyx_base.random_state);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 3, __pyx_v_self-&gt;__pyx_base.random_state);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;__pyx_base.random_state);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
/* … */
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1194; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter)));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1195")'> 1195:                                  self.max_features,</pre>
<pre id='line1195' class='code' style='background-color: #FFFFd4'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.max_features);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1195; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1196")'> 1196:                                  self.min_samples_leaf,</pre>
<pre id='line1196' class='code' style='background-color: #FFFFd4'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;__pyx_base.min_samples_leaf);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1197")'> 1197:                                  self.random_state), self.__getstate__())</pre>
<pre id='line1197' class='code' style='background-color: #FFFFaa'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_getstate);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1197; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_empty_tuple, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1197; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1198")'> 1198: </pre>
<pre id='line1198' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line1199")'> 1199:     cdef void node_split(self, SIZE_t* pos, SIZE_t* feature, double* threshold):</pre>
<pre id='line1199' class='code' style='background-color: #FFFF6e'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_14RandomSplitter_node_split(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RandomSplitter *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_pos, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature, double *__pyx_v_threshold) {
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *__pyx_v_criterion = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_features;
  PyArrayObject *__pyx_v_X = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf;
  unsigned int *__pyx_v_random_state;
  double __pyx_v_best_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_best_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_best_feature;
  double __pyx_v_best_threshold;
  double __pyx_v_current_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_current_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_current_feature;
  double __pyx_v_current_threshold;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_idx;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_f_j;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_p;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_tmp;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_visited_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t __pyx_v_min_feature_value;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t __pyx_v_max_feature_value;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t __pyx_v_current_feature_value;
  CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_partition_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_partition_end;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("node_split", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.RandomSplitter.node_split", __pyx_clineno, __pyx_lineno, __pyx_filename, 0);
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_criterion);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_X);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1200")'> 1200:         """Find the best random split on node samples[start:end]."""</pre>
<pre id='line1200' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1201")'> 1201:         # Draw random splits and pick the best</pre>
<pre id='line1201' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1202")'> 1202:         cdef Criterion criterion = self.criterion</pre>
<pre id='line1202' class='code' style='background-color: #FFFFe7'>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.criterion);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  __pyx_v_criterion = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1203")'> 1203:         cdef SIZE_t* samples = self.samples</pre>
<pre id='line1203' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.samples;
  __pyx_v_samples = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1204")'> 1204:         cdef SIZE_t start = self.start</pre>
<pre id='line1204' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.start;
  __pyx_v_start = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1205")'> 1205:         cdef SIZE_t end = self.end</pre>
<pre id='line1205' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.end;
  __pyx_v_end = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1206")'> 1206: </pre>
<pre id='line1206' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1207")'> 1207:         cdef SIZE_t* features = self.features</pre>
<pre id='line1207' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = __pyx_v_self-&gt;__pyx_base.features;
  __pyx_v_features = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1208")'> 1208:         cdef SIZE_t n_features = self.n_features</pre>
<pre id='line1208' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.n_features;
  __pyx_v_n_features = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1209")'> 1209: </pre>
<pre id='line1209' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line1210")'> 1210:         cdef np.ndarray[DTYPE_t, ndim=2, mode="c"] X = self.X</pre>
<pre id='line1210' class='code' style='background-color: #FFFFb6'>  __pyx_t_1 = ((PyObject *)__pyx_v_self-&gt;__pyx_base.X);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)((PyArrayObject *)__pyx_t_1), &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 2, 0, __pyx_stack) == -1)) {
      __pyx_v_X = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1210; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
    }
  }
  __pyx_v_X = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1211")'> 1211:         cdef SIZE_t max_features = self.max_features</pre>
<pre id='line1211' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.max_features;
  __pyx_v_max_features = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1212")'> 1212:         cdef SIZE_t min_samples_leaf = self.min_samples_leaf</pre>
<pre id='line1212' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_self-&gt;__pyx_base.min_samples_leaf;
  __pyx_v_min_samples_leaf = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1213")'> 1213:         cdef unsigned int* random_state = &amp;self.rand_r_state</pre>
<pre id='line1213' class='code' style='background-color: #FFFFff'>  __pyx_v_random_state = (&amp;__pyx_v_self-&gt;__pyx_base.rand_r_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1214")'> 1214: </pre>
<pre id='line1214' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1215")'> 1215:         cdef double best_impurity = INFINITY</pre>
<pre id='line1215' class='code' style='background-color: #FFFFff'>  __pyx_v_best_impurity = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_INFINITY;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1216")'> 1216:         cdef SIZE_t best_pos = end</pre>
<pre id='line1216' class='code' style='background-color: #FFFFff'>  __pyx_v_best_pos = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1217")'> 1217:         cdef SIZE_t best_feature</pre>
<pre id='line1217' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1218")'> 1218:         cdef double best_threshold</pre>
<pre id='line1218' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1219")'> 1219: </pre>
<pre id='line1219' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1220")'> 1220:         cdef double current_impurity</pre>
<pre id='line1220' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1221")'> 1221:         cdef SIZE_t current_pos</pre>
<pre id='line1221' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1222")'> 1222:         cdef SIZE_t current_feature</pre>
<pre id='line1222' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1223")'> 1223:         cdef double current_threshold</pre>
<pre id='line1223' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1224")'> 1224: </pre>
<pre id='line1224' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1225")'> 1225:         cdef SIZE_t f_idx, f_i, f_j, p, tmp</pre>
<pre id='line1225' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1226")'> 1226:         cdef SIZE_t visited_features = 0</pre>
<pre id='line1226' class='code' style='background-color: #FFFFff'>  __pyx_v_visited_features = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1227")'> 1227:         cdef DTYPE_t min_feature_value</pre>
<pre id='line1227' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1228")'> 1228:         cdef DTYPE_t max_feature_value</pre>
<pre id='line1228' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1229")'> 1229:         cdef DTYPE_t current_feature_value</pre>
<pre id='line1229' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1230")'> 1230: </pre>
<pre id='line1230' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1231")'> 1231:         cdef SIZE_t partition_start</pre>
<pre id='line1231' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1232")'> 1232:         cdef SIZE_t partition_end</pre>
<pre id='line1232' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1233")'> 1233: </pre>
<pre id='line1233' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1234")'> 1234:         for f_idx from 0 &lt;= f_idx &lt; n_features:</pre>
<pre id='line1234' class='code' style='background-color: #FFFFff'>  __pyx_t_3 = __pyx_v_n_features;
  for (__pyx_v_f_idx = 0; __pyx_v_f_idx &lt; __pyx_t_3; __pyx_v_f_idx++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1235")'> 1235:             # Draw a feature at random</pre>
<pre id='line1235' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1236")'> 1236:             f_i = n_features - f_idx - 1</pre>
<pre id='line1236' class='code' style='background-color: #FFFFff'>    __pyx_v_f_i = ((__pyx_v_n_features - __pyx_v_f_idx) - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1237")'> 1237:             f_j = rand_int(n_features - f_idx, random_state)</pre>
<pre id='line1237' class='code' style='background-color: #FFFFff'>    __pyx_v_f_j = __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_rand_int((__pyx_v_n_features - __pyx_v_f_idx), __pyx_v_random_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1238")'> 1238: </pre>
<pre id='line1238' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1239")'> 1239:             tmp = features[f_i]</pre>
<pre id='line1239' class='code' style='background-color: #FFFFff'>    __pyx_v_tmp = (__pyx_v_features[__pyx_v_f_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1240")'> 1240:             features[f_i] = features[f_j]</pre>
<pre id='line1240' class='code' style='background-color: #FFFFff'>    (__pyx_v_features[__pyx_v_f_i]) = (__pyx_v_features[__pyx_v_f_j]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1241")'> 1241:             features[f_j] = tmp</pre>
<pre id='line1241' class='code' style='background-color: #FFFFff'>    (__pyx_v_features[__pyx_v_f_j]) = __pyx_v_tmp;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1242")'> 1242: </pre>
<pre id='line1242' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1243")'> 1243:             current_feature = features[f_i]</pre>
<pre id='line1243' class='code' style='background-color: #FFFFff'>    __pyx_v_current_feature = (__pyx_v_features[__pyx_v_f_i]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1244")'> 1244: </pre>
<pre id='line1244' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1245")'> 1245:             # Find min, max</pre>
<pre id='line1245' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1246")'> 1246:             min_feature_value = max_feature_value = X[samples[start], current_feature]</pre>
<pre id='line1246' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = (__pyx_v_samples[__pyx_v_start]);
    __pyx_t_5 = __pyx_v_current_feature;
    __pyx_t_6 = (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_5, __pyx_pybuffernd_X.diminfo[1].strides));
    __pyx_v_min_feature_value = __pyx_t_6;
    __pyx_v_max_feature_value = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1247")'> 1247: </pre>
<pre id='line1247' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1248")'> 1248:             for p from start &lt; p &lt; end:</pre>
<pre id='line1248' class='code' style='background-color: #FFFFff'>    __pyx_t_7 = __pyx_v_end;
    for (__pyx_v_p = __pyx_v_start+1; __pyx_v_p &lt; __pyx_t_7; __pyx_v_p++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1249")'> 1249:                 current_feature_value = X[samples[p], current_feature]</pre>
<pre id='line1249' class='code' style='background-color: #FFFFff'>      __pyx_t_8 = (__pyx_v_samples[__pyx_v_p]);
      __pyx_t_9 = __pyx_v_current_feature;
      __pyx_v_current_feature_value = (*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_8, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_9, __pyx_pybuffernd_X.diminfo[1].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1250")'> 1250: </pre>
<pre id='line1250' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1251")'> 1251:                 if current_feature_value &lt; min_feature_value:</pre>
<pre id='line1251' class='code' style='background-color: #FFFFff'>      __pyx_t_10 = ((__pyx_v_current_feature_value &lt; __pyx_v_min_feature_value) != 0);
      if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1252")'> 1252:                     min_feature_value = current_feature_value</pre>
<pre id='line1252' class='code' style='background-color: #FFFFff'>        __pyx_v_min_feature_value = __pyx_v_current_feature_value;
        goto __pyx_L7;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1253")'> 1253:                 elif current_feature_value &gt; max_feature_value:</pre>
<pre id='line1253' class='code' style='background-color: #FFFFff'>      __pyx_t_10 = ((__pyx_v_current_feature_value &gt; __pyx_v_max_feature_value) != 0);
      if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1254")'> 1254:                     max_feature_value = current_feature_value</pre>
<pre id='line1254' class='code' style='background-color: #FFFFff'>        __pyx_v_max_feature_value = __pyx_v_current_feature_value;
        goto __pyx_L7;
      }
      __pyx_L7:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1255")'> 1255: </pre>
<pre id='line1255' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1256")'> 1256:             if min_feature_value == max_feature_value:</pre>
<pre id='line1256' class='code' style='background-color: #FFFFff'>    __pyx_t_10 = ((__pyx_v_min_feature_value == __pyx_v_max_feature_value) != 0);
    if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1257")'> 1257:                 continue</pre>
<pre id='line1257' class='code' style='background-color: #FFFFff'>      goto __pyx_L3_continue;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1258")'> 1258: </pre>
<pre id='line1258' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1259")'> 1259:             # Draw a random threshold</pre>
<pre id='line1259' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1260")'> 1260:             current_threshold = (min_feature_value +</pre>
<pre id='line1260' class='code' style='background-color: #FFFFff'>    __pyx_v_current_threshold = (__pyx_v_min_feature_value + (__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_rand_double(__pyx_v_random_state) * (__pyx_v_max_feature_value - __pyx_v_min_feature_value)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1261")'> 1261:                                  rand_double(random_state) * (max_feature_value - min_feature_value))</pre>
<pre id='line1261' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1262")'> 1262: </pre>
<pre id='line1262' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1263")'> 1263:             if current_threshold == max_feature_value:</pre>
<pre id='line1263' class='code' style='background-color: #FFFFff'>    __pyx_t_10 = ((__pyx_v_current_threshold == __pyx_v_max_feature_value) != 0);
    if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1264")'> 1264:                 current_threshold = min_feature_value</pre>
<pre id='line1264' class='code' style='background-color: #FFFFff'>      __pyx_v_current_threshold = __pyx_v_min_feature_value;
      goto __pyx_L9;
    }
    __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1265")'> 1265: </pre>
<pre id='line1265' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1266")'> 1266:             # Partition</pre>
<pre id='line1266' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1267")'> 1267:             partition_start = start</pre>
<pre id='line1267' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1268")'> 1268:             partition_end = end</pre>
<pre id='line1268' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1269")'> 1269:             p = start</pre>
<pre id='line1269' class='code' style='background-color: #FFFFff'>    __pyx_v_p = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1270")'> 1270: </pre>
<pre id='line1270' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1271")'> 1271:             while p &lt; partition_end:</pre>
<pre id='line1271' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_10 = ((__pyx_v_p &lt; __pyx_v_partition_end) != 0);
      if (!__pyx_t_10) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1272")'> 1272:                 if X[samples[p], current_feature] &lt;= current_threshold:</pre>
<pre id='line1272' class='code' style='background-color: #FFFFff'>      __pyx_t_7 = (__pyx_v_samples[__pyx_v_p]);
      __pyx_t_11 = __pyx_v_current_feature;
      __pyx_t_10 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_11, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= __pyx_v_current_threshold) != 0);
      if (__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1273")'> 1273:                     p += 1</pre>
<pre id='line1273' class='code' style='background-color: #FFFFff'>        __pyx_v_p = (__pyx_v_p + 1);
        goto __pyx_L12;
      }
      /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1274")'> 1274: </pre>
<pre id='line1274' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1275")'> 1275:                 else:</pre>
<pre id='line1275' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1276")'> 1276:                     partition_end -= 1</pre>
<pre id='line1276' class='code' style='background-color: #FFFFff'>        __pyx_v_partition_end = (__pyx_v_partition_end - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1277")'> 1277: </pre>
<pre id='line1277' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1278")'> 1278:                     tmp = samples[partition_end]</pre>
<pre id='line1278' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_samples[__pyx_v_partition_end]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1279")'> 1279:                     samples[partition_end] = samples[p]</pre>
<pre id='line1279' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_partition_end]) = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1280")'> 1280:                     samples[p] = tmp</pre>
<pre id='line1280' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_p]) = __pyx_v_tmp;
      }
      __pyx_L12:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1281")'> 1281: </pre>
<pre id='line1281' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1282")'> 1282:             current_pos = partition_end</pre>
<pre id='line1282' class='code' style='background-color: #FFFFff'>    __pyx_v_current_pos = __pyx_v_partition_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1283")'> 1283: </pre>
<pre id='line1283' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1284")'> 1284:             # Reject if min_samples_leaf is not guaranteed</pre>
<pre id='line1284' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1285")'> 1285:             if (((current_pos - start) &lt; min_samples_leaf) or</pre>
<pre id='line1285' class='code' style='background-color: #FFFFff'>    __pyx_t_10 = (((__pyx_v_current_pos - __pyx_v_start) &lt; __pyx_v_min_samples_leaf) != 0);
    if (!__pyx_t_10) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1286")'> 1286:                 ((end - current_pos) &lt; min_samples_leaf)):</pre>
<pre id='line1286' class='code' style='background-color: #FFFFff'>      __pyx_t_12 = (((__pyx_v_end - __pyx_v_current_pos) &lt; __pyx_v_min_samples_leaf) != 0);
      __pyx_t_13 = __pyx_t_12;
    } else {
      __pyx_t_13 = __pyx_t_10;
    }
    if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1287")'> 1287:                continue</pre>
<pre id='line1287' class='code' style='background-color: #FFFFff'>      goto __pyx_L3_continue;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1288")'> 1288: </pre>
<pre id='line1288' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1289")'> 1289:             # Evaluate split</pre>
<pre id='line1289' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1290")'> 1290:             criterion.reset()</pre>
<pre id='line1290' class='code' style='background-color: #FFFFff'>    ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;reset(__pyx_v_criterion);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1291")'> 1291:             criterion.update(current_pos)</pre>
<pre id='line1291' class='code' style='background-color: #FFFFff'>    ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;update(__pyx_v_criterion, __pyx_v_current_pos);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1292")'> 1292:             current_impurity = criterion.children_impurity()</pre>
<pre id='line1292' class='code' style='background-color: #FFFFff'>    __pyx_v_current_impurity = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Criterion *)__pyx_v_criterion-&gt;__pyx_vtab)-&gt;children_impurity(__pyx_v_criterion);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1293")'> 1293: </pre>
<pre id='line1293' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1294")'> 1294:             if current_impurity &lt; best_impurity:</pre>
<pre id='line1294' class='code' style='background-color: #FFFFff'>    __pyx_t_13 = ((__pyx_v_current_impurity &lt; __pyx_v_best_impurity) != 0);
    if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1295")'> 1295:                 best_impurity = current_impurity</pre>
<pre id='line1295' class='code' style='background-color: #FFFFff'>      __pyx_v_best_impurity = __pyx_v_current_impurity;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1296")'> 1296:                 best_pos = current_pos</pre>
<pre id='line1296' class='code' style='background-color: #FFFFff'>      __pyx_v_best_pos = __pyx_v_current_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1297")'> 1297:                 best_feature = current_feature</pre>
<pre id='line1297' class='code' style='background-color: #FFFFff'>      __pyx_v_best_feature = __pyx_v_current_feature;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1298")'> 1298:                 best_threshold = current_threshold</pre>
<pre id='line1298' class='code' style='background-color: #FFFFff'>      __pyx_v_best_threshold = __pyx_v_current_threshold;
      goto __pyx_L14;
    }
    __pyx_L14:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1299")'> 1299: </pre>
<pre id='line1299' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1300")'> 1300:             # Count one more visited feature</pre>
<pre id='line1300' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1301")'> 1301:             visited_features += 1</pre>
<pre id='line1301' class='code' style='background-color: #FFFFff'>    __pyx_v_visited_features = (__pyx_v_visited_features + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1302")'> 1302: </pre>
<pre id='line1302' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1303")'> 1303:             if visited_features &gt;= max_features:</pre>
<pre id='line1303' class='code' style='background-color: #FFFFff'>    __pyx_t_13 = ((__pyx_v_visited_features &gt;= __pyx_v_max_features) != 0);
    if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1304")'> 1304:                 break</pre>
<pre id='line1304' class='code' style='background-color: #FFFFff'>      goto __pyx_L4_break;
    }
    __pyx_L3_continue:;
  }
  __pyx_L4_break:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1305")'> 1305: </pre>
<pre id='line1305' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1306")'> 1306:         # Reorganize samples into samples[start:best_pos] + samples[best_pos:end]</pre>
<pre id='line1306' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1307")'> 1307:         if best_pos &lt; end and current_feature != best_feature:</pre>
<pre id='line1307' class='code' style='background-color: #FFFFff'>  __pyx_t_13 = ((__pyx_v_best_pos &lt; __pyx_v_end) != 0);
  if (__pyx_t_13) {
    __pyx_t_10 = ((__pyx_v_current_feature != __pyx_v_best_feature) != 0);
    __pyx_t_12 = __pyx_t_10;
  } else {
    __pyx_t_12 = __pyx_t_13;
  }
  if (__pyx_t_12) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1308")'> 1308:             partition_start = start</pre>
<pre id='line1308' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_start = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1309")'> 1309:             partition_end = end</pre>
<pre id='line1309' class='code' style='background-color: #FFFFff'>    __pyx_v_partition_end = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1310")'> 1310:             p = start</pre>
<pre id='line1310' class='code' style='background-color: #FFFFff'>    __pyx_v_p = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1311")'> 1311: </pre>
<pre id='line1311' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1312")'> 1312:             while p &lt; partition_end:</pre>
<pre id='line1312' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_12 = ((__pyx_v_p &lt; __pyx_v_partition_end) != 0);
      if (!__pyx_t_12) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1313")'> 1313:                 if X[samples[p], best_feature] &lt;= best_threshold:</pre>
<pre id='line1313' class='code' style='background-color: #FFFFff'>      __pyx_t_3 = (__pyx_v_samples[__pyx_v_p]);
      __pyx_t_14 = __pyx_v_best_feature;
      __pyx_t_12 = (((*__Pyx_BufPtrCContig2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_14, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= __pyx_v_best_threshold) != 0);
      if (__pyx_t_12) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1314")'> 1314:                     p += 1</pre>
<pre id='line1314' class='code' style='background-color: #FFFFff'>        __pyx_v_p = (__pyx_v_p + 1);
        goto __pyx_L19;
      }
      /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1315")'> 1315: </pre>
<pre id='line1315' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1316")'> 1316:                 else:</pre>
<pre id='line1316' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1317")'> 1317:                     partition_end -= 1</pre>
<pre id='line1317' class='code' style='background-color: #FFFFff'>        __pyx_v_partition_end = (__pyx_v_partition_end - 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1318")'> 1318: </pre>
<pre id='line1318' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1319")'> 1319:                     tmp = samples[partition_end]</pre>
<pre id='line1319' class='code' style='background-color: #FFFFff'>        __pyx_v_tmp = (__pyx_v_samples[__pyx_v_partition_end]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1320")'> 1320:                     samples[partition_end] = samples[p]</pre>
<pre id='line1320' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_partition_end]) = (__pyx_v_samples[__pyx_v_p]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1321")'> 1321:                     samples[p] = tmp</pre>
<pre id='line1321' class='code' style='background-color: #FFFFff'>        (__pyx_v_samples[__pyx_v_p]) = __pyx_v_tmp;
      }
      __pyx_L19:;
    }
    goto __pyx_L16;
  }
  __pyx_L16:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1322")'> 1322: </pre>
<pre id='line1322' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1323")'> 1323:         # Return values</pre>
<pre id='line1323' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1324")'> 1324:         pos[0] = best_pos</pre>
<pre id='line1324' class='code' style='background-color: #FFFFff'>  (__pyx_v_pos[0]) = __pyx_v_best_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1325")'> 1325:         feature[0] = best_feature</pre>
<pre id='line1325' class='code' style='background-color: #FFFFff'>  (__pyx_v_feature[0]) = __pyx_v_best_feature;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1326")'> 1326:         threshold[0] = best_threshold</pre>
<pre id='line1326' class='code' style='background-color: #FFFFff'>  (__pyx_v_threshold[0]) = __pyx_v_best_threshold;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1327")'> 1327: </pre>
<pre id='line1327' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1328")'> 1328: </pre>
<pre id='line1328' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1329")'> 1329: # =============================================================================</pre>
<pre id='line1329' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1330")'> 1330: # Tree</pre>
<pre id='line1330' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1331")'> 1331: # =============================================================================</pre>
<pre id='line1331' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1332")'> 1332: </pre>
<pre id='line1332' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1333")'> 1333: cdef class Tree:</pre>
<pre id='line1333' class='code' style='background-color: #FFFFff'>struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t (*_add_node)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, int, int, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, double, double, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t);
  void (*_resize)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree__resize *__pyx_optional_args);
  PyObject *(*build)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, PyArrayObject *, PyArrayObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_build *__pyx_optional_args);
  PyObject *(*predict)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, PyArrayObject *, int __pyx_skip_dispatch);
  PyObject *(*apply)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, PyArrayObject *, int __pyx_skip_dispatch);
  PyObject *(*compute_feature_importances)(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *, int __pyx_skip_dispatch, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_compute_feature_importances *__pyx_optional_args);
};
static struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_vtabptr_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree;

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1334")'> 1334:     """Struct-of-arrays representation of a binary decision tree.</pre>
<pre id='line1334' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1335")'> 1335: </pre>
<pre id='line1335' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1336")'> 1336:     The binary tree is represented as a number of parallel arrays. The i-th</pre>
<pre id='line1336' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1337")'> 1337:     element of each array holds information about the node `i`. Node 0 is the</pre>
<pre id='line1337' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1338")'> 1338:     tree's root. You can find a detailed description of all arrays in</pre>
<pre id='line1338' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1339")'> 1339:     `_tree.pxd`. NOTE: Some of the arrays only apply to either leaves or split</pre>
<pre id='line1339' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1340")'> 1340:     nodes, resp. In this case the values of nodes of the other type are</pre>
<pre id='line1340' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1341")'> 1341:     arbitrary!</pre>
<pre id='line1341' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1342")'> 1342: </pre>
<pre id='line1342' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1343")'> 1343:     Attributes</pre>
<pre id='line1343' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1344")'> 1344:     ----------</pre>
<pre id='line1344' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1345")'> 1345:     node_count : int</pre>
<pre id='line1345' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1346")'> 1346:         The number of nodes (internal nodes + leaves) in the tree.</pre>
<pre id='line1346' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1347")'> 1347: </pre>
<pre id='line1347' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1348")'> 1348:     capacity : int</pre>
<pre id='line1348' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1349")'> 1349:         The current capacity (i.e., size) of the arrays.</pre>
<pre id='line1349' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1350")'> 1350: </pre>
<pre id='line1350' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1351")'> 1351:     children_left : int*</pre>
<pre id='line1351' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1352")'> 1352:         children_left[i] holds the node id of the left child of node i.</pre>
<pre id='line1352' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1353")'> 1353:         For leaves, children_left[i] == TREE_LEAF. Otherwise,</pre>
<pre id='line1353' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1354")'> 1354:         children_left[i] &gt; i. This child handles the case where</pre>
<pre id='line1354' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1355")'> 1355:         X[:, feature[i]] &lt;= threshold[i].</pre>
<pre id='line1355' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1356")'> 1356: </pre>
<pre id='line1356' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1357")'> 1357:     children_right : int*</pre>
<pre id='line1357' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1358")'> 1358:         children_right[i] holds the node id of the right child of node i.</pre>
<pre id='line1358' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1359")'> 1359:         For leaves, children_right[i] == TREE_LEAF. Otherwise,</pre>
<pre id='line1359' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1360")'> 1360:         children_right[i] &gt; i. This child handles the case where</pre>
<pre id='line1360' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1361")'> 1361:         X[:, feature[i]] &gt; threshold[i].</pre>
<pre id='line1361' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1362")'> 1362: </pre>
<pre id='line1362' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1363")'> 1363:     feature : int*</pre>
<pre id='line1363' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1364")'> 1364:         feature[i] holds the feature to split on, for the internal node i.</pre>
<pre id='line1364' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1365")'> 1365: </pre>
<pre id='line1365' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1366")'> 1366:     threshold : double*</pre>
<pre id='line1366' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1367")'> 1367:         threshold[i] holds the threshold for the internal node i.</pre>
<pre id='line1367' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1368")'> 1368: </pre>
<pre id='line1368' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1369")'> 1369:     value : double*</pre>
<pre id='line1369' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1370")'> 1370:         Contains the constant prediction value of each node.</pre>
<pre id='line1370' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1371")'> 1371: </pre>
<pre id='line1371' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1372")'> 1372:     impurity : double*</pre>
<pre id='line1372' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1373")'> 1373:         impurity[i] holds the impurity (i.e., the value of the splitting</pre>
<pre id='line1373' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1374")'> 1374:         criterion) at node i.</pre>
<pre id='line1374' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1375")'> 1375: </pre>
<pre id='line1375' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1376")'> 1376:     n_node_samples : int*</pre>
<pre id='line1376' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1377")'> 1377:         n_samples[i] holds the number of training samples reaching node i.</pre>
<pre id='line1377' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1378")'> 1378:     """</pre>
<pre id='line1378' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1379")'> 1379:     # Wrap for outside world</pre>
<pre id='line1379' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1380")'> 1380:     property n_classes:</pre>
<pre id='line1380' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1381")'> 1381:         def __get__(self):</pre>
<pre id='line1381' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9n_classes_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9n_classes_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9n_classes___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9n_classes___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.n_classes.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1382")'> 1382:             return sizet_ptr_to_ndarray(self.n_classes, self.n_outputs)</pre>
<pre id='line1382' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;n_classes, __pyx_v_self-&gt;n_outputs));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1382; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1383")'> 1383: </pre>
<pre id='line1383' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1384")'> 1384:     property children_left:</pre>
<pre id='line1384' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1385")'> 1385:         def __get__(self):</pre>
<pre id='line1385' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13children_left_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13children_left_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13children_left___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13children_left___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.children_left.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1386")'> 1386:             return sizet_ptr_to_ndarray(self.children_left, self.node_count)</pre>
<pre id='line1386' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;children_left, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1386; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1387")'> 1387: </pre>
<pre id='line1387' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1388")'> 1388:     property children_right:</pre>
<pre id='line1388' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1389")'> 1389:         def __get__(self):</pre>
<pre id='line1389' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14children_right_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14children_right_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14children_right___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14children_right___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.children_right.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1390")'> 1390:             return sizet_ptr_to_ndarray(self.children_right, self.node_count)</pre>
<pre id='line1390' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;children_right, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1390; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1391")'> 1391: </pre>
<pre id='line1391' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1392")'> 1392:     property feature:</pre>
<pre id='line1392' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1393")'> 1393:         def __get__(self):</pre>
<pre id='line1393' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7feature_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7feature_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7feature___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7feature___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.feature.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1394")'> 1394:             return sizet_ptr_to_ndarray(self.feature, self.node_count)</pre>
<pre id='line1394' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;feature, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1394; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1395")'> 1395: </pre>
<pre id='line1395' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1396")'> 1396:     property threshold:</pre>
<pre id='line1396' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1397")'> 1397:         def __get__(self):</pre>
<pre id='line1397' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9threshold_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9threshold_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9threshold___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9threshold___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.threshold.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1398")'> 1398:             return double_ptr_to_ndarray(self.threshold, self.node_count)</pre>
<pre id='line1398' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(__pyx_v_self-&gt;threshold, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1398; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1399")'> 1399: </pre>
<pre id='line1399' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1400")'> 1400:     property value:</pre>
<pre id='line1400' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1401")'> 1401:         def __get__(self):</pre>
<pre id='line1401' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5value_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5value_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5value___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5value___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  npy_intp __pyx_v_shape[3];
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.value.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1402")'> 1402:             cdef np.npy_intp shape[3]</pre>
<pre id='line1402' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1403")'> 1403: </pre>
<pre id='line1403' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1404")'> 1404:             shape[0] = &lt;np.npy_intp&gt; self.node_count</pre>
<pre id='line1404' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[0]) = ((npy_intp)__pyx_v_self-&gt;node_count);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1405")'> 1405:             shape[1] = &lt;np.npy_intp&gt; self.n_outputs</pre>
<pre id='line1405' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[1]) = ((npy_intp)__pyx_v_self-&gt;n_outputs);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1406")'> 1406:             shape[2] = &lt;np.npy_intp&gt; self.max_n_classes</pre>
<pre id='line1406' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[2]) = ((npy_intp)__pyx_v_self-&gt;max_n_classes);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1407")'> 1407: </pre>
<pre id='line1407' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1408")'> 1408:             return np.PyArray_SimpleNewFromData(</pre>
<pre id='line1408' class='code' style='background-color: #FFFF9f'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
/* … */
  __pyx_t_1 = <span class='py_c_api'>PyArray_SimpleNewFromData</span>(3, __pyx_v_shape, NPY_DOUBLE, __pyx_v_self-&gt;value);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1408; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1409")'> 1409:                 3, shape, np.NPY_DOUBLE, self.value)</pre>
<pre id='line1409' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1410")'> 1410: </pre>
<pre id='line1410' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1411")'> 1411:     property impurity:</pre>
<pre id='line1411' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1412")'> 1412:         def __get__(self):</pre>
<pre id='line1412' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8impurity_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8impurity_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8impurity___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8impurity___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.impurity.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1413")'> 1413:             return double_ptr_to_ndarray(self.impurity, self.node_count)</pre>
<pre id='line1413' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(__pyx_v_self-&gt;impurity, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1413; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1414")'> 1414: </pre>
<pre id='line1414' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1415")'> 1415:     property n_node_samples:</pre>
<pre id='line1415' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1416")'> 1416:         def __get__(self):</pre>
<pre id='line1416' class='code' style='background-color: #FFFFc4'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14n_node_samples_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14n_node_samples_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14n_node_samples___get__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14n_node_samples___get__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__get__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.n_node_samples.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1417")'> 1417:             return sizet_ptr_to_ndarray(self.n_node_samples, self.node_count)</pre>
<pre id='line1417' class='code' style='background-color: #FFFFe7'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;n_node_samples, __pyx_v_self-&gt;node_count));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1417; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1418")'> 1418: </pre>
<pre id='line1418' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF14' onclick='toggleDiv("line1419")'> 1419:     def __cinit__(self, int n_features, np.ndarray[SIZE_t, ndim=1] n_classes,</pre>
<pre id='line1419' class='code' style='background-color: #FFFF14'>/* Python wrapper */
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_n_features;
  PyArrayObject *__pyx_v_n_classes = 0;
  int __pyx_v_n_outputs;
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_splitter = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_depth;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_split;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf;
  PyObject *__pyx_v_random_state = 0;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_n_features,&amp;__pyx_n_s_n_classes,&amp;__pyx_n_s_n_outputs,&amp;__pyx_n_s_splitter,&amp;__pyx_n_s_max_depth,&amp;__pyx_n_s_min_samples_split,&amp;__pyx_n_s_min_samples_leaf,&amp;__pyx_n_s_random_state,0};
    PyObject* values[8] = {0,0,0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_features)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_classes)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 1); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_n_outputs)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 2); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  3:
        if (likely((values[3] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_splitter)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 3); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  4:
        if (likely((values[4] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_max_depth)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 4); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  5:
        if (likely((values[5] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_min_samples_split)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 5); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  6:
        if (likely((values[6] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_min_samples_leaf)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 6); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  7:
        if (likely((values[7] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_random_state)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, 7); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__cinit__") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 8) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
      values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
      values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
      values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
    }
    __pyx_v_n_features = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_n_features == (int)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_n_classes = ((PyArrayObject *)values[1]);
    __pyx_v_n_outputs = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[2]);<span class='error_goto'> if (unlikely((__pyx_v_n_outputs == (int)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1420; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_splitter = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)values[3]);
    __pyx_v_max_depth = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[4]);<span class='error_goto'> if (unlikely((__pyx_v_max_depth == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1420; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_min_samples_split = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[5]);<span class='error_goto'> if (unlikely((__pyx_v_min_samples_split == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1421; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_min_samples_leaf = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(values[6]);<span class='error_goto'> if (unlikely((__pyx_v_min_samples_leaf == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1421; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_random_state = values[7];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 8, 8, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_n_classes), __pyx_ptype_5numpy_ndarray, 1, "n_classes", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_splitter), __pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter, 1, "splitter", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1420; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree___cinit__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), __pyx_v_n_features, __pyx_v_n_classes, __pyx_v_n_outputs, __pyx_v_splitter, __pyx_v_max_depth, __pyx_v_min_samples_split, __pyx_v_min_samples_leaf, __pyx_v_random_state);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = -1;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static int __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree___cinit__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, int __pyx_v_n_features, PyArrayObject *__pyx_v_n_classes, int __pyx_v_n_outputs, struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_splitter, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_depth, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_split, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_min_samples_leaf, PyObject *__pyx_v_random_state) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_n_classes;
  __Pyx_Buffer __pyx_pybuffer_n_classes;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__cinit__", 0);
  __pyx_pybuffer_n_classes.pybuffer.buf = NULL;
  __pyx_pybuffer_n_classes.refcount = 0;
  __pyx_pybuffernd_n_classes.data = NULL;
  __pyx_pybuffernd_n_classes.rcbuffer = &amp;__pyx_pybuffer_n_classes;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_n_classes, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1419; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_n_classes.diminfo[0].strides = __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_n_classes.diminfo[0].shape = __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1420")'> 1420:                         int n_outputs, Splitter splitter, SIZE_t max_depth,</pre>
<pre id='line1420' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1421")'> 1421:                         SIZE_t min_samples_split, SIZE_t min_samples_leaf,</pre>
<pre id='line1421' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1422")'> 1422:                         object random_state):</pre>
<pre id='line1422' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1423")'> 1423:         """Constructor."""</pre>
<pre id='line1423' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1424")'> 1424:         # Input/Output layout</pre>
<pre id='line1424' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1425")'> 1425:         self.n_features = n_features</pre>
<pre id='line1425' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_features = __pyx_v_n_features;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1426")'> 1426:         self.n_outputs = n_outputs</pre>
<pre id='line1426' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_outputs = __pyx_v_n_outputs;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1427")'> 1427:         self.n_classes = &lt;SIZE_t*&gt; malloc(n_outputs * sizeof(SIZE_t))</pre>
<pre id='line1427' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_classes = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)malloc((__pyx_v_n_outputs * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1428")'> 1428: </pre>
<pre id='line1428' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1429")'> 1429:         if self.n_classes == NULL:</pre>
<pre id='line1429' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_self-&gt;n_classes == NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1430")'> 1430:             raise MemoryError()</pre>
<pre id='line1430' class='code' style='background-color: #FFFFaa'>    <span class='py_c_api'>PyErr_NoMemory</span>(); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1430; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1431")'> 1431: </pre>
<pre id='line1431' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line1432")'> 1432:         self.max_n_classes = np.max(n_classes)</pre>
<pre id='line1432' class='code' style='background-color: #FFFF57'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_max);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_n_classes));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_v_n_classes));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_n_classes));
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((__pyx_t_5 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_self-&gt;max_n_classes = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1433")'> 1433:         self.value_stride = self.n_outputs * self.max_n_classes</pre>
<pre id='line1433' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;value_stride = (__pyx_v_self-&gt;n_outputs * __pyx_v_self-&gt;max_n_classes);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1434")'> 1434: </pre>
<pre id='line1434' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1435")'> 1435:         cdef SIZE_t k</pre>
<pre id='line1435' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1436")'> 1436: </pre>
<pre id='line1436' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1437")'> 1437:         for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line1437' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_n_outputs;
  for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_6; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1438")'> 1438:             self.n_classes[k] = n_classes[k]</pre>
<pre id='line1438' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = __pyx_v_k;
    (__pyx_v_self-&gt;n_classes[__pyx_v_k]) = (*__Pyx_BufPtrStrided1d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *, __pyx_pybuffernd_n_classes.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_n_classes.diminfo[0].strides));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1439")'> 1439: </pre>
<pre id='line1439' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1440")'> 1440:         # Parameters</pre>
<pre id='line1440' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1441")'> 1441:         self.splitter = splitter</pre>
<pre id='line1441' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_splitter));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_splitter));
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;splitter);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_self-&gt;splitter));
  __pyx_v_self-&gt;splitter = __pyx_v_splitter;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1442")'> 1442:         self.max_depth = max_depth</pre>
<pre id='line1442' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;max_depth = __pyx_v_max_depth;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1443")'> 1443:         self.min_samples_split = min_samples_split</pre>
<pre id='line1443' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;min_samples_split = __pyx_v_min_samples_split;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1444")'> 1444:         self.min_samples_leaf = min_samples_leaf</pre>
<pre id='line1444' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;min_samples_leaf = __pyx_v_min_samples_leaf;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1445")'> 1445:         self.random_state = random_state</pre>
<pre id='line1445' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_random_state);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_random_state);
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_v_self-&gt;random_state);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self-&gt;random_state);
  __pyx_v_self-&gt;random_state = __pyx_v_random_state;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1446")'> 1446: </pre>
<pre id='line1446' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1447")'> 1447:         # Inner structures</pre>
<pre id='line1447' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1448")'> 1448:         self.node_count = 0</pre>
<pre id='line1448' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;node_count = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1449")'> 1449:         self.capacity = 0</pre>
<pre id='line1449' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;capacity = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1450")'> 1450:         self.children_left = NULL</pre>
<pre id='line1450' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;children_left = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1451")'> 1451:         self.children_right = NULL</pre>
<pre id='line1451' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;children_right = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1452")'> 1452:         self.feature = NULL</pre>
<pre id='line1452' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;feature = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1453")'> 1453:         self.threshold = NULL</pre>
<pre id='line1453' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;threshold = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1454")'> 1454:         self.value = NULL</pre>
<pre id='line1454' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;value = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1455")'> 1455:         self.impurity = NULL</pre>
<pre id='line1455' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;impurity = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1456")'> 1456:         self.n_node_samples = NULL</pre>
<pre id='line1456' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;n_node_samples = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1457")'> 1457: </pre>
<pre id='line1457' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1458")'> 1458:     def __dealloc__(self):</pre>
<pre id='line1458' class='code' style='background-color: #FFFFff'>/* Python wrapper */
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_3__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_3__dealloc__(PyObject *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__ (wrapper)", 0);
  __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_2__dealloc__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}

static void __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_2__dealloc__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__dealloc__", 0);
/* … */
  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1459")'> 1459:         """Destructor."""</pre>
<pre id='line1459' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1460")'> 1460:         # Free all inner structures</pre>
<pre id='line1460' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1461")'> 1461:         free(self.n_classes)</pre>
<pre id='line1461' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;n_classes);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1462")'> 1462:         free(self.children_left)</pre>
<pre id='line1462' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;children_left);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1463")'> 1463:         free(self.children_right)</pre>
<pre id='line1463' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;children_right);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1464")'> 1464:         free(self.feature)</pre>
<pre id='line1464' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;feature);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1465")'> 1465:         free(self.threshold)</pre>
<pre id='line1465' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;threshold);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1466")'> 1466:         free(self.value)</pre>
<pre id='line1466' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;value);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1467")'> 1467:         free(self.impurity)</pre>
<pre id='line1467' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;impurity);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1468")'> 1468:         free(self.n_node_samples)</pre>
<pre id='line1468' class='code' style='background-color: #FFFFff'>  free(__pyx_v_self-&gt;n_node_samples);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1469")'> 1469: </pre>
<pre id='line1469' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF86' onclick='toggleDiv("line1470")'> 1470:     def __reduce__(self):</pre>
<pre id='line1470' class='code' style='background-color: #FFFF86'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_4__reduce__[] = "Reduce re-implementation, for pickling.";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_5__reduce__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_4__reduce__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_4__reduce__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__reduce__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.__reduce__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1471")'> 1471:         """Reduce re-implementation, for pickling."""</pre>
<pre id='line1471' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line1472")'> 1472:         return (Tree, (self.n_features,</pre>
<pre id='line1472' class='code' style='background-color: #FFFF44'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;n_features);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1472; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
  __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(8);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1472; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 2, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_self-&gt;splitter));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 3, ((PyObject *)__pyx_v_self-&gt;splitter));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_self-&gt;splitter));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 4, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 5, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 6, __pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self-&gt;random_state);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 7, __pyx_v_self-&gt;random_state);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_self-&gt;random_state);
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
/* … */
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1472; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, ((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree)));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)((PyObject*)__pyx_ptype_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1, __pyx_t_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 2, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  __pyx_t_7 = 0;
  __pyx_t_5 = 0;
  __pyx_r = __pyx_t_6;
  __pyx_t_6 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1473")'> 1473:                        sizet_ptr_to_ndarray(self.n_classes, self.n_outputs),</pre>
<pre id='line1473' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;n_classes, __pyx_v_self-&gt;n_outputs));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1473; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1474")'> 1474:                        self.n_outputs,</pre>
<pre id='line1474' class='code' style='background-color: #FFFFd4'>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;n_outputs);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1474; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1475")'> 1475:                        self.splitter,</pre>
<pre id='line1475' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1476")'> 1476:                        self.max_depth,</pre>
<pre id='line1476' class='code' style='background-color: #FFFFd4'>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;max_depth);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1476; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1477")'> 1477:                        self.min_samples_split,</pre>
<pre id='line1477' class='code' style='background-color: #FFFFd4'>  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;min_samples_split);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1477; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1478")'> 1478:                        self.min_samples_leaf,</pre>
<pre id='line1478' class='code' style='background-color: #FFFFd4'>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;min_samples_leaf);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1478; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1479")'> 1479:                        self.random_state), self.__getstate__())</pre>
<pre id='line1479' class='code' style='background-color: #FFFFaa'>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_getstate);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1479; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_6, __pyx_empty_tuple, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1479; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1480")'> 1480: </pre>
<pre id='line1480' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line1481")'> 1481:     def __getstate__(self):</pre>
<pre id='line1481' class='code' style='background-color: #FFFFb6'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_6__getstate__[] = "Getstate re-implementation, for pickling.";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_7__getstate__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_6__getstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_6__getstate__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self) {
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__getstate__", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.__getstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_d);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1482")'> 1482:         """Getstate re-implementation, for pickling."""</pre>
<pre id='line1482' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1483")'> 1483:         d = {}</pre>
<pre id='line1483' class='code' style='background-color: #FFFFaa'>  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1483; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_d = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1484")'> 1484: </pre>
<pre id='line1484' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1485")'> 1485:         d["node_count"] = self.node_count</pre>
<pre id='line1485' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;node_count);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1485; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_node_count, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1485; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1486")'> 1486:         d["capacity"] = self.capacity</pre>
<pre id='line1486' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;capacity);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1486; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_capacity, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1486; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1487")'> 1487:         d["children_left"] = sizet_ptr_to_ndarray(self.children_left, self.capacity)</pre>
<pre id='line1487' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;children_left, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1487; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_children_left, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1487; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1488")'> 1488:         d["children_right"] = sizet_ptr_to_ndarray(self.children_right, self.capacity)</pre>
<pre id='line1488' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;children_right, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1488; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_children_right, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1488; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1489")'> 1489:         d["feature"] = sizet_ptr_to_ndarray(self.feature, self.capacity)</pre>
<pre id='line1489' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;feature, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_feature, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1490")'> 1490:         d["threshold"] = double_ptr_to_ndarray(self.threshold, self.capacity)</pre>
<pre id='line1490' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(__pyx_v_self-&gt;threshold, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1490; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_threshold, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1490; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1491")'> 1491:         d["value"] = double_ptr_to_ndarray(self.value, self.capacity * self.value_stride)</pre>
<pre id='line1491' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(__pyx_v_self-&gt;value, (__pyx_v_self-&gt;capacity * __pyx_v_self-&gt;value_stride)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1491; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_value, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1491; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1492")'> 1492:         d["impurity"] = double_ptr_to_ndarray(self.impurity, self.capacity)</pre>
<pre id='line1492' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(__pyx_v_self-&gt;impurity, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1492; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_impurity, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1492; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1493")'> 1493:         d["n_node_samples"] = sizet_ptr_to_ndarray(self.n_node_samples, self.capacity)</pre>
<pre id='line1493' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = ((PyObject *)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_v_self-&gt;n_node_samples, __pyx_v_self-&gt;capacity));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1493; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (unlikely(<span class='py_c_api'>PyDict_SetItem</span>(__pyx_v_d, __pyx_n_s_n_node_samples, __pyx_t_1) &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1493; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1494")'> 1494: </pre>
<pre id='line1494' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1495")'> 1495:         return d</pre>
<pre id='line1495' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_d);
  __pyx_r = __pyx_v_d;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1496")'> 1496: </pre>
<pre id='line1496' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line1497")'> 1497:     def __setstate__(self, d):</pre>
<pre id='line1497' class='code' style='background-color: #FFFFb6'>/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8__setstate__[] = "Setstate re-implementation, for unpickling.";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_9__setstate__(PyObject *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__ (wrapper)", 0);
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8__setstate__(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), ((PyObject *)__pyx_v_d));

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_8__setstate__(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyObject *__pyx_v_d) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature;
  double *__pyx_v_threshold;
  double *__pyx_v_value;
  double *__pyx_v_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_node_samples;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("__setstate__", 0);
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.__setstate__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1498")'> 1498:         """Setstate re-implementation, for unpickling."""</pre>
<pre id='line1498' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1499")'> 1499:         self._resize(d["capacity"])</pre>
<pre id='line1499' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_capacity);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1499; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_1);<span class='error_goto'> if (unlikely((__pyx_t_2 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1499; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.capacity = __pyx_t_2;
  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_resize(__pyx_v_self, &amp;__pyx_t_3); 
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1500")'> 1500:         self.node_count = d["node_count"]</pre>
<pre id='line1500' class='code' style='background-color: #FFFF8d'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_node_count);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1500; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_As_Py_intptr_t</span>(__pyx_t_1);<span class='error_goto'> if (unlikely((__pyx_t_2 == (npy_intp)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1500; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_self-&gt;node_count = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1501")'> 1501: </pre>
<pre id='line1501' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1502")'> 1502:         cdef SIZE_t* children_left = &lt;SIZE_t*&gt; (&lt;np.ndarray&gt; d["children_left"]).data</pre>
<pre id='line1502' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_children_left);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1502; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_children_left = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1503")'> 1503:         cdef SIZE_t* children_right =  &lt;SIZE_t*&gt; (&lt;np.ndarray&gt; d["children_right"]).data</pre>
<pre id='line1503' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_children_right);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1503; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_children_right = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1504")'> 1504:         cdef SIZE_t* feature = &lt;SIZE_t*&gt; (&lt;np.ndarray&gt; d["feature"]).data</pre>
<pre id='line1504' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_feature);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1504; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_feature = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1505")'> 1505:         cdef double* threshold = &lt;double*&gt; (&lt;np.ndarray&gt; d["threshold"]).data</pre>
<pre id='line1505' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_threshold);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1505; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_threshold = ((double *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1506")'> 1506:         cdef double* value = &lt;double*&gt; (&lt;np.ndarray&gt; d["value"]).data</pre>
<pre id='line1506' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_value);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1506; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_value = ((double *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1507")'> 1507:         cdef double* impurity = &lt;double*&gt; (&lt;np.ndarray&gt; d["impurity"]).data</pre>
<pre id='line1507' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_impurity);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1507; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_impurity = ((double *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line1508")'> 1508:         cdef SIZE_t* n_node_samples = &lt;SIZE_t*&gt; (&lt;np.ndarray&gt; d["n_node_samples"]).data</pre>
<pre id='line1508' class='code' style='background-color: #FFFF9f'>  __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_d, __pyx_n_s_n_node_samples);<span class='error_goto'> if (unlikely(__pyx_t_1 == NULL)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1508; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>;
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_v_n_node_samples = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)((PyArrayObject *)__pyx_t_1)-&gt;data);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1509")'> 1509: </pre>
<pre id='line1509' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1510")'> 1510:         memcpy(self.children_left, children_left, self.capacity * sizeof(SIZE_t))</pre>
<pre id='line1510' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;children_left, __pyx_v_children_left, (__pyx_v_self-&gt;capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1511")'> 1511:         memcpy(self.children_right, children_right, self.capacity * sizeof(SIZE_t))</pre>
<pre id='line1511' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;children_right, __pyx_v_children_right, (__pyx_v_self-&gt;capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1512")'> 1512:         memcpy(self.feature, feature, self.capacity * sizeof(SIZE_t))</pre>
<pre id='line1512' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;feature, __pyx_v_feature, (__pyx_v_self-&gt;capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1513")'> 1513:         memcpy(self.threshold, threshold, self.capacity * sizeof(double))</pre>
<pre id='line1513' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;threshold, __pyx_v_threshold, (__pyx_v_self-&gt;capacity * (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1514")'> 1514:         memcpy(self.value, value, self.capacity * self.value_stride * sizeof(double))</pre>
<pre id='line1514' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;value, __pyx_v_value, ((__pyx_v_self-&gt;capacity * __pyx_v_self-&gt;value_stride) * (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1515")'> 1515:         memcpy(self.impurity, impurity, self.capacity * sizeof(double))</pre>
<pre id='line1515' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;impurity, __pyx_v_impurity, (__pyx_v_self-&gt;capacity * (sizeof(double))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1516")'> 1516:         memcpy(self.n_node_samples, n_node_samples, self.capacity * sizeof(SIZE_t))</pre>
<pre id='line1516' class='code' style='background-color: #FFFFff'>  memcpy(__pyx_v_self-&gt;n_node_samples, __pyx_v_n_node_samples, (__pyx_v_self-&gt;capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1517")'> 1517: </pre>
<pre id='line1517' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1518")'> 1518:     cdef void _resize(self, int capacity=-1):</pre>
<pre id='line1518' class='code' style='background-color: #FFFFd4'>static void __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree__resize(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree__resize *__pyx_optional_args) {
  int __pyx_v_capacity = ((int)-1);
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_tmp_children_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_tmp_children_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_tmp_feature;
  double *__pyx_v_tmp_threshold;
  double *__pyx_v_tmp_value;
  double *__pyx_v_tmp_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_tmp_n_node_samples;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_resize", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_capacity = __pyx_optional_args-&gt;capacity;
    }
  }
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree._resize", __pyx_clineno, __pyx_lineno, __pyx_filename, 0);
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1519")'> 1519:         """Resize all inner arrays to `capacity`, if `capacity` &lt; 0, then</pre>
<pre id='line1519' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1520")'> 1520:            double the size of the inner arrays."""</pre>
<pre id='line1520' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1521")'> 1521:         if capacity == self.capacity:</pre>
<pre id='line1521' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_capacity == __pyx_v_self-&gt;capacity) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1522")'> 1522:             return</pre>
<pre id='line1522' class='code' style='background-color: #FFFFff'>    goto __pyx_L0;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1523")'> 1523: </pre>
<pre id='line1523' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1524")'> 1524:         if capacity &lt; 0:</pre>
<pre id='line1524' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_capacity &lt; 0) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1525")'> 1525:             if self.capacity &lt;= 0:</pre>
<pre id='line1525' class='code' style='background-color: #FFFFff'>    __pyx_t_1 = ((__pyx_v_self-&gt;capacity &lt;= 0) != 0);
    if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1526")'> 1526:                 capacity = 3 # default initial value</pre>
<pre id='line1526' class='code' style='background-color: #FFFFff'>      __pyx_v_capacity = 3;
      goto __pyx_L5;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1527")'> 1527:             else:</pre>
<pre id='line1527' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1528")'> 1528:                 capacity = 2 * self.capacity</pre>
<pre id='line1528' class='code' style='background-color: #FFFFff'>      __pyx_v_capacity = (2 * __pyx_v_self-&gt;capacity);
    }
    __pyx_L5:;
    goto __pyx_L4;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1529")'> 1529: </pre>
<pre id='line1529' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1530")'> 1530:         self.capacity = capacity</pre>
<pre id='line1530' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;capacity = __pyx_v_capacity;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1531")'> 1531: </pre>
<pre id='line1531' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1532")'> 1532:         cdef SIZE_t* tmp_children_left = &lt;SIZE_t*&gt; realloc(self.children_left, capacity * sizeof(SIZE_t))</pre>
<pre id='line1532' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_children_left = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)realloc(__pyx_v_self-&gt;children_left, (__pyx_v_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1533")'> 1533:         if tmp_children_left != NULL:</pre>
<pre id='line1533' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_children_left != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1534")'> 1534:             self.children_left = tmp_children_left</pre>
<pre id='line1534' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;children_left = __pyx_v_tmp_children_left;
    goto __pyx_L6;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1535")'> 1535: </pre>
<pre id='line1535' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1536")'> 1536:         cdef SIZE_t* tmp_children_right = &lt;SIZE_t*&gt; realloc(self.children_right, capacity * sizeof(SIZE_t))</pre>
<pre id='line1536' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_children_right = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)realloc(__pyx_v_self-&gt;children_right, (__pyx_v_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1537")'> 1537:         if tmp_children_right != NULL:</pre>
<pre id='line1537' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_children_right != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1538")'> 1538:             self.children_right = tmp_children_right</pre>
<pre id='line1538' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;children_right = __pyx_v_tmp_children_right;
    goto __pyx_L7;
  }
  __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1539")'> 1539: </pre>
<pre id='line1539' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1540")'> 1540:         cdef SIZE_t* tmp_feature = &lt;SIZE_t*&gt; realloc(self.feature, capacity * sizeof(SIZE_t))</pre>
<pre id='line1540' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_feature = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)realloc(__pyx_v_self-&gt;feature, (__pyx_v_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1541")'> 1541:         if tmp_feature != NULL:</pre>
<pre id='line1541' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_feature != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1542")'> 1542:             self.feature = tmp_feature</pre>
<pre id='line1542' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;feature = __pyx_v_tmp_feature;
    goto __pyx_L8;
  }
  __pyx_L8:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1543")'> 1543: </pre>
<pre id='line1543' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1544")'> 1544:         cdef double* tmp_threshold = &lt;double*&gt; realloc(self.threshold, capacity * sizeof(double))</pre>
<pre id='line1544' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_threshold = ((double *)realloc(__pyx_v_self-&gt;threshold, (__pyx_v_capacity * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1545")'> 1545:         if tmp_threshold != NULL:</pre>
<pre id='line1545' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_threshold != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1546")'> 1546:             self.threshold = tmp_threshold</pre>
<pre id='line1546' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;threshold = __pyx_v_tmp_threshold;
    goto __pyx_L9;
  }
  __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1547")'> 1547: </pre>
<pre id='line1547' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1548")'> 1548:         cdef double* tmp_value = &lt;double*&gt; realloc(self.value, capacity * self.value_stride * sizeof(double))</pre>
<pre id='line1548' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_value = ((double *)realloc(__pyx_v_self-&gt;value, ((__pyx_v_capacity * __pyx_v_self-&gt;value_stride) * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1549")'> 1549:         if tmp_value != NULL:</pre>
<pre id='line1549' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_value != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1550")'> 1550:             self.value = tmp_value</pre>
<pre id='line1550' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;value = __pyx_v_tmp_value;
    goto __pyx_L10;
  }
  __pyx_L10:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1551")'> 1551: </pre>
<pre id='line1551' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1552")'> 1552:         cdef double* tmp_impurity = &lt;double*&gt; realloc(self.impurity, capacity * sizeof(double))</pre>
<pre id='line1552' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_impurity = ((double *)realloc(__pyx_v_self-&gt;impurity, (__pyx_v_capacity * (sizeof(double)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1553")'> 1553:         if tmp_impurity != NULL:</pre>
<pre id='line1553' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_impurity != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1554")'> 1554:             self.impurity = tmp_impurity</pre>
<pre id='line1554' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;impurity = __pyx_v_tmp_impurity;
    goto __pyx_L11;
  }
  __pyx_L11:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1555")'> 1555: </pre>
<pre id='line1555' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1556")'> 1556:         cdef SIZE_t* tmp_n_node_samples = &lt;SIZE_t*&gt; realloc(self.n_node_samples, capacity * sizeof(SIZE_t))</pre>
<pre id='line1556' class='code' style='background-color: #FFFFff'>  __pyx_v_tmp_n_node_samples = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)realloc(__pyx_v_self-&gt;n_node_samples, (__pyx_v_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1557")'> 1557:         if tmp_n_node_samples != NULL:</pre>
<pre id='line1557' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_n_node_samples != NULL) != 0);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1558")'> 1558:             self.n_node_samples = tmp_n_node_samples</pre>
<pre id='line1558' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;n_node_samples = __pyx_v_tmp_n_node_samples;
    goto __pyx_L12;
  }
  __pyx_L12:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1559")'> 1559: </pre>
<pre id='line1559' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1560")'> 1560:         if ((tmp_children_left == NULL) or</pre>
<pre id='line1560' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = ((__pyx_v_tmp_children_left == NULL) != 0);
  if (!__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1561")'> 1561:             (tmp_children_right == NULL) or</pre>
<pre id='line1561' class='code' style='background-color: #FFFFff'>    __pyx_t_2 = ((__pyx_v_tmp_children_right == NULL) != 0);
    if (!__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1562")'> 1562:             (tmp_feature == NULL) or</pre>
<pre id='line1562' class='code' style='background-color: #FFFFff'>      __pyx_t_3 = ((__pyx_v_tmp_feature == NULL) != 0);
      if (!__pyx_t_3) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1563")'> 1563:             (tmp_threshold == NULL) or</pre>
<pre id='line1563' class='code' style='background-color: #FFFFff'>        __pyx_t_4 = ((__pyx_v_tmp_threshold == NULL) != 0);
        if (!__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1564")'> 1564:             (tmp_value == NULL) or</pre>
<pre id='line1564' class='code' style='background-color: #FFFFff'>          __pyx_t_5 = ((__pyx_v_tmp_value == NULL) != 0);
          if (!__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1565")'> 1565:             (tmp_impurity == NULL) or</pre>
<pre id='line1565' class='code' style='background-color: #FFFFff'>            __pyx_t_6 = ((__pyx_v_tmp_impurity == NULL) != 0);
            if (!__pyx_t_6) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1566")'> 1566:             (tmp_n_node_samples == NULL)):</pre>
<pre id='line1566' class='code' style='background-color: #FFFFff'>              __pyx_t_7 = ((__pyx_v_tmp_n_node_samples == NULL) != 0);
              __pyx_t_8 = __pyx_t_7;
            } else {
              __pyx_t_8 = __pyx_t_6;
            }
            __pyx_t_6 = __pyx_t_8;
          } else {
            __pyx_t_6 = __pyx_t_5;
          }
          __pyx_t_5 = __pyx_t_6;
        } else {
          __pyx_t_5 = __pyx_t_4;
        }
        __pyx_t_4 = __pyx_t_5;
      } else {
        __pyx_t_4 = __pyx_t_3;
      }
      __pyx_t_3 = __pyx_t_4;
    } else {
      __pyx_t_3 = __pyx_t_2;
    }
    __pyx_t_2 = __pyx_t_3;
  } else {
    __pyx_t_2 = __pyx_t_1;
  }
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line1567")'> 1567:             raise MemoryError()</pre>
<pre id='line1567' class='code' style='background-color: #FFFFaa'>    <span class='py_c_api'>PyErr_NoMemory</span>(); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1567; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1568")'> 1568: </pre>
<pre id='line1568' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1569")'> 1569:         # if capacity smaller than node_count, adjust the counter</pre>
<pre id='line1569' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1570")'> 1570:         if capacity &lt; self.node_count:</pre>
<pre id='line1570' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((__pyx_v_capacity &lt; __pyx_v_self-&gt;node_count) != 0);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1571")'> 1571:             self.node_count = capacity</pre>
<pre id='line1571' class='code' style='background-color: #FFFFff'>    __pyx_v_self-&gt;node_count = __pyx_v_capacity;
    goto __pyx_L14;
  }
  __pyx_L14:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1572")'> 1572: </pre>
<pre id='line1572' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1573")'> 1573:     cdef SIZE_t _add_node(self, SIZE_t parent,</pre>
<pre id='line1573' class='code' style='background-color: #FFFFff'>static __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree__add_node(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_parent, int __pyx_v_is_left, int __pyx_v_is_leaf, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_feature, double __pyx_v_threshold, double __pyx_v_impurity, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_node_samples) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node_id;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("_add_node", 0);
/* … */
  /* function exit code */
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1574")'> 1574:                                 bint is_left,</pre>
<pre id='line1574' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1575")'> 1575:                                 bint is_leaf,</pre>
<pre id='line1575' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1576")'> 1576:                                 SIZE_t feature,</pre>
<pre id='line1576' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1577")'> 1577:                                 double threshold,</pre>
<pre id='line1577' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1578")'> 1578:                                 double impurity,</pre>
<pre id='line1578' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1579")'> 1579:                                 SIZE_t n_node_samples):</pre>
<pre id='line1579' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1580")'> 1580:         """Add a node to the tree. The new node registers itself as</pre>
<pre id='line1580' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1581")'> 1581:            the child of its parent. """</pre>
<pre id='line1581' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1582")'> 1582:         cdef SIZE_t node_id = self.node_count</pre>
<pre id='line1582' class='code' style='background-color: #FFFFff'>  __pyx_t_1 = __pyx_v_self-&gt;node_count;
  __pyx_v_node_id = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1583")'> 1583: </pre>
<pre id='line1583' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1584")'> 1584:         if node_id &gt;= self.capacity:</pre>
<pre id='line1584' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((__pyx_v_node_id &gt;= __pyx_v_self-&gt;capacity) != 0);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1585")'> 1585:             self._resize()</pre>
<pre id='line1585' class='code' style='background-color: #FFFFff'>    ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_resize(__pyx_v_self, NULL);
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1586")'> 1586: </pre>
<pre id='line1586' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1587")'> 1587:         self.impurity[node_id] = impurity</pre>
<pre id='line1587' class='code' style='background-color: #FFFFff'>  (__pyx_v_self-&gt;impurity[__pyx_v_node_id]) = __pyx_v_impurity;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1588")'> 1588:         self.n_node_samples[node_id] = n_node_samples</pre>
<pre id='line1588' class='code' style='background-color: #FFFFff'>  (__pyx_v_self-&gt;n_node_samples[__pyx_v_node_id]) = __pyx_v_n_node_samples;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1589")'> 1589: </pre>
<pre id='line1589' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1590")'> 1590:         if parent != _TREE_UNDEFINED:</pre>
<pre id='line1590' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((__pyx_v_parent != __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_UNDEFINED) != 0);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1591")'> 1591:             if is_left:</pre>
<pre id='line1591' class='code' style='background-color: #FFFFff'>    __pyx_t_2 = (__pyx_v_is_left != 0);
    if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1592")'> 1592:                 self.children_left[parent] = node_id</pre>
<pre id='line1592' class='code' style='background-color: #FFFFff'>      (__pyx_v_self-&gt;children_left[__pyx_v_parent]) = __pyx_v_node_id;
      goto __pyx_L5;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1593")'> 1593:             else:</pre>
<pre id='line1593' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1594")'> 1594:                 self.children_right[parent] = node_id</pre>
<pre id='line1594' class='code' style='background-color: #FFFFff'>      (__pyx_v_self-&gt;children_right[__pyx_v_parent]) = __pyx_v_node_id;
    }
    __pyx_L5:;
    goto __pyx_L4;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1595")'> 1595: </pre>
<pre id='line1595' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1596")'> 1596:         if not is_leaf:</pre>
<pre id='line1596' class='code' style='background-color: #FFFFff'>  __pyx_t_2 = ((!(__pyx_v_is_leaf != 0)) != 0);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1597")'> 1597:             # children_left and children_right will be set later</pre>
<pre id='line1597' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1598")'> 1598:             self.feature[node_id] = feature</pre>
<pre id='line1598' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;feature[__pyx_v_node_id]) = __pyx_v_feature;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1599")'> 1599:             self.threshold[node_id] = threshold</pre>
<pre id='line1599' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;threshold[__pyx_v_node_id]) = __pyx_v_threshold;
    goto __pyx_L6;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1600")'> 1600: </pre>
<pre id='line1600' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1601")'> 1601:         else:</pre>
<pre id='line1601' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1602")'> 1602:             self.children_left[node_id] = _TREE_LEAF</pre>
<pre id='line1602' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;children_left[__pyx_v_node_id]) = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1603")'> 1603:             self.children_right[node_id] = _TREE_LEAF</pre>
<pre id='line1603' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;children_right[__pyx_v_node_id]) = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1604")'> 1604:             self.feature[node_id] = _TREE_UNDEFINED</pre>
<pre id='line1604' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;feature[__pyx_v_node_id]) = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_UNDEFINED;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1605")'> 1605:             self.threshold[node_id] = _TREE_UNDEFINED</pre>
<pre id='line1605' class='code' style='background-color: #FFFFff'>    (__pyx_v_self-&gt;threshold[__pyx_v_node_id]) = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_UNDEFINED;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1606")'> 1606: </pre>
<pre id='line1606' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1607")'> 1607:         self.node_count += 1</pre>
<pre id='line1607' class='code' style='background-color: #FFFFff'>  __pyx_v_self-&gt;node_count = (__pyx_v_self-&gt;node_count + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1608")'> 1608: </pre>
<pre id='line1608' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1609")'> 1609:         return node_id</pre>
<pre id='line1609' class='code' style='background-color: #FFFFff'>  __pyx_r = __pyx_v_node_id;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1610")'> 1610: </pre>
<pre id='line1610' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF39' onclick='toggleDiv("line1611")'> 1611:     cpdef build(self, np.ndarray X,</pre>
<pre id='line1611' class='code' style='background-color: #FFFF39'>static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_11build(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_build(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X, PyArrayObject *__pyx_v_y, int __pyx_skip_dispatch, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_build *__pyx_optional_args) {
/* … */
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_build);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_11build)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_X));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_v_X));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_X));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_y));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((PyObject *)__pyx_v_y));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_y));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_sample_weight));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, ((PyObject *)__pyx_v_sample_weight));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_sample_weight));
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_3;
      __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.build", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_splitter);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_X);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_y);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sample_weight);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_11build(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_10build[] = "Build a decision tree from the training set (X, y).";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_11build(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_X = 0;
  PyArrayObject *__pyx_v_y = 0;
  PyArrayObject *__pyx_v_sample_weight = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("build (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_X,&amp;__pyx_n_s_y,&amp;__pyx_n_s_sample_weight,0};
    PyObject* values[3] = {0,0,0};
/* … */
  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_10build(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X, PyArrayObject *__pyx_v_y, PyArrayObject *__pyx_v_sample_weight) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("build", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.sample_weight = __pyx_v_sample_weight;
  __pyx_t_1 = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;build(__pyx_v_self, __pyx_v_X, __pyx_v_y, 1, &amp;__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.build", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1612")'> 1612:                       np.ndarray y,</pre>
<pre id='line1612' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2d' onclick='toggleDiv("line1613")'> 1613:                       np.ndarray sample_weight=None):</pre>
<pre id='line1613' class='code' style='background-color: #FFFF2d'>  PyArrayObject *__pyx_v_sample_weight = ((PyArrayObject *)Py_None);
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *__pyx_v_sample_weight_ptr;
  int __pyx_v_init_capacity;
  struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *__pyx_v_splitter = 0;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_stack_n_values;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_stack_capacity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_stack;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_start;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_depth;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_parent;
  int __pyx_v_is_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_node_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_pos;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_feature;
  double __pyx_v_threshold;
  double __pyx_v_impurity;
  int __pyx_v_is_leaf;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node_id;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("build", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_sample_weight = __pyx_optional_args-&gt;sample_weight;
    }
  }
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_X);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_y);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_sample_weight);
/* … */
    values[2] = (PyObject *)((PyArrayObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_X)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_y)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("build", 0, 2, 3, 1); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_sample_weight);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "build") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_X = ((PyArrayObject *)values[0]);
    __pyx_v_y = ((PyArrayObject *)values[1]);
    __pyx_v_sample_weight = ((PyArrayObject *)values[2]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("build", 0, 2, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.build", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_X), __pyx_ptype_5numpy_ndarray, 1, "X", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1611; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_y), __pyx_ptype_5numpy_ndarray, 1, "y", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1612; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_sample_weight), __pyx_ptype_5numpy_ndarray, 1, "sample_weight", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1613; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_10build(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), __pyx_v_X, __pyx_v_y, __pyx_v_sample_weight);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1614")'> 1614:         """Build a decision tree from the training set (X, y)."""</pre>
<pre id='line1614' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1615")'> 1615:         # Prepare data before recursive partitioning</pre>
<pre id='line1615' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line1616")'> 1616:         if X.dtype != DTYPE or not X.flags.contiguous:</pre>
<pre id='line1616' class='code' style='background-color: #FFFF4f'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_X), __pyx_n_s_dtype);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DTYPE);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_3, Py_NE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!__pyx_t_4) {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_X), __pyx_n_s_flags);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_contiguous);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(__pyx_t_5 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1616; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = (!__pyx_t_5);
    __pyx_t_5 = __pyx_t_6;
  } else {
    __pyx_t_5 = __pyx_t_4;
  }
  if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFF35' onclick='toggleDiv("line1617")'> 1617:             X = np.asarray(X, dtype=DTYPE, order="C")</pre>
<pre id='line1617' class='code' style='background-color: #FFFF35'>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_X));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_v_X));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_X));
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DTYPE);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_7) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_order, __pyx_n_s_C) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_3, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_7) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_7, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1617; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_X, ((PyArrayObject *)__pyx_t_7));
    __pyx_t_7 = 0;
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1618")'> 1618: </pre>
<pre id='line1618' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line1619")'> 1619:         if y.dtype != DOUBLE or not y.flags.contiguous:</pre>
<pre id='line1619' class='code' style='background-color: #FFFF4f'>  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_y), __pyx_n_s_dtype);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DOUBLE);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_t_1, Py_NE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(__pyx_t_5 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!__pyx_t_5) {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_y), __pyx_n_s_flags);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_contiguous);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1619; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_6 = (!__pyx_t_4);
    __pyx_t_4 = __pyx_t_6;
  } else {
    __pyx_t_4 = __pyx_t_5;
  }
  if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF35' onclick='toggleDiv("line1620")'> 1620:             y = np.asarray(y, dtype=DOUBLE, order="C")</pre>
<pre id='line1620' class='code' style='background-color: #FFFF35'>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_y));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_y));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_y));
    __pyx_t_7 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DOUBLE);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_dtype, __pyx_t_2) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_order, __pyx_n_s_C) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_1, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1620; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_y, ((PyArrayObject *)__pyx_t_2));
    __pyx_t_2 = 0;
    goto __pyx_L4;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1621")'> 1621: </pre>
<pre id='line1621' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1622")'> 1622:         cdef DOUBLE_t* sample_weight_ptr = NULL</pre>
<pre id='line1622' class='code' style='background-color: #FFFFff'>  __pyx_v_sample_weight_ptr = NULL;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1623")'> 1623:         if sample_weight is not None:</pre>
<pre id='line1623' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = (((PyObject *)__pyx_v_sample_weight) != Py_None);
  __pyx_t_5 = (__pyx_t_4 != 0);
  if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line1624")'> 1624:             if ((sample_weight.dtype != DOUBLE) or</pre>
<pre id='line1624' class='code' style='background-color: #FFFF6a'>    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_sample_weight), __pyx_n_s_dtype);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1624; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DOUBLE);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1624; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_2, __pyx_t_7, Py_NE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1624; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_5 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1624; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (!__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1625")'> 1625:                 (not sample_weight.flags.contiguous)):</pre>
<pre id='line1625' class='code' style='background-color: #FFFF8d'>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_sample_weight), __pyx_n_s_flags);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1625; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_contiguous);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1625; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_7);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1625; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_6 = (!__pyx_t_4);
      __pyx_t_4 = __pyx_t_6;
    } else {
      __pyx_t_4 = __pyx_t_5;
    }
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF48' onclick='toggleDiv("line1626")'> 1626:                 sample_weight = np.asarray(sample_weight,</pre>
<pre id='line1626' class='code' style='background-color: #FFFF48'>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_sample_weight));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, ((PyObject *)__pyx_v_sample_weight));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_sample_weight));
      __pyx_t_2 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
/* … */
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_7, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_sample_weight, ((PyArrayObject *)__pyx_t_3));
      __pyx_t_3 = 0;
      goto __pyx_L6;
    }
    __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line1627")'> 1627:                                            dtype=DOUBLE, order="C")</pre>
<pre id='line1627' class='code' style='background-color: #FFFF6e'>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_DOUBLE);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1627; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_dtype, __pyx_t_3) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_order, __pyx_n_s_C) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1626; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1628")'> 1628:             sample_weight_ptr = &lt;DOUBLE_t*&gt; sample_weight.data</pre>
<pre id='line1628' class='code' style='background-color: #FFFFff'>    __pyx_v_sample_weight_ptr = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DOUBLE_t *)__pyx_v_sample_weight-&gt;data);
    goto __pyx_L5;
  }
  __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1629")'> 1629: </pre>
<pre id='line1629' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1630")'> 1630:         # Initial capacity</pre>
<pre id='line1630' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1631")'> 1631:         cdef int init_capacity</pre>
<pre id='line1631' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1632")'> 1632: </pre>
<pre id='line1632' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1633")'> 1633:         if self.max_depth &lt;= 10:</pre>
<pre id='line1633' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = ((__pyx_v_self-&gt;max_depth &lt;= 10) != 0);
  if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1634")'> 1634:             init_capacity = (2 ** (self.max_depth + 1)) - 1</pre>
<pre id='line1634' class='code' style='background-color: #FFFFff'>    __pyx_v_init_capacity = (__Pyx_pow_long(2, (__pyx_v_self-&gt;max_depth + 1)) - 1);
    goto __pyx_L7;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1635")'> 1635:         else:</pre>
<pre id='line1635' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1636")'> 1636:             init_capacity = 2047</pre>
<pre id='line1636' class='code' style='background-color: #FFFFff'>    __pyx_v_init_capacity = 2047;
  }
  __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1637")'> 1637: </pre>
<pre id='line1637' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1638")'> 1638:         self._resize(init_capacity)</pre>
<pre id='line1638' class='code' style='background-color: #FFFFff'>  __pyx_t_8.__pyx_n = 1;
  __pyx_t_8.capacity = __pyx_v_init_capacity;
  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_resize(__pyx_v_self, &amp;__pyx_t_8); 
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1639")'> 1639: </pre>
<pre id='line1639' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1640")'> 1640:         # Recursive partition (without actual recursion)</pre>
<pre id='line1640' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line1641")'> 1641:         cdef Splitter splitter = self.splitter</pre>
<pre id='line1641' class='code' style='background-color: #FFFFe7'>  __pyx_t_3 = ((PyObject *)__pyx_v_self-&gt;splitter);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
  __pyx_v_splitter = ((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1642")'> 1642:         splitter.init(X, y, sample_weight_ptr)</pre>
<pre id='line1642' class='code' style='background-color: #FFFFff'>  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_splitter-&gt;__pyx_vtab)-&gt;init(__pyx_v_splitter, __pyx_v_X, __pyx_v_y, __pyx_v_sample_weight_ptr);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1643")'> 1643: </pre>
<pre id='line1643' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1644")'> 1644:         cdef SIZE_t stack_n_values = 5</pre>
<pre id='line1644' class='code' style='background-color: #FFFFff'>  __pyx_v_stack_n_values = 5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1645")'> 1645:         cdef SIZE_t stack_capacity = 50</pre>
<pre id='line1645' class='code' style='background-color: #FFFFff'>  __pyx_v_stack_capacity = 50;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1646")'> 1646:         cdef SIZE_t* stack = &lt;SIZE_t*&gt; malloc(stack_capacity * sizeof(SIZE_t))</pre>
<pre id='line1646' class='code' style='background-color: #FFFFff'>  __pyx_v_stack = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)malloc((__pyx_v_stack_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1647")'> 1647: </pre>
<pre id='line1647' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1648")'> 1648:         stack[0] = 0                    # start</pre>
<pre id='line1648' class='code' style='background-color: #FFFFff'>  (__pyx_v_stack[0]) = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1649")'> 1649:         stack[1] = splitter.n_samples   # end</pre>
<pre id='line1649' class='code' style='background-color: #FFFFff'>  __pyx_t_9 = __pyx_v_splitter-&gt;n_samples;
  (__pyx_v_stack[1]) = __pyx_t_9;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1650")'> 1650:         stack[2] = 0                    # depth</pre>
<pre id='line1650' class='code' style='background-color: #FFFFff'>  (__pyx_v_stack[2]) = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1651")'> 1651:         stack[3] = _TREE_UNDEFINED      # parent</pre>
<pre id='line1651' class='code' style='background-color: #FFFFff'>  (__pyx_v_stack[3]) = __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_UNDEFINED;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1652")'> 1652:         stack[4] = 0                    # is_left</pre>
<pre id='line1652' class='code' style='background-color: #FFFFff'>  (__pyx_v_stack[4]) = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1653")'> 1653: </pre>
<pre id='line1653' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1654")'> 1654:         cdef SIZE_t start</pre>
<pre id='line1654' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1655")'> 1655:         cdef SIZE_t end</pre>
<pre id='line1655' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1656")'> 1656:         cdef SIZE_t depth</pre>
<pre id='line1656' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1657")'> 1657:         cdef SIZE_t parent</pre>
<pre id='line1657' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1658")'> 1658:         cdef bint is_left</pre>
<pre id='line1658' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1659")'> 1659: </pre>
<pre id='line1659' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1660")'> 1660:         cdef SIZE_t n_node_samples</pre>
<pre id='line1660' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1661")'> 1661:         cdef SIZE_t pos</pre>
<pre id='line1661' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1662")'> 1662:         cdef SIZE_t feature</pre>
<pre id='line1662' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1663")'> 1663:         cdef double threshold</pre>
<pre id='line1663' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1664")'> 1664:         cdef double impurity</pre>
<pre id='line1664' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1665")'> 1665:         cdef bint is_leaf</pre>
<pre id='line1665' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1666")'> 1666: </pre>
<pre id='line1666' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1667")'> 1667:         cdef SIZE_t node_id</pre>
<pre id='line1667' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1668")'> 1668: </pre>
<pre id='line1668' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1669")'> 1669:         while stack_n_values &gt; 0:</pre>
<pre id='line1669' class='code' style='background-color: #FFFFff'>  while (1) {
    __pyx_t_4 = ((__pyx_v_stack_n_values &gt; 0) != 0);
    if (!__pyx_t_4) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1670")'> 1670:             stack_n_values -= 5</pre>
<pre id='line1670' class='code' style='background-color: #FFFFff'>    __pyx_v_stack_n_values = (__pyx_v_stack_n_values - 5);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1671")'> 1671: </pre>
<pre id='line1671' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1672")'> 1672:             start = stack[stack_n_values]</pre>
<pre id='line1672' class='code' style='background-color: #FFFFff'>    __pyx_v_start = (__pyx_v_stack[__pyx_v_stack_n_values]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1673")'> 1673:             end = stack[stack_n_values + 1]</pre>
<pre id='line1673' class='code' style='background-color: #FFFFff'>    __pyx_v_end = (__pyx_v_stack[(__pyx_v_stack_n_values + 1)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1674")'> 1674:             depth = stack[stack_n_values + 2]</pre>
<pre id='line1674' class='code' style='background-color: #FFFFff'>    __pyx_v_depth = (__pyx_v_stack[(__pyx_v_stack_n_values + 2)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1675")'> 1675:             parent = stack[stack_n_values + 3]</pre>
<pre id='line1675' class='code' style='background-color: #FFFFff'>    __pyx_v_parent = (__pyx_v_stack[(__pyx_v_stack_n_values + 3)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1676")'> 1676:             is_left = stack[stack_n_values + 4]</pre>
<pre id='line1676' class='code' style='background-color: #FFFFff'>    __pyx_v_is_left = (__pyx_v_stack[(__pyx_v_stack_n_values + 4)]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1677")'> 1677: </pre>
<pre id='line1677' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1678")'> 1678:             n_node_samples = end - start</pre>
<pre id='line1678' class='code' style='background-color: #FFFFff'>    __pyx_v_n_node_samples = (__pyx_v_end - __pyx_v_start);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1679")'> 1679:             is_leaf = ((depth &gt;= self.max_depth) or</pre>
<pre id='line1679' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = (__pyx_v_depth &gt;= __pyx_v_self-&gt;max_depth);
    if (!__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1680")'> 1680:                        (n_node_samples &lt; self.min_samples_split) or</pre>
<pre id='line1680' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = (__pyx_v_n_node_samples &lt; __pyx_v_self-&gt;min_samples_split);
      if (!__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1681")'> 1681:                        (n_node_samples &lt; 2 * self.min_samples_leaf))</pre>
<pre id='line1681' class='code' style='background-color: #FFFFff'>        __pyx_t_6 = (__pyx_v_n_node_samples &lt; (2 * __pyx_v_self-&gt;min_samples_leaf));
        __pyx_t_10 = __pyx_t_6;
      } else {
        __pyx_t_10 = __pyx_t_5;
      }
      __pyx_t_5 = __pyx_t_10;
    } else {
      __pyx_t_5 = __pyx_t_4;
    }
    __pyx_v_is_leaf = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1682")'> 1682: </pre>
<pre id='line1682' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1683")'> 1683:             splitter.node_reset(start, end, &amp;impurity)</pre>
<pre id='line1683' class='code' style='background-color: #FFFFff'>    ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_splitter-&gt;__pyx_vtab)-&gt;node_reset(__pyx_v_splitter, __pyx_v_start, __pyx_v_end, (&amp;__pyx_v_impurity));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1684")'> 1684:             is_leaf = is_leaf or (impurity &lt; 1e-7)</pre>
<pre id='line1684' class='code' style='background-color: #FFFFff'>    if (!__pyx_v_is_leaf) {
      __pyx_t_5 = (__pyx_v_impurity &lt; 1e-7);
      __pyx_t_4 = __pyx_t_5;
    } else {
      __pyx_t_4 = __pyx_v_is_leaf;
    }
    __pyx_v_is_leaf = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1685")'> 1685: </pre>
<pre id='line1685' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1686")'> 1686:             if not is_leaf:</pre>
<pre id='line1686' class='code' style='background-color: #FFFFff'>    __pyx_t_4 = ((!(__pyx_v_is_leaf != 0)) != 0);
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1687")'> 1687:                 splitter.node_split(&amp;pos, &amp;feature, &amp;threshold)</pre>
<pre id='line1687' class='code' style='background-color: #FFFFff'>      ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_splitter-&gt;__pyx_vtab)-&gt;node_split(__pyx_v_splitter, (&amp;__pyx_v_pos), (&amp;__pyx_v_feature), (&amp;__pyx_v_threshold));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1688")'> 1688:                 is_leaf = is_leaf or (pos &gt;= end)</pre>
<pre id='line1688' class='code' style='background-color: #FFFFff'>      if (!__pyx_v_is_leaf) {
        __pyx_t_4 = (__pyx_v_pos &gt;= __pyx_v_end);
        __pyx_t_5 = __pyx_t_4;
      } else {
        __pyx_t_5 = __pyx_v_is_leaf;
      }
      __pyx_v_is_leaf = __pyx_t_5;
      goto __pyx_L10;
    }
    __pyx_L10:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1689")'> 1689: </pre>
<pre id='line1689' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1690")'> 1690:             node_id = self._add_node(parent, is_left, is_leaf, feature,</pre>
<pre id='line1690' class='code' style='background-color: #FFFFff'>    __pyx_v_node_id = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_add_node(__pyx_v_self, __pyx_v_parent, __pyx_v_is_left, __pyx_v_is_leaf, __pyx_v_feature, __pyx_v_threshold, __pyx_v_impurity, __pyx_v_n_node_samples);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1691")'> 1691:                                      threshold, impurity, n_node_samples)</pre>
<pre id='line1691' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1692")'> 1692: </pre>
<pre id='line1692' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1693")'> 1693:             if is_leaf:</pre>
<pre id='line1693' class='code' style='background-color: #FFFFff'>    __pyx_t_5 = (__pyx_v_is_leaf != 0);
    if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1694")'> 1694:                 # Don't store value for internal nodes</pre>
<pre id='line1694' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1695")'> 1695:                 splitter.node_value(self.value + node_id * self.value_stride)</pre>
<pre id='line1695' class='code' style='background-color: #FFFFff'>      ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Splitter *)__pyx_v_splitter-&gt;__pyx_vtab)-&gt;node_value(__pyx_v_splitter, (__pyx_v_self-&gt;value + (__pyx_v_node_id * __pyx_v_self-&gt;value_stride)));
      goto __pyx_L11;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1696")'> 1696: </pre>
<pre id='line1696' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1697")'> 1697:             else:</pre>
<pre id='line1697' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1698")'> 1698:                 if stack_n_values + 10 &gt; stack_capacity:</pre>
<pre id='line1698' class='code' style='background-color: #FFFFff'>      __pyx_t_5 = (((__pyx_v_stack_n_values + 10) &gt; __pyx_v_stack_capacity) != 0);
      if (__pyx_t_5) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1699")'> 1699:                     stack_capacity *= 2</pre>
<pre id='line1699' class='code' style='background-color: #FFFFff'>        __pyx_v_stack_capacity = (__pyx_v_stack_capacity * 2);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1700")'> 1700:                     stack = &lt;SIZE_t*&gt; realloc(stack, stack_capacity * sizeof(SIZE_t))</pre>
<pre id='line1700' class='code' style='background-color: #FFFFff'>        __pyx_v_stack = ((__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *)realloc(__pyx_v_stack, (__pyx_v_stack_capacity * (sizeof(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t)))));
        goto __pyx_L12;
      }
      __pyx_L12:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1701")'> 1701: </pre>
<pre id='line1701' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1702")'> 1702:                 # Stack right child</pre>
<pre id='line1702' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1703")'> 1703:                 stack[stack_n_values] = pos</pre>
<pre id='line1703' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[__pyx_v_stack_n_values]) = __pyx_v_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1704")'> 1704:                 stack[stack_n_values + 1] = end</pre>
<pre id='line1704' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 1)]) = __pyx_v_end;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1705")'> 1705:                 stack[stack_n_values + 2] = depth + 1</pre>
<pre id='line1705' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 2)]) = (__pyx_v_depth + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1706")'> 1706:                 stack[stack_n_values + 3] = node_id</pre>
<pre id='line1706' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 3)]) = __pyx_v_node_id;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1707")'> 1707:                 stack[stack_n_values + 4] = 0</pre>
<pre id='line1707' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 4)]) = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1708")'> 1708:                 stack_n_values += 5</pre>
<pre id='line1708' class='code' style='background-color: #FFFFff'>      __pyx_v_stack_n_values = (__pyx_v_stack_n_values + 5);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1709")'> 1709: </pre>
<pre id='line1709' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1710")'> 1710:                 # Stack left child</pre>
<pre id='line1710' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1711")'> 1711:                 stack[stack_n_values] = start</pre>
<pre id='line1711' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[__pyx_v_stack_n_values]) = __pyx_v_start;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1712")'> 1712:                 stack[stack_n_values + 1] = pos</pre>
<pre id='line1712' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 1)]) = __pyx_v_pos;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1713")'> 1713:                 stack[stack_n_values + 2] = depth + 1</pre>
<pre id='line1713' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 2)]) = (__pyx_v_depth + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1714")'> 1714:                 stack[stack_n_values + 3] = node_id</pre>
<pre id='line1714' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 3)]) = __pyx_v_node_id;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1715")'> 1715:                 stack[stack_n_values + 4] = 1</pre>
<pre id='line1715' class='code' style='background-color: #FFFFff'>      (__pyx_v_stack[(__pyx_v_stack_n_values + 4)]) = 1;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1716")'> 1716:                 stack_n_values += 5</pre>
<pre id='line1716' class='code' style='background-color: #FFFFff'>      __pyx_v_stack_n_values = (__pyx_v_stack_n_values + 5);
    }
    __pyx_L11:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1717")'> 1717: </pre>
<pre id='line1717' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1718")'> 1718:         self._resize(self.node_count)</pre>
<pre id='line1718' class='code' style='background-color: #FFFFff'>  __pyx_t_8.__pyx_n = 1;
  __pyx_t_8.capacity = __pyx_v_self-&gt;node_count;
  ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;_resize(__pyx_v_self, &amp;__pyx_t_8); 
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1719")'> 1719:         free(stack)</pre>
<pre id='line1719' class='code' style='background-color: #FFFFff'>  free(__pyx_v_stack);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1720")'> 1720: </pre>
<pre id='line1720' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF25' onclick='toggleDiv("line1721")'> 1721:     cpdef predict(self, np.ndarray[DTYPE_t, ndim=2] X):</pre>
<pre id='line1721' class='code' style='background-color: #FFFF25'>static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13predict(PyObject *__pyx_v_self, PyObject *__pyx_v_X); /*proto*/
static PyObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_predict(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X, int __pyx_skip_dispatch) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature;
  double *__pyx_v_threshold;
  double *__pyx_v_value;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_outputs;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_max_n_classes;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_value_stride;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node_id;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_offset;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_k;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_c;
  PyArrayObject *__pyx_v_out = 0;
  PyArrayObject *__pyx_v_out_multi = 0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_out;
  __Pyx_Buffer __pyx_pybuffer_out;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_out_multi;
  __Pyx_Buffer __pyx_pybuffer_out_multi;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("predict", 0);
  __pyx_pybuffer_out.pybuffer.buf = NULL;
  __pyx_pybuffer_out.refcount = 0;
  __pyx_pybuffernd_out.data = NULL;
  __pyx_pybuffernd_out.rcbuffer = &amp;__pyx_pybuffer_out;
  __pyx_pybuffer_out_multi.pybuffer.buf = NULL;
  __pyx_pybuffer_out_multi.refcount = 0;
  __pyx_pybuffernd_out_multi.data = NULL;
  __pyx_pybuffernd_out_multi.rcbuffer = &amp;__pyx_pybuffer_out_multi;
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_predict);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13predict)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_X));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_v_X));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_X));
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_3;
      __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.predict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_out);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_out_multi);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13predict(PyObject *__pyx_v_self, PyObject *__pyx_v_X); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_12predict[] = "Predict target for X.";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_13predict(PyObject *__pyx_v_self, PyObject *__pyx_v_X) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("predict (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_X), __pyx_ptype_5numpy_ndarray, 1, "X", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_12predict(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), ((PyArrayObject *)__pyx_v_X));
  CYTHON_UNUSED int __pyx_lineno = 0;
  CYTHON_UNUSED const char *__pyx_filename = NULL;
  CYTHON_UNUSED int __pyx_clineno = 0;

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_12predict(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X) {
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("predict", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;predict(__pyx_v_self, ((PyArrayObject *)__pyx_v_X), 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1721; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.predict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1722")'> 1722:         """Predict target for X."""</pre>
<pre id='line1722' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1723")'> 1723:         cdef SIZE_t* children_left = self.children_left</pre>
<pre id='line1723' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_left;
  __pyx_v_children_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1724")'> 1724:         cdef SIZE_t* children_right = self.children_right</pre>
<pre id='line1724' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_right;
  __pyx_v_children_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1725")'> 1725:         cdef SIZE_t* feature = self.feature</pre>
<pre id='line1725' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;feature;
  __pyx_v_feature = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1726")'> 1726:         cdef double* threshold = self.threshold</pre>
<pre id='line1726' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;threshold;
  __pyx_v_threshold = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1727")'> 1727:         cdef double* value = self.value</pre>
<pre id='line1727' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;value;
  __pyx_v_value = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1728")'> 1728: </pre>
<pre id='line1728' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1729")'> 1729:         cdef SIZE_t n_samples = X.shape[0]</pre>
<pre id='line1729' class='code' style='background-color: #FFFFff'>  __pyx_v_n_samples = (__pyx_v_X-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1730")'> 1730:         cdef SIZE_t* n_classes = self.n_classes</pre>
<pre id='line1730' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;n_classes;
  __pyx_v_n_classes = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1731")'> 1731:         cdef SIZE_t n_outputs = self.n_outputs</pre>
<pre id='line1731' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_self-&gt;n_outputs;
  __pyx_v_n_outputs = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1732")'> 1732:         cdef SIZE_t max_n_classes = self.max_n_classes</pre>
<pre id='line1732' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_self-&gt;max_n_classes;
  __pyx_v_max_n_classes = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1733")'> 1733:         cdef SIZE_t value_stride = self.value_stride</pre>
<pre id='line1733' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_self-&gt;value_stride;
  __pyx_v_value_stride = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1734")'> 1734: </pre>
<pre id='line1734' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1735")'> 1735:         cdef SIZE_t node_id = 0</pre>
<pre id='line1735' class='code' style='background-color: #FFFFff'>  __pyx_v_node_id = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1736")'> 1736:         cdef SIZE_t offset</pre>
<pre id='line1736' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1737")'> 1737:         cdef SIZE_t i</pre>
<pre id='line1737' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1738")'> 1738:         cdef SIZE_t k</pre>
<pre id='line1738' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1739")'> 1739:         cdef SIZE_t c</pre>
<pre id='line1739' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1740")'> 1740: </pre>
<pre id='line1740' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1741")'> 1741:         cdef np.ndarray[np.float64_t, ndim=2] out</pre>
<pre id='line1741' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1742")'> 1742:         cdef np.ndarray[np.float64_t, ndim=3] out_multi</pre>
<pre id='line1742' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1743")'> 1743: </pre>
<pre id='line1743' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1744")'> 1744:         if n_outputs == 1:</pre>
<pre id='line1744' class='code' style='background-color: #FFFFff'>  __pyx_t_7 = ((__pyx_v_n_outputs == 1) != 0);
  if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFF22' onclick='toggleDiv("line1745")'> 1745:             out = np.zeros((n_samples, max_n_classes), dtype=np.float64)</pre>
<pre id='line1745' class='code' style='background-color: #FFFF22'>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_n_samples);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_max_n_classes);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    __pyx_t_1 = 0;
    __pyx_t_2 = 0;
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_8);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
    __pyx_t_8 = 0;
    __pyx_t_8 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_float64);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_8, __pyx_n_s_dtype, __pyx_t_9) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_2, __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    if (!(likely(((__pyx_t_9) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_9, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    __pyx_t_10 = ((PyArrayObject *)__pyx_t_9);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_10, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack);
      if (unlikely(__pyx_t_11 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_13, &amp;__pyx_t_14);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_out, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_13); Py_XDECREF(__pyx_t_14);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_13, __pyx_t_14);
        }
      }
      __pyx_pybuffernd_out.diminfo[0].strides = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_out.diminfo[0].shape = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_out.diminfo[1].strides = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_out.diminfo[1].shape = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.shape[1];
      if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1745; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_t_10 = 0;
    __pyx_v_out = ((PyArrayObject *)__pyx_t_9);
    __pyx_t_9 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1746")'> 1746: </pre>
<pre id='line1746' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1747")'> 1747:             for i from 0 &lt;= i &lt; n_samples:</pre>
<pre id='line1747' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = __pyx_v_n_samples;
    for (__pyx_v_i = 0; __pyx_v_i &lt; __pyx_t_6; __pyx_v_i++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1748")'> 1748:                 node_id = 0</pre>
<pre id='line1748' class='code' style='background-color: #FFFFff'>      __pyx_v_node_id = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1749")'> 1749: </pre>
<pre id='line1749' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1750")'> 1750:                 # While node_id not a leaf</pre>
<pre id='line1750' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1751")'> 1751:                 while children_left[node_id] != _TREE_LEAF:</pre>
<pre id='line1751' class='code' style='background-color: #FFFFff'>      while (1) {
        __pyx_t_7 = (((__pyx_v_children_left[__pyx_v_node_id]) != __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF) != 0);
        if (!__pyx_t_7) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1752")'> 1752:                     # ... and children_right[node_id] != _TREE_LEAF:</pre>
<pre id='line1752' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1753")'> 1753:                     if X[i, feature[node_id]] &lt;= threshold[node_id]:</pre>
<pre id='line1753' class='code' style='background-color: #FFFFff'>        __pyx_t_15 = __pyx_v_i;
        __pyx_t_16 = (__pyx_v_feature[__pyx_v_node_id]);
        __pyx_t_7 = (((*__Pyx_BufPtrStrided2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_16, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= (__pyx_v_threshold[__pyx_v_node_id])) != 0);
        if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1754")'> 1754:                         node_id = children_left[node_id]</pre>
<pre id='line1754' class='code' style='background-color: #FFFFff'>          __pyx_v_node_id = (__pyx_v_children_left[__pyx_v_node_id]);
          goto __pyx_L8;
        }
        /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1755")'> 1755:                     else:</pre>
<pre id='line1755' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1756")'> 1756:                         node_id = children_right[node_id]</pre>
<pre id='line1756' class='code' style='background-color: #FFFFff'>          __pyx_v_node_id = (__pyx_v_children_right[__pyx_v_node_id]);
        }
        __pyx_L8:;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1757")'> 1757: </pre>
<pre id='line1757' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1758")'> 1758:                 offset = node_id * value_stride</pre>
<pre id='line1758' class='code' style='background-color: #FFFFff'>      __pyx_v_offset = (__pyx_v_node_id * __pyx_v_value_stride);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1759")'> 1759: </pre>
<pre id='line1759' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1760")'> 1760:                 for c from 0 &lt;= c &lt; n_classes[0]:</pre>
<pre id='line1760' class='code' style='background-color: #FFFFff'>      __pyx_t_17 = (__pyx_v_n_classes[0]);
      for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_17; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1761")'> 1761:                     out[i, c] = value[offset + c]</pre>
<pre id='line1761' class='code' style='background-color: #FFFFff'>        __pyx_t_18 = __pyx_v_i;
        __pyx_t_19 = __pyx_v_c;
        *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_out.diminfo[0].strides, __pyx_t_19, __pyx_pybuffernd_out.diminfo[1].strides) = (__pyx_v_value[(__pyx_v_offset + __pyx_v_c)]);
      }
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1762")'> 1762: </pre>
<pre id='line1762' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1763")'> 1763:             return out</pre>
<pre id='line1763' class='code' style='background-color: #FFFFd4'>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_out));
    __pyx_r = ((PyObject *)__pyx_v_out);
    goto __pyx_L0;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1764")'> 1764: </pre>
<pre id='line1764' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1765")'> 1765:         else: # n_outputs &gt; 1</pre>
<pre id='line1765' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF29' onclick='toggleDiv("line1766")'> 1766:             out_multi = np.zeros((n_samples,</pre>
<pre id='line1766' class='code' style='background-color: #FFFF29'>    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_9, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_n_samples);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
/* … */
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_9);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_9);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 2, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    __pyx_t_9 = 0;
    __pyx_t_2 = 0;
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_1);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
    __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_3, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_9) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_9, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    __pyx_t_20 = ((PyArrayObject *)__pyx_t_9);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer);
      __pyx_t_11 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_20, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 3, 0, __pyx_stack);
      if (unlikely(__pyx_t_11 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_14, &amp;__pyx_t_13, &amp;__pyx_t_12);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_out_multi, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 3, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_14); Py_XDECREF(__pyx_t_13); Py_XDECREF(__pyx_t_12);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_14, __pyx_t_13, __pyx_t_12);
        }
      }
      __pyx_pybuffernd_out_multi.diminfo[0].strides = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_out_multi.diminfo[0].shape = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_out_multi.diminfo[1].strides = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_out_multi.diminfo[1].shape = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_out_multi.diminfo[2].strides = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_out_multi.diminfo[2].shape = __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.shape[2];
      if (unlikely(__pyx_t_11 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_t_20 = 0;
    __pyx_v_out_multi = ((PyArrayObject *)__pyx_t_9);
    __pyx_t_9 = 0;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1767")'> 1767:                                   n_outputs,</pre>
<pre id='line1767' class='code' style='background-color: #FFFFd4'>    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_n_outputs);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1767; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line1768")'> 1768:                                   max_n_classes), dtype=np.float64)</pre>
<pre id='line1768' class='code' style='background-color: #FFFF6e'>    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_max_n_classes);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1768; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
/* … */
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1768; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_float64);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1768; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_dtype, __pyx_t_9) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1766; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1769")'> 1769: </pre>
<pre id='line1769' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1770")'> 1770:             for i from 0 &lt;= i &lt; n_samples:</pre>
<pre id='line1770' class='code' style='background-color: #FFFFff'>    __pyx_t_6 = __pyx_v_n_samples;
    for (__pyx_v_i = 0; __pyx_v_i &lt; __pyx_t_6; __pyx_v_i++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1771")'> 1771:                 node_id = 0</pre>
<pre id='line1771' class='code' style='background-color: #FFFFff'>      __pyx_v_node_id = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1772")'> 1772: </pre>
<pre id='line1772' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1773")'> 1773:                 # While node_id not a leaf</pre>
<pre id='line1773' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1774")'> 1774:                 while children_left[node_id] != _TREE_LEAF:</pre>
<pre id='line1774' class='code' style='background-color: #FFFFff'>      while (1) {
        __pyx_t_7 = (((__pyx_v_children_left[__pyx_v_node_id]) != __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF) != 0);
        if (!__pyx_t_7) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1775")'> 1775:                     # ... and children_right[node_id] != _TREE_LEAF:</pre>
<pre id='line1775' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1776")'> 1776:                     if X[i, feature[node_id]] &lt;= threshold[node_id]:</pre>
<pre id='line1776' class='code' style='background-color: #FFFFff'>        __pyx_t_17 = __pyx_v_i;
        __pyx_t_21 = (__pyx_v_feature[__pyx_v_node_id]);
        __pyx_t_7 = (((*__Pyx_BufPtrStrided2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_21, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= (__pyx_v_threshold[__pyx_v_node_id])) != 0);
        if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1777")'> 1777:                         node_id = children_left[node_id]</pre>
<pre id='line1777' class='code' style='background-color: #FFFFff'>          __pyx_v_node_id = (__pyx_v_children_left[__pyx_v_node_id]);
          goto __pyx_L15;
        }
        /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1778")'> 1778:                     else:</pre>
<pre id='line1778' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1779")'> 1779:                         node_id = children_right[node_id]</pre>
<pre id='line1779' class='code' style='background-color: #FFFFff'>          __pyx_v_node_id = (__pyx_v_children_right[__pyx_v_node_id]);
        }
        __pyx_L15:;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1780")'> 1780: </pre>
<pre id='line1780' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1781")'> 1781:                 offset = node_id * value_stride</pre>
<pre id='line1781' class='code' style='background-color: #FFFFff'>      __pyx_v_offset = (__pyx_v_node_id * __pyx_v_value_stride);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1782")'> 1782: </pre>
<pre id='line1782' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1783")'> 1783:                 for k from 0 &lt;= k &lt; n_outputs:</pre>
<pre id='line1783' class='code' style='background-color: #FFFFff'>      __pyx_t_22 = __pyx_v_n_outputs;
      for (__pyx_v_k = 0; __pyx_v_k &lt; __pyx_t_22; __pyx_v_k++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1784")'> 1784:                     for c from 0 &lt;= c &lt; n_classes[k]:</pre>
<pre id='line1784' class='code' style='background-color: #FFFFff'>        __pyx_t_23 = (__pyx_v_n_classes[__pyx_v_k]);
        for (__pyx_v_c = 0; __pyx_v_c &lt; __pyx_t_23; __pyx_v_c++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1785")'> 1785:                         out_multi[i, k, c] = value[offset + c]</pre>
<pre id='line1785' class='code' style='background-color: #FFFFff'>          __pyx_t_24 = __pyx_v_i;
          __pyx_t_25 = __pyx_v_k;
          __pyx_t_26 = __pyx_v_c;
          *__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_out_multi.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_out_multi.diminfo[0].strides, __pyx_t_25, __pyx_pybuffernd_out_multi.diminfo[1].strides, __pyx_t_26, __pyx_pybuffernd_out_multi.diminfo[2].strides) = (__pyx_v_value[(__pyx_v_offset + __pyx_v_c)]);
        }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1786")'> 1786:                     offset += max_n_classes</pre>
<pre id='line1786' class='code' style='background-color: #FFFFff'>        __pyx_v_offset = (__pyx_v_offset + __pyx_v_max_n_classes);
      }
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1787")'> 1787: </pre>
<pre id='line1787' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1788")'> 1788:             return out_multi</pre>
<pre id='line1788' class='code' style='background-color: #FFFFd4'>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_out_multi));
    __pyx_r = ((PyObject *)__pyx_v_out_multi);
    goto __pyx_L0;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1789")'> 1789: </pre>
<pre id='line1789' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF28' onclick='toggleDiv("line1790")'> 1790:     cpdef apply(self, np.ndarray[DTYPE_t, ndim=2] X):</pre>
<pre id='line1790' class='code' style='background-color: #FFFF28'>static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_15apply(PyObject *__pyx_v_self, PyObject *__pyx_v_X); /*proto*/
static PyObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_apply(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X, int __pyx_skip_dispatch) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature;
  double *__pyx_v_threshold;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_samples;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node_id;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_i;
  PyArrayObject *__pyx_v_out = 0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_out;
  __Pyx_Buffer __pyx_pybuffer_out;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("apply", 0);
  __pyx_pybuffer_out.pybuffer.buf = NULL;
  __pyx_pybuffer_out.refcount = 0;
  __pyx_pybuffernd_out.data = NULL;
  __pyx_pybuffernd_out.rcbuffer = &amp;__pyx_pybuffer_out;
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_apply);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_15apply)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_X));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_v_X));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_X));
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_3;
      __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.apply", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_out);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_15apply(PyObject *__pyx_v_self, PyObject *__pyx_v_X); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14apply[] = "Finds the terminal region (=leaf node) for each sample in X.";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_15apply(PyObject *__pyx_v_self, PyObject *__pyx_v_X) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("apply (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_X), __pyx_ptype_5numpy_ndarray, 1, "X", 0))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14apply(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), ((PyArrayObject *)__pyx_v_X));
  CYTHON_UNUSED int __pyx_lineno = 0;
  CYTHON_UNUSED const char *__pyx_filename = NULL;
  CYTHON_UNUSED int __pyx_clineno = 0;

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_14apply(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyArrayObject *__pyx_v_X) {
  __Pyx_LocalBuf_ND __pyx_pybuffernd_X;
  __Pyx_Buffer __pyx_pybuffer_X;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("apply", 0);
  __pyx_pybuffer_X.pybuffer.buf = NULL;
  __pyx_pybuffer_X.refcount = 0;
  __pyx_pybuffernd_X.data = NULL;
  __pyx_pybuffernd_X.rcbuffer = &amp;__pyx_pybuffer_X;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_X, &amp;__Pyx_TypeInfo_nn___pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_X.diminfo[0].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_X.diminfo[0].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_X.diminfo[1].strides = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_X.diminfo[1].shape = __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.shape[1];
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;apply(__pyx_v_self, ((PyArrayObject *)__pyx_v_X), 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1790; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.apply", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_X.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1791")'> 1791:         """Finds the terminal region (=leaf node) for each sample in X."""</pre>
<pre id='line1791' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1792")'> 1792:         cdef SIZE_t* children_left = self.children_left</pre>
<pre id='line1792' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_left;
  __pyx_v_children_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1793")'> 1793:         cdef SIZE_t* children_right = self.children_right</pre>
<pre id='line1793' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_right;
  __pyx_v_children_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1794")'> 1794:         cdef SIZE_t* feature = self.feature</pre>
<pre id='line1794' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;feature;
  __pyx_v_feature = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1795")'> 1795:         cdef double* threshold = self.threshold</pre>
<pre id='line1795' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;threshold;
  __pyx_v_threshold = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1796")'> 1796: </pre>
<pre id='line1796' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1797")'> 1797:         cdef SIZE_t n_samples = X.shape[0]</pre>
<pre id='line1797' class='code' style='background-color: #FFFFff'>  __pyx_v_n_samples = (__pyx_v_X-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1798")'> 1798:         cdef SIZE_t node_id = 0</pre>
<pre id='line1798' class='code' style='background-color: #FFFFff'>  __pyx_v_node_id = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1799")'> 1799:         cdef SIZE_t i = 0</pre>
<pre id='line1799' class='code' style='background-color: #FFFFff'>  __pyx_v_i = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1800")'> 1800: </pre>
<pre id='line1800' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1801")'> 1801:         cdef np.ndarray[np.int32_t, ndim=1] out</pre>
<pre id='line1801' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF24' onclick='toggleDiv("line1802")'> 1802:         out = np.zeros((n_samples,), dtype=np.int32)</pre>
<pre id='line1802' class='code' style='background-color: #FFFF24'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_n_samples);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_dtype, __pyx_t_7) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_1, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_7) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_7, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_7);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_9 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_out.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_out, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
    }
    __pyx_pybuffernd_out.diminfo[0].strides = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_out.diminfo[0].shape = __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_9 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1802; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_out = ((PyArrayObject *)__pyx_t_7);
  __pyx_t_7 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1803")'> 1803: </pre>
<pre id='line1803' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1804")'> 1804:         for i from 0 &lt;= i &lt; n_samples:</pre>
<pre id='line1804' class='code' style='background-color: #FFFFff'>  __pyx_t_13 = __pyx_v_n_samples;
  for (__pyx_v_i = 0; __pyx_v_i &lt; __pyx_t_13; __pyx_v_i++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1805")'> 1805:             node_id = 0</pre>
<pre id='line1805' class='code' style='background-color: #FFFFff'>    __pyx_v_node_id = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1806")'> 1806: </pre>
<pre id='line1806' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1807")'> 1807:             # While node_id not a leaf</pre>
<pre id='line1807' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1808")'> 1808:             while children_left[node_id] != _TREE_LEAF:</pre>
<pre id='line1808' class='code' style='background-color: #FFFFff'>    while (1) {
      __pyx_t_14 = (((__pyx_v_children_left[__pyx_v_node_id]) != __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF) != 0);
      if (!__pyx_t_14) break;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1809")'> 1809:                 # ... and children_right[node_id] != _TREE_LEAF:</pre>
<pre id='line1809' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1810")'> 1810:                 if X[i, feature[node_id]] &lt;= threshold[node_id]:</pre>
<pre id='line1810' class='code' style='background-color: #FFFFff'>      __pyx_t_15 = __pyx_v_i;
      __pyx_t_16 = (__pyx_v_feature[__pyx_v_node_id]);
      __pyx_t_14 = (((*__Pyx_BufPtrStrided2d(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_DTYPE_t *, __pyx_pybuffernd_X.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_X.diminfo[0].strides, __pyx_t_16, __pyx_pybuffernd_X.diminfo[1].strides)) &lt;= (__pyx_v_threshold[__pyx_v_node_id])) != 0);
      if (__pyx_t_14) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1811")'> 1811:                     node_id = children_left[node_id]</pre>
<pre id='line1811' class='code' style='background-color: #FFFFff'>        __pyx_v_node_id = (__pyx_v_children_left[__pyx_v_node_id]);
        goto __pyx_L7;
      }
      /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1812")'> 1812:                 else:</pre>
<pre id='line1812' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1813")'> 1813:                     node_id = children_right[node_id]</pre>
<pre id='line1813' class='code' style='background-color: #FFFFff'>        __pyx_v_node_id = (__pyx_v_children_right[__pyx_v_node_id]);
      }
      __pyx_L7:;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1814")'> 1814: </pre>
<pre id='line1814' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1815")'> 1815:             out[i] = node_id</pre>
<pre id='line1815' class='code' style='background-color: #FFFFff'>    __pyx_t_17 = __pyx_v_i;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_out.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_out.diminfo[0].strides) = __pyx_v_node_id;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1816")'> 1816: </pre>
<pre id='line1816' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1817")'> 1817:         return out</pre>
<pre id='line1817' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_out));
  __pyx_r = ((PyObject *)__pyx_v_out);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1818")'> 1818: </pre>
<pre id='line1818' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF27' onclick='toggleDiv("line1819")'> 1819:     cpdef compute_feature_importances(self, normalize=True):</pre>
<pre id='line1819' class='code' style='background-color: #FFFF27'>static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_17compute_feature_importances(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_compute_feature_importances(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, int __pyx_skip_dispatch, struct __pyx_opt_args_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_compute_feature_importances *__pyx_optional_args) {
  PyObject *__pyx_v_normalize = ((PyObject *)Py_True);
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_children_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_feature;
  double *__pyx_v_impurity;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_n_node_samples;
  CYTHON_UNUSED __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_features;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node_count;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_left;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_n_right;
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_node;
  PyArrayObject *__pyx_v_importances = 0;
  double __pyx_v_normalizer;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_importances;
  __Pyx_Buffer __pyx_pybuffer_importances;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("compute_feature_importances", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_normalize = __pyx_optional_args-&gt;normalize;
    }
  }
  __pyx_pybuffer_importances.pybuffer.buf = NULL;
  __pyx_pybuffer_importances.refcount = 0;
  __pyx_pybuffernd_importances.data = NULL;
  __pyx_pybuffernd_importances.rcbuffer = &amp;__pyx_pybuffer_importances;
  /* Check if called by wrapper */
  if (unlikely(__pyx_skip_dispatch)) ;
  /* Check if overridden in Python */
  else if (unlikely(Py_TYPE(((PyObject *)__pyx_v_self))-&gt;tp_dictoffset != 0)) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_self), __pyx_n_s_compute_feature_importances);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (!PyCFunction_Check(__pyx_t_1) || (PyCFunction_GET_FUNCTION(__pyx_t_1) != (PyCFunction)__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_17compute_feature_importances)) {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_normalize);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_normalize);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_normalize);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_r = __pyx_t_3;
      __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      goto __pyx_L0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.compute_feature_importances", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_importances);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_17compute_feature_importances(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_16compute_feature_importances[] = "Computes the importance of each feature (aka variable).";
static PyObject *__pyx_pw_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_17compute_feature_importances(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_normalize = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("compute_feature_importances (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_normalize,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_True);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_normalize);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "compute_feature_importances") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_normalize = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("compute_feature_importances", 0, 0, 1, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.compute_feature_importances", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_16compute_feature_importances(((struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self), __pyx_v_normalize);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_4Tree_16compute_feature_importances(struct __pyx_obj_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *__pyx_v_self, PyObject *__pyx_v_normalize) {
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("compute_feature_importances", 0);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2.__pyx_n = 1;
  __pyx_t_2.normalize = __pyx_v_normalize;
  __pyx_t_1 = ((struct __pyx_vtabstruct_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_Tree *)__pyx_v_self-&gt;__pyx_vtab)-&gt;compute_feature_importances(__pyx_v_self, 1, &amp;__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1819; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.Tree.compute_feature_importances", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1820")'> 1820:         """Computes the importance of each feature (aka variable)."""</pre>
<pre id='line1820' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1821")'> 1821:         cdef SIZE_t* children_left = self.children_left</pre>
<pre id='line1821' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_left;
  __pyx_v_children_left = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1822")'> 1822:         cdef SIZE_t* children_right = self.children_right</pre>
<pre id='line1822' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;children_right;
  __pyx_v_children_right = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1823")'> 1823:         cdef SIZE_t* feature = self.feature</pre>
<pre id='line1823' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;feature;
  __pyx_v_feature = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1824")'> 1824:         cdef double* impurity = self.impurity</pre>
<pre id='line1824' class='code' style='background-color: #FFFFff'>  __pyx_t_5 = __pyx_v_self-&gt;impurity;
  __pyx_v_impurity = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1825")'> 1825:         cdef SIZE_t* n_node_samples = self.n_node_samples</pre>
<pre id='line1825' class='code' style='background-color: #FFFFff'>  __pyx_t_4 = __pyx_v_self-&gt;n_node_samples;
  __pyx_v_n_node_samples = __pyx_t_4;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1826")'> 1826: </pre>
<pre id='line1826' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1827")'> 1827:         cdef SIZE_t n_features = self.n_features</pre>
<pre id='line1827' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_self-&gt;n_features;
  __pyx_v_n_features = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1828")'> 1828:         cdef SIZE_t node_count = self.node_count</pre>
<pre id='line1828' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_self-&gt;node_count;
  __pyx_v_node_count = __pyx_t_6;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1829")'> 1829: </pre>
<pre id='line1829' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1830")'> 1830:         cdef SIZE_t n_left</pre>
<pre id='line1830' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1831")'> 1831:         cdef SIZE_t n_right</pre>
<pre id='line1831' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1832")'> 1832:         cdef SIZE_t node</pre>
<pre id='line1832' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1833")'> 1833: </pre>
<pre id='line1833' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1834")'> 1834:         cdef np.ndarray[np.float64_t, ndim=1] importances</pre>
<pre id='line1834' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line1835")'> 1835:         importances = np.zeros((self.n_features,))</pre>
<pre id='line1835' class='code' style='background-color: #FFFF30'>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_self-&gt;n_features);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_2);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_8 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_importances, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
    }
    __pyx_pybuffernd_importances.diminfo[0].strides = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_importances.diminfo[0].shape = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_8 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1835; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_t_7 = 0;
  __pyx_v_importances = ((PyArrayObject *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1836")'> 1836: </pre>
<pre id='line1836' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1837")'> 1837:         for node from 0 &lt;= node &lt; node_count:</pre>
<pre id='line1837' class='code' style='background-color: #FFFFff'>  __pyx_t_6 = __pyx_v_node_count;
  for (__pyx_v_node = 0; __pyx_v_node &lt; __pyx_t_6; __pyx_v_node++) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1838")'> 1838:             if children_left[node] != _TREE_LEAF:</pre>
<pre id='line1838' class='code' style='background-color: #FFFFff'>    __pyx_t_12 = (((__pyx_v_children_left[__pyx_v_node]) != __pyx_v_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree__TREE_LEAF) != 0);
    if (__pyx_t_12) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1839")'> 1839:                 # ... and children_right[node] != _TREE_LEAF:</pre>
<pre id='line1839' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1840")'> 1840:                 n_left = n_node_samples[children_left[node]]</pre>
<pre id='line1840' class='code' style='background-color: #FFFFff'>      __pyx_v_n_left = (__pyx_v_n_node_samples[(__pyx_v_children_left[__pyx_v_node])]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1841")'> 1841:                 n_right = n_node_samples[children_right[node]]</pre>
<pre id='line1841' class='code' style='background-color: #FFFFff'>      __pyx_v_n_right = (__pyx_v_n_node_samples[(__pyx_v_children_right[__pyx_v_node])]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1842")'> 1842: </pre>
<pre id='line1842' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1843")'> 1843:                 importances[feature[node]] += \</pre>
<pre id='line1843' class='code' style='background-color: #FFFFff'>      __pyx_t_13 = (__pyx_v_feature[__pyx_v_node]);
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_importances.diminfo[0].strides) += ((((__pyx_v_n_node_samples[__pyx_v_node]) * (__pyx_v_impurity[__pyx_v_node])) - (__pyx_v_n_left * (__pyx_v_impurity[(__pyx_v_children_left[__pyx_v_node])]))) - (__pyx_v_n_right * (__pyx_v_impurity[(__pyx_v_children_right[__pyx_v_node])])));
      goto __pyx_L5;
    }
    __pyx_L5:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1844")'> 1844:                     n_node_samples[node] * impurity[node] \</pre>
<pre id='line1844' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1845")'> 1845:                         - n_left * impurity[children_left[node]] \</pre>
<pre id='line1845' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1846")'> 1846:                         - n_right * impurity[children_right[node]]</pre>
<pre id='line1846' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1847")'> 1847: </pre>
<pre id='line1847' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF46' onclick='toggleDiv("line1848")'> 1848:         importances = importances / self.n_node_samples[0]</pre>
<pre id='line1848' class='code' style='background-color: #FFFF46'>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_self-&gt;n_node_samples[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1848; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyNumber_Divide</span>(((PyObject *)__pyx_v_importances), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1848; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1848; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer);
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_8 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_importances, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
    }
    __pyx_pybuffernd_importances.diminfo[0].strides = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_importances.diminfo[0].shape = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_8 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1848; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_t_7 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_importances, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1849")'> 1849:         cdef double normalizer</pre>
<pre id='line1849' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1850")'> 1850: </pre>
<pre id='line1850' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1851")'> 1851:         if normalize:</pre>
<pre id='line1851' class='code' style='background-color: #FFFFd4'>  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_v_normalize);<span class='error_goto'> if (unlikely(__pyx_t_12 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1851; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (__pyx_t_12) {
</pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line1852")'> 1852:             normalizer = np.sum(importances)</pre>
<pre id='line1852' class='code' style='background-color: #FFFF4f'>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1852; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_sum);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1852; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1852; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_importances));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_importances));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_importances));
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1852; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_14 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_3);<span class='error_goto'> if (unlikely((__pyx_t_14 == (double)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1852; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_normalizer = __pyx_t_14;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1853")'> 1853: </pre>
<pre id='line1853' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1854")'> 1854:             if normalizer &gt; 0.0:</pre>
<pre id='line1854' class='code' style='background-color: #FFFFff'>    __pyx_t_12 = ((__pyx_v_normalizer &gt; 0.0) != 0);
    if (__pyx_t_12) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1855")'> 1855:                 # Avoid dividing by zero (e.g., when root is pure)</pre>
<pre id='line1855' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF41' onclick='toggleDiv("line1856")'> 1856:                 importances /= normalizer</pre>
<pre id='line1856' class='code' style='background-color: #FFFF41'>      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_normalizer);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1856; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyNumber_InPlaceDivide</span>(((PyObject *)__pyx_v_importances), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1856; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1856; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer);
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_8 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_importances, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
          }
        }
        __pyx_pybuffernd_importances.diminfo[0].strides = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_importances.diminfo[0].shape = __pyx_pybuffernd_importances.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_8 &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1856; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      }
      __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_importances, ((PyArrayObject *)__pyx_t_1));
      __pyx_t_1 = 0;
      goto __pyx_L7;
    }
    __pyx_L7:;
    goto __pyx_L6;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1857")'> 1857: </pre>
<pre id='line1857' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line1858")'> 1858:         return importances</pre>
<pre id='line1858' class='code' style='background-color: #FFFFd4'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_importances));
  __pyx_r = ((PyObject *)__pyx_v_importances);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1859")'> 1859: </pre>
<pre id='line1859' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1860")'> 1860: </pre>
<pre id='line1860' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1861")'> 1861: # =============================================================================</pre>
<pre id='line1861' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1862")'> 1862: # Utils</pre>
<pre id='line1862' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1863")'> 1863: # =============================================================================</pre>
<pre id='line1863' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1864")'> 1864: </pre>
<pre id='line1864' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1865")'> 1865: # rand_r replacement taken from 4.4BSD C library.</pre>
<pre id='line1865' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1866")'> 1866: cdef inline int our_rand_r(unsigned *seed) nogil:</pre>
<pre id='line1866' class='code' style='background-color: #FFFFff'>static CYTHON_INLINE int __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_our_rand_r(unsigned int *__pyx_v_seed) {
  int __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1867")'> 1867:     seed[0] = seed[0] * 1103515245 + 12345</pre>
<pre id='line1867' class='code' style='background-color: #FFFFff'>  (__pyx_v_seed[0]) = (((__pyx_v_seed[0]) * 1103515245) + 12345);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1868")'> 1868:     return (seed[0] % (&lt;unsigned&gt;RAND_R_MAX + 1))</pre>
<pre id='line1868' class='code' style='background-color: #FFFFff'>  __pyx_r = ((__pyx_v_seed[0]) % (((unsigned int)__pyx_e_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RAND_R_MAX) + 1));
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1869")'> 1869: </pre>
<pre id='line1869' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1870")'> 1870: cdef inline np.ndarray int_ptr_to_ndarray(int* data, SIZE_t size):</pre>
<pre id='line1870' class='code' style='background-color: #FFFFc4'>static CYTHON_INLINE PyArrayObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_int_ptr_to_ndarray(int *__pyx_v_data, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_size) {
  npy_intp __pyx_v_shape[1];
  PyArrayObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("int_ptr_to_ndarray", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.int_ptr_to_ndarray", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>((PyObject *)__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1871")'> 1871:     """Encapsulate data into a 1D numpy array of int's."""</pre>
<pre id='line1871' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1872")'> 1872:     cdef np.npy_intp shape[1]</pre>
<pre id='line1872' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1873")'> 1873:     shape[0] = &lt;np.npy_intp&gt; size</pre>
<pre id='line1873' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[0]) = ((npy_intp)__pyx_v_size);
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1874")'> 1874:     return np.PyArray_SimpleNewFromData(1, shape, np.NPY_INT, data)</pre>
<pre id='line1874' class='code' style='background-color: #FFFF8d'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  __pyx_t_1 = <span class='py_c_api'>PyArray_SimpleNewFromData</span>(1, __pyx_v_shape, NPY_INT, __pyx_v_data);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1874; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1874; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1875")'> 1875: </pre>
<pre id='line1875' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1876")'> 1876: cdef inline np.ndarray sizet_ptr_to_ndarray(SIZE_t* data, SIZE_t size):</pre>
<pre id='line1876' class='code' style='background-color: #FFFFc4'>static CYTHON_INLINE PyArrayObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_sizet_ptr_to_ndarray(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t *__pyx_v_data, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_size) {
  npy_intp __pyx_v_shape[1];
  PyArrayObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("sizet_ptr_to_ndarray", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.sizet_ptr_to_ndarray", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>((PyObject *)__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1877")'> 1877:     """Encapsulate data into a 1D numpy array of intp's."""</pre>
<pre id='line1877' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1878")'> 1878:     cdef np.npy_intp shape[1]</pre>
<pre id='line1878' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1879")'> 1879:     shape[0] = &lt;np.npy_intp&gt; size</pre>
<pre id='line1879' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[0]) = ((npy_intp)__pyx_v_size);
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1880")'> 1880:     return np.PyArray_SimpleNewFromData(1, shape, np.NPY_INTP, data)</pre>
<pre id='line1880' class='code' style='background-color: #FFFF8d'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  __pyx_t_1 = <span class='py_c_api'>PyArray_SimpleNewFromData</span>(1, __pyx_v_shape, NPY_INTP, __pyx_v_data);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1880; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1880; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1881")'> 1881: </pre>
<pre id='line1881' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line1882")'> 1882: cdef inline np.ndarray double_ptr_to_ndarray(double* data, SIZE_t size):</pre>
<pre id='line1882' class='code' style='background-color: #FFFFc4'>static CYTHON_INLINE PyArrayObject *__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_double_ptr_to_ndarray(double *__pyx_v_data, __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_size) {
  npy_intp __pyx_v_shape[1];
  PyArrayObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("double_ptr_to_ndarray", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("pyMetaLearn.optimizers.metalearn_optimizer.correlation_tree._tree.double_ptr_to_ndarray", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>((PyObject *)__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1883")'> 1883:     """Encapsulate data into a 1D numpy array of double's."""</pre>
<pre id='line1883' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1884")'> 1884:     cdef np.npy_intp shape[1]</pre>
<pre id='line1884' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1885")'> 1885:     shape[0] = &lt;np.npy_intp&gt; size</pre>
<pre id='line1885' class='code' style='background-color: #FFFFff'>  (__pyx_v_shape[0]) = ((npy_intp)__pyx_v_size);
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line1886")'> 1886:     return np.PyArray_SimpleNewFromData(1, shape, np.NPY_DOUBLE, data)</pre>
<pre id='line1886' class='code' style='background-color: #FFFF8d'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  __pyx_t_1 = <span class='py_c_api'>PyArray_SimpleNewFromData</span>(1, __pyx_v_shape, NPY_DOUBLE, __pyx_v_data);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1886; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 1886; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1887")'> 1887: </pre>
<pre id='line1887' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1888")'> 1888: cdef inline SIZE_t rand_int(SIZE_t end, unsigned int* random_state) nogil:</pre>
<pre id='line1888' class='code' style='background-color: #FFFFff'>static CYTHON_INLINE __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_rand_int(__pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_v_end, unsigned int *__pyx_v_random_state) {
  __pyx_t_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_SIZE_t __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1889")'> 1889:     """Generate a random integer in [0; end)."""</pre>
<pre id='line1889' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1890")'> 1890:     return our_rand_r(random_state) % end</pre>
<pre id='line1890' class='code' style='background-color: #FFFFff'>  __pyx_r = (__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_our_rand_r(__pyx_v_random_state) % __pyx_v_end);
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1891")'> 1891: </pre>
<pre id='line1891' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1892")'> 1892: cdef inline double rand_double(unsigned int* random_state) nogil:</pre>
<pre id='line1892' class='code' style='background-color: #FFFFff'>static CYTHON_INLINE double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_rand_double(unsigned int *__pyx_v_random_state) {
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1893")'> 1893:     """Generate a random double in [0; 1)."""</pre>
<pre id='line1893' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1894")'> 1894:     return &lt;double&gt; our_rand_r(random_state) / &lt;double&gt; RAND_R_MAX</pre>
<pre id='line1894' class='code' style='background-color: #FFFFff'>  __pyx_r = (((double)__pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_our_rand_r(__pyx_v_random_state)) / ((double)__pyx_e_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_RAND_R_MAX));
  goto __pyx_L0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1895")'> 1895: </pre>
<pre id='line1895' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1896")'> 1896: cdef inline double log(double x) nogil:</pre>
<pre id='line1896' class='code' style='background-color: #FFFFff'>static CYTHON_INLINE double __pyx_f_11pyMetaLearn_10optimizers_19metalearn_optimizer_16correlation_tree_5_tree_log(double __pyx_v_x) {
  double __pyx_r;
/* … */
  /* function exit code */
  __pyx_L0:;
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1897")'> 1897:     return ln(x) / ln(2.0)</pre>
<pre id='line1897' class='code' style='background-color: #FFFFff'>  __pyx_r = (log(__pyx_v_x) / log(2.0));
  goto __pyx_L0;
</pre></body></html>
